<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Guokas Blog</title>
 <link href="http://localhost:4000/atom.xml" rel="self"/>
 <link href="http://localhost:4000/"/>
 <updated>2022-08-20T18:59:35+08:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name>Guokas</name>
   <email></email>
 </author>

 
 <entry>
   <title>Log Expensive Queries Into Files By Extended Events</title>
   <link href="http://localhost:4000/mssql/2021/09/04/log-expensive-queries-by-extended-events/"/>
   <updated>2021-09-04T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/09/04/log-expensive-queries-by-extended-events</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous blog, we discussed &lt;a href=&quot;../../../../mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot;&gt;how to print slower SQLs and print them at the console in real-time&lt;/a&gt;. But it is inconvenient because DBA may tiredly execute the same printing snippet many times over, which causes drama. Let’s dwell on this occasion, that you need to watch all the expensive queries run in the middle of the night, and you are not available to execute the printing snippet.(Even though &lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; caches query plans, but it is still possible to release cached plans when it is less valuable.)&lt;/p&gt;

&lt;p&gt;So, You need a mechanism, which can periodically scan slower SQLs, or instantly write down expensive SQLs into log files. Fortunately, SQL Server provides a functionality called Extended Events. You can measure SQL’s running time once it finished its query, and that is awesome. All that you need to do is to register an event, and SQL Server will do these dirty boring jobs for you automatically. For more Extended Events details, Take a look at Microsoft’s &lt;a href=&quot;https://docs.microsoft.com/en-us/sql/relational-databases/extended-events/extended-events?view=sql-server-ver15&quot;&gt;Extended events overview&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following guidance will illustrate you to set up an expensive SQL query’s logging configuration. As I mentioned early, SQL Server provided Extended Events, which are easy and convenient to use. There are several ways that you can create an Extended Event through a T-SQL snippet, “New Session” on SSMS, or “New Session Wizard” on SSMS.&lt;/p&gt;

&lt;p&gt;I will only represent the first method of creating an Extended Event by using a T-SQL snippet. This blog doesn’t discuss the other two, as it is out of this article’s scope. Actually, “New Session” and “New Session Wizard” can be easily complete through SSMS’s UI. If you are interesting, take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/sql/relational-databases/extended-events/quick-start-extended-events-in-sql-server?view=sql-server-ver15&quot;&gt;Quickstart: Extended events in SQL Server&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;USE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MASTER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/* Conditionally drop the session if it already exists */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_event_sessions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'EE_ExpensiveQueries'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_SlowQueryLog&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;  

&lt;span class=&quot;cm&quot;&gt;/* Create the session */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_ExpensiveQueries&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_statement_completed&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ACTION&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpu_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;  &lt;span class=&quot;cm&quot;&gt;/*total ms of CPU time*/&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TARGET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;package0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asynchronous_file_target&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;FILENAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries.xel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;METADATAFILE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries.xem'&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MAX_DISPATCH_LATENCY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;seconds&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/* Start Session */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_ExpensiveQueries&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;STATE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;START&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once you create and start the above session, you will see SQL queries that spent more than 500 milliseconds will be logged under the &lt;strong&gt;C:\SQLskills\&lt;/strong&gt; folder.&lt;/p&gt;

&lt;p&gt;Now, Our event captured expensive queries. The next step is to present captured slow records. You can do that by opening &lt;code class=&quot;highlighter-rouge&quot;&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/code&gt; On SSMS, opening log’s files with SSMS application, or query the logs in SQL.&lt;/p&gt;

&lt;p&gt;Opening &lt;code class=&quot;highlighter-rouge&quot;&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/code&gt; Menu On SSMS:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Extend Events Stored In UI Management&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Query logs in SQL:&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONVERT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fn_xe_file_target_read_file&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries*.xel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries*.xem'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Query As XML format&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Log Expensive Queries Into Files By Extended Events</title>
   <link href="http://localhost:4000/mssql/2021/09/04/log-expensive-queries-by-extended-events/"/>
   <updated>2021-09-04T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/09/04/log-expensive-queries-by-extended-events</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous blog, we discussed &lt;a href=&quot;../../../../mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot;&gt;how to print slower SQLs and print them at the console in real-time&lt;/a&gt;. But it is inconvenient because DBA may tiredly execute the same printing snippet many times over, which causes drama. Let’s dwell on this occasion, that you need to watch all the expensive queries run in the middle of the night, and you are not available to execute the printing snippet.(Even though &lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; caches query plans, but it is still possible to release cached plans when it is less valuable.)&lt;/p&gt;

&lt;p&gt;So, You need a mechanism, which can periodically scan slower SQLs, or instantly write down expensive SQLs into log files. Fortunately, SQL Server provides a functionality called Extended Events. You can measure SQL’s running time once it finished its query, and that is awesome. All that you need to do is to register an event, and SQL Server will do these dirty boring jobs for you automatically. For more Extended Events details, Take a look at Microsoft’s &lt;a href=&quot;https://docs.microsoft.com/en-us/sql/relational-databases/extended-events/extended-events?view=sql-server-ver15&quot;&gt;Extended events overview&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following guidance will illustrate you to set up an expensive SQL query’s logging configuration. As I mentioned early, SQL Server provided Extended Events, which are easy and convenient to use. There are several ways that you can create an Extended Event through a T-SQL snippet, “New Session” on SSMS, or “New Session Wizard” on SSMS.&lt;/p&gt;

&lt;p&gt;I will only represent the first method of creating an Extended Event by using a T-SQL snippet. This blog doesn’t discuss the other two, as it is out of this article’s scope. Actually, “New Session” and “New Session Wizard” can be easily complete through SSMS’s UI. If you are interesting, take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/sql/relational-databases/extended-events/quick-start-extended-events-in-sql-server?view=sql-server-ver15&quot;&gt;Quickstart: Extended events in SQL Server&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;USE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MASTER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/* Conditionally drop the session if it already exists */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_event_sessions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'EE_ExpensiveQueries'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_SlowQueryLog&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;  

&lt;span class=&quot;cm&quot;&gt;/* Create the session */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_ExpensiveQueries&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_statement_completed&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ACTION&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpu_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;  &lt;span class=&quot;cm&quot;&gt;/*total ms of CPU time*/&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TARGET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;package0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asynchronous_file_target&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;FILENAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries.xel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;METADATAFILE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries.xem'&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MAX_DISPATCH_LATENCY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;seconds&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/* Start Session */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EVENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SESSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EE_ExpensiveQueries&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SERVER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;STATE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;START&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once you create and start the above session, you will see SQL queries that spent more than 500 milliseconds will be logged under the &lt;strong&gt;C:\SQLskills\&lt;/strong&gt; folder.&lt;/p&gt;

&lt;p&gt;Now, Our event captured expensive queries. The next step is to present captured slow records. You can do that by opening &lt;code class=&quot;highlighter-rouge&quot;&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/code&gt; On SSMS, opening log’s files with SSMS application, or query the logs in SQL.&lt;/p&gt;

&lt;p&gt;Opening &lt;code class=&quot;highlighter-rouge&quot;&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/code&gt; Menu On SSMS:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Extend Events Stored In UI Management&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Management-&amp;gt;Extended Events-&amp;gt;Sessions&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Query logs in SQL:&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CONVERT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fn_xe_file_target_read_file&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries*.xel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\S&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;QLskills&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\E&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;E_ExpensiveQueries*.xem'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GO&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;output:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-09-04-log-expensive-queries-by-extended-events-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Query As XML format&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Find Slow SQL Queries With sys.dm_exec_query_stats View</title>
   <link href="http://localhost:4000/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/"/>
   <updated>2021-08-24T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;This article will lead you to monitor SQL’s running time most simply. In a busy system, hundreds and thousands of SQLs are running, so It is necessary to find and fine-turn slower running SQLs.&lt;/p&gt;

&lt;p&gt;The following SQL snippet prints the top 5 slower SQL statements.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TOP&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_elapsed_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execution_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_elapsed_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execution_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SUBSTRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_start_offset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CASE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_end_offset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; 
                        &lt;span class=&quot;k&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LEN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONVERT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nvarchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; 
                        &lt;span class=&quot;k&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_end_offset&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                              &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_start_offset&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;individual_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;DB_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dbid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;database_name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dm_exec_query_stats&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;CROSS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;APPLY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dm_exec_sql_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OUTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dbid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DB_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Your DB Name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;average_seconds&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Above snippet used the &lt;a href=&quot;1&quot;&gt;sys.dm_exec_query_stats&lt;/a&gt; view, which only returns cached query plans. So when a plan is removed from the cache, the corresponding rows are eliminated from this view.&lt;/p&gt;

&lt;p&gt;The above snippet will output ten fields, &lt;code class=&quot;highlighter-rouge&quot;&gt;individual_query&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;object_name&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;database_name&lt;/code&gt; represent the running SQL text, object name, and database name. &lt;code class=&quot;highlighter-rouge&quot;&gt;average_seconds&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;total_seconds&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;execution_count&lt;/code&gt; help you to track the CPU cost time. &lt;code class=&quot;highlighter-rouge&quot;&gt;total_rows&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;last_rows&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;min_rows&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;max_rows&lt;/code&gt; help you to track the number of rows returned by query.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;qt.dbid = DB_ID('Your DB Name')&lt;/code&gt; specifies the database you want to monitor. If you want to capture on all databases, you can remove this prediction condition.&lt;/p&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; shows available cached plans currently, instead of all plans.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; is easy to track the SQL’s running time, execution counts, and returned rows, etc…&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Find Slow SQL Queries With sys.dm_exec_query_stats View</title>
   <link href="http://localhost:4000/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/"/>
   <updated>2021-08-24T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;navi-link&quot;&gt;Monitor And Analysis&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;This article will lead you to monitor SQL’s running time most simply. In a busy system, hundreds and thousands of SQLs are running, so It is necessary to find and fine-turn slower running SQLs.&lt;/p&gt;

&lt;p&gt;The following SQL snippet prints the top 5 slower SQL statements.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TOP&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_elapsed_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execution_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_elapsed_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_seconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execution_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_rows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SUBSTRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_start_offset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CASE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_end_offset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; 
                        &lt;span class=&quot;k&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LEN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;CONVERT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nvarchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; 
                        &lt;span class=&quot;k&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_end_offset&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
                              &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statement_start_offset&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;individual_query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;DB_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dbid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;database_name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dm_exec_query_stats&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;CROSS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;APPLY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dm_exec_sql_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql_handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OUTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;qt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dbid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DB_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Your DB Name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;average_seconds&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Above snippet used the &lt;a href=&quot;1&quot;&gt;sys.dm_exec_query_stats&lt;/a&gt; view, which only returns cached query plans. So when a plan is removed from the cache, the corresponding rows are eliminated from this view.&lt;/p&gt;

&lt;p&gt;The above snippet will output ten fields, &lt;code class=&quot;highlighter-rouge&quot;&gt;individual_query&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;object_name&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;database_name&lt;/code&gt; represent the running SQL text, object name, and database name. &lt;code class=&quot;highlighter-rouge&quot;&gt;average_seconds&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;total_seconds&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;execution_count&lt;/code&gt; help you to track the CPU cost time. &lt;code class=&quot;highlighter-rouge&quot;&gt;total_rows&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;last_rows&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;min_rows&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;max_rows&lt;/code&gt; help you to track the number of rows returned by query.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;qt.dbid = DB_ID('Your DB Name')&lt;/code&gt; specifies the database you want to monitor. If you want to capture on all databases, you can remove this prediction condition.&lt;/p&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; shows available cached plans currently, instead of all plans.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sys.dm_exec_query_stats&lt;/code&gt; is easy to track the SQL’s running time, execution counts, and returned rows, etc…&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Monitor And Analysis</title>
   <link href="http://localhost:4000/mssql/2021/08/24/monitor-and-analysis/"/>
   <updated>2021-08-24T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/monitor-and-analysis</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Monitor And Analysis&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot; class=&quot;item-link&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot; class=&quot;item-link&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/09/04/log-expensive-queries-by-extended-events/&quot; class=&quot;item-link&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/09/04/log-expensive-queries-by-extended-events/&quot; class=&quot;item-link&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Monitor And Analysis</title>
   <link href="http://localhost:4000/mssql/2021/08/24/monitor-and-analysis/"/>
   <updated>2021-08-24T10:04:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/monitor-and-analysis</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/mssql/2021/08/24/mssql-tutorial/&quot; class=&quot;navi-link&quot;&gt;MSSQL&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Monitor And Analysis&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot; class=&quot;item-link&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/sql-statements-with-sys-dmexecquerystats-view/&quot; class=&quot;item-link&quot;&gt;Find Slow SQL Queries With sys.dm_exec_query_stats View&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/09/04/log-expensive-queries-by-extended-events/&quot; class=&quot;item-link&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/09/04/log-expensive-queries-by-extended-events/&quot; class=&quot;item-link&quot;&gt;Log Expensive Queries Into Files By Extended Events&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>MSSQL Tutorial</title>
   <link href="http://localhost:4000/mssql/2021/08/24/mssql-tutorial/"/>
   <updated>2021-08-24T09:03:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/mssql-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;MSSQL&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Welcome to this episode of discussing SQL Server performance issues. Through this series, you will learn how to monitor and fine-turn performance in a database. You may know that network traffic, disk I/O, and CPU usage are the key to peak performance. The upcoming blogs will introduce varieties of tools and snippets that will assistant you in troubleshooting the SQL server’s performance amicably.  What are you waiting for! Let’s kick it off now!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;item-link&quot;&gt;Monitor And Analysis&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;item-link&quot;&gt;Monitor And Analysis&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>MSSQL Tutorial</title>
   <link href="http://localhost:4000/mssql/2021/08/24/mssql-tutorial/"/>
   <updated>2021-08-24T09:03:01+08:00</updated>
   <id>http://localhost:4000/mssql/2021/08/24/mssql-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;MSSQL&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Welcome to this episode of discussing SQL Server performance issues. Through this series, you will learn how to monitor and fine-turn performance in a database. You may know that network traffic, disk I/O, and CPU usage are the key to peak performance. The upcoming blogs will introduce varieties of tools and snippets that will assistant you in troubleshooting the SQL server’s performance amicably.  What are you waiting for! Let’s kick it off now!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;item-link&quot;&gt;Monitor And Analysis&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/mssql/2021/08/24/monitor-and-analysis/&quot; class=&quot;item-link&quot;&gt;Monitor And Analysis&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Parallel Processing In VBA</title>
   <link href="http://localhost:4000/2021/07/25/concurrency-working-on-vba/"/>
   <updated>2021-07-25T10:04:01+08:00</updated>
   <id>http://localhost:4000/2021/07/25/concurrency-working-on-vba</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;!-- &lt;div class='navi-link-container'&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class='navi-link' href=&quot;&quot;&gt;Parallel Processing In VBA&lt;/a&gt;
&lt;/div&gt; --&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Have you encountered the problem that you want to launch another thread to tackle other works when the current window is suspended(Such as, perform operations on the “Save As” window)? To be blunt, VBA doesn’t provide the multi-threads implementation.&lt;/p&gt;

&lt;p&gt;VBA is a single-threaded translated scripting language. You cannot run multiple instances of VBA code in parallel.&lt;/p&gt;

&lt;p&gt;Nonetheless, VBA doesn’t provide any available packages for multi-thread, But you can use the following alternative ways to achieve “multi-thread”.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Using a C#.NET COM/dll&lt;/li&gt;
  &lt;li&gt;VBscript worker threads&lt;/li&gt;
  &lt;li&gt;VBA worker threads(via VBscript)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The following table illustrates their comparison, quoted from &lt;a href=&quot;https://analystcave.com/excel-multithreading-vba-vs-vbscript-vs-c-net/&quot;&gt;Analyst Cave&lt;/a&gt;’s blog &lt;a href=&quot;https://analystcave.com/excel-multithreading-vba-vs-vbscript-vs-c-net/&quot;&gt;Multithreading VBA – VBA vs. VBscript vs. C#.NET&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-25-concurrency-working-on-vba-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;vba parallel processing’s method comparison&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The above diagram compared their differences. I wouldn’t discuss VB Script and DLL in this article. The following snippet will illustrate the third solution, which is complicate and robutness.&lt;/p&gt;

&lt;p&gt;Create an excel file and save it as an &lt;code class=&quot;highlighter-rouge&quot;&gt;xlsm&lt;/code&gt; file, and open the VBA code editor.
&lt;strong&gt;MultiThreadHelper.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MsgBox&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I come from another process&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above creates a simple snippet which gonna alert a message. You can implement your own logic.&lt;/p&gt;

&lt;p&gt;Then Create another excel, which will going to invoke &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper&lt;/code&gt;’s &lt;code class=&quot;highlighter-rouge&quot;&gt;Entry&lt;/code&gt; method asynchronously. In order to run &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper&lt;/code&gt; asynchronously, you should create a new excel application, instead of use the calling context. Otherwise, the invoking will be synchrounously.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Invoker.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InvokeAsynchronously&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;'invoke another excel file for paralle work&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;objExcel&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CreateObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excel.Application&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ScreenUpdating&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' False, if you don't want make this excel visible&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Visible&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableEvents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm'!Entry&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;'The current thread doesn't block at this method&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;'This method will be behavior asynchronously.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you noticed in the above snippet, &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeAsynchronously&lt;/code&gt; creates another new &lt;code class=&quot;highlighter-rouge&quot;&gt;Excel.Application&lt;/code&gt; object to run our &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt; file parallelly. The above snippet will launch another process that will gonna handle the &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt;’s running.&lt;/p&gt;

&lt;p&gt;If you don’t want the &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt; being visible during execution, then you can hide it by setting  &lt;code class=&quot;highlighter-rouge&quot;&gt;objExcel.application.Visible&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;False&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The above snippet simply illustrated the idea of implementing a parallel in VBA. Next, I am gonna show you a more complicated scenario. In a VBA project, you are using UI Automation to operate a software, then you need to open a “Save As” window, and input the name, then trigger The “Save” button.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-25-concurrency-working-on-vba-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;save as button&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;With single thread VBA application, it’s almost impossible to operate the “Save As” Windows. The trick is that your VBA process gonna be suspended, once you open the “Save As” window. And your process resumes, when the “Save As” window closed. In order to input a name in the “Save As” window, you need to launch an assistive VBA process before current process’s suspendion, which is responsible for handling the “Save As” window.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MultiThreadHelper.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Explicit&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Declare&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PtrSafe&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;FindWindow&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Lib&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user32&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Alias&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FindWindowA&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ByVal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpClassName&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ByVal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpWindowName&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Long&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' if maximum times expired, then exist&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;Exit&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;NewTime&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;00:00:03&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;Debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Check is if &quot;Save As&quot; opened&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FindWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vbNullString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Save As&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Save As window opened, then do operation on VBA&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Input file name &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' click &quot;Save&quot; button&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Else&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Wait for 3 seconds, then run Entry method again !!!&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'Entry &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; , &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; '&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Invoker.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InvokerTest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CloseHelperWindowIfOpend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;LaunchAutoHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Open &quot;Save As&quot; window, then process suspend&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' OpenSaveAsWindow()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' the process resume, once &quot;Save As&quot; window closed.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' do other operations&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CloseHelperWindowIfOpened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' Check is if MultiThreadHelper opened&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wbOpen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;MultiThreadHelper.xlsm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;Exit&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Close opened window&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wb&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Workbook&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Workbooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Save&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Close&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LaunchAutoHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;'invoke another excel file for parallel work&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;objExcel&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CreateObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excel.Application&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ScreenUpdating&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' makes window hidden during execution&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Visible&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableEvents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm'!Entry&quot;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' objExcel.application.Run helpFile, filename&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' waiting for 60*3 = 180s&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example demonstrated a common usage, that you propably gonna meet while you are handling with a “Save As” or “Open” window. As I mentioned early, there are three available methods that you can make capital with, when you are tackling the parallelization work in VBA. But I prefer the VBA Excel method, the following lists several adavantages compared to others.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Stable performance&lt;/li&gt;
  &lt;li&gt;Convenient for managing source code&lt;/li&gt;
  &lt;li&gt;Convenient for debuging&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Parallel Processing In VBA</title>
   <link href="http://localhost:4000/2021/07/25/concurrency-working-on-vba/"/>
   <updated>2021-07-25T10:04:01+08:00</updated>
   <id>http://localhost:4000/2021/07/25/concurrency-working-on-vba</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;!-- &lt;div class='navi-link-container'&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class='navi-link' href=&quot;&quot;&gt;Parallel Processing In VBA&lt;/a&gt;
&lt;/div&gt; --&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Have you encountered the problem that you want to launch another thread to tackle other works when the current window is suspended(Such as, perform operations on the “Save As” window)? To be blunt, VBA doesn’t provide the multi-threads implementation.&lt;/p&gt;

&lt;p&gt;VBA is a single-threaded translated scripting language. You cannot run multiple instances of VBA code in parallel.&lt;/p&gt;

&lt;p&gt;Nonetheless, VBA doesn’t provide any available packages for multi-thread, But you can use the following alternative ways to achieve “multi-thread”.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Using a C#.NET COM/dll&lt;/li&gt;
  &lt;li&gt;VBscript worker threads&lt;/li&gt;
  &lt;li&gt;VBA worker threads(via VBscript)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The following table illustrates their comparison, quoted from &lt;a href=&quot;https://analystcave.com/excel-multithreading-vba-vs-vbscript-vs-c-net/&quot;&gt;Analyst Cave&lt;/a&gt;’s blog &lt;a href=&quot;https://analystcave.com/excel-multithreading-vba-vs-vbscript-vs-c-net/&quot;&gt;Multithreading VBA – VBA vs. VBscript vs. C#.NET&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-25-concurrency-working-on-vba-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;vba parallel processing’s method comparison&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The above diagram compared their differences. I wouldn’t discuss VB Script and DLL in this article. The following snippet will illustrate the third solution, which is complicate and robutness.&lt;/p&gt;

&lt;p&gt;Create an excel file and save it as an &lt;code class=&quot;highlighter-rouge&quot;&gt;xlsm&lt;/code&gt; file, and open the VBA code editor.
&lt;strong&gt;MultiThreadHelper.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;MsgBox&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I come from another process&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above creates a simple snippet which gonna alert a message. You can implement your own logic.&lt;/p&gt;

&lt;p&gt;Then Create another excel, which will going to invoke &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper&lt;/code&gt;’s &lt;code class=&quot;highlighter-rouge&quot;&gt;Entry&lt;/code&gt; method asynchronously. In order to run &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper&lt;/code&gt; asynchronously, you should create a new excel application, instead of use the calling context. Otherwise, the invoking will be synchrounously.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Invoker.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InvokeAsynchronously&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;'invoke another excel file for paralle work&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;objExcel&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CreateObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excel.Application&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ScreenUpdating&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' False, if you don't want make this excel visible&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Visible&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableEvents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm'!Entry&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;'The current thread doesn't block at this method&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;'This method will be behavior asynchronously.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you noticed in the above snippet, &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeAsynchronously&lt;/code&gt; creates another new &lt;code class=&quot;highlighter-rouge&quot;&gt;Excel.Application&lt;/code&gt; object to run our &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt; file parallelly. The above snippet will launch another process that will gonna handle the &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt;’s running.&lt;/p&gt;

&lt;p&gt;If you don’t want the &lt;code class=&quot;highlighter-rouge&quot;&gt;MultiThreadHelper.xlsm&lt;/code&gt; being visible during execution, then you can hide it by setting  &lt;code class=&quot;highlighter-rouge&quot;&gt;objExcel.application.Visible&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;False&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The above snippet simply illustrated the idea of implementing a parallel in VBA. Next, I am gonna show you a more complicated scenario. In a VBA project, you are using UI Automation to operate a software, then you need to open a “Save As” window, and input the name, then trigger The “Save” button.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-25-concurrency-working-on-vba-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;save as button&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;With single thread VBA application, it’s almost impossible to operate the “Save As” Windows. The trick is that your VBA process gonna be suspended, once you open the “Save As” window. And your process resumes, when the “Save As” window closed. In order to input a name in the “Save As” window, you need to launch an assistive VBA process before current process’s suspendion, which is responsible for handling the “Save As” window.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MultiThreadHelper.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Explicit&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Declare&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PtrSafe&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;FindWindow&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Lib&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user32&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Alias&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FindWindowA&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ByVal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpClassName&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ByVal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpWindowName&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Long&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' if maximum times expired, then exist&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;Exit&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;NewTime&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Now&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;00:00:03&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;Debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Check is if &quot;Save As&quot; opened&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FindWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vbNullString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Save As&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Save As window opened, then do operation on VBA&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Input file name &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' click &quot;Save&quot; button&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Else&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;' Wait for 3 seconds, then run Entry method again !!!&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NewTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'Entry &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; , &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; '&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Invoker.xlsm&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-vb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InvokerTest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CloseHelperWindowIfOpend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;LaunchAutoHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Open &quot;Save As&quot; window, then process suspend&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' OpenSaveAsWindow()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' the process resume, once &quot;Save As&quot; window closed.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' do other operations&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CloseHelperWindowIfOpened&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' Check is if MultiThreadHelper opened&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wbOpen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;MultiThreadHelper.xlsm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Then&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;Exit&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;If&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' Close opened window&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wb&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Workbook&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Workbooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Save&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Close&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LaunchAutoHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;'invoke another excel file for parallel work&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Dim&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;objExcel&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;Set&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CreateObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excel.Application&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ScreenUpdating&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' makes window hidden during execution&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Visible&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;False&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableEvents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;True&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;'&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ThisWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\MultiThreadHelper.xlsm'!Entry&quot;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;' objExcel.application.Run helpFile, filename&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;' waiting for 60*3 = 180s&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objExcel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;helpFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;End&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Sub&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example demonstrated a common usage, that you propably gonna meet while you are handling with a “Save As” or “Open” window. As I mentioned early, there are three available methods that you can make capital with, when you are tackling the parallelization work in VBA. But I prefer the VBA Excel method, the following lists several adavantages compared to others.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Stable performance&lt;/li&gt;
  &lt;li&gt;Convenient for managing source code&lt;/li&gt;
  &lt;li&gt;Convenient for debuging&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>UI Automation On Excel Macro</title>
   <link href="http://localhost:4000/2021/07/19/ui-automation-on-excel-macro/"/>
   <updated>2021-07-19T10:04:01+08:00</updated>
   <id>http://localhost:4000/2021/07/19/ui-automation-on-excel-macro</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;!-- &lt;div class='navi-link-container'&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class='navi-link' href=&quot;&quot;&gt;UI Automation On Excel Macro&lt;/a&gt;
&lt;/div&gt; --&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this chapter, I am gonna illustrate how to use the Microsoft UI Automation component. Microsoft UI Automation is a new accessibility framework for Microsoft Windows, available on all operating systems that support Window Presentation Foundation(WPF).&lt;/p&gt;

&lt;h1 id=&quot;basic-concepts&quot;&gt;Basic Concepts&lt;/h1&gt;
&lt;p&gt;It’s easy to build up robustness and assistive programs with Microsoft UI Automation. Several concepts need to be familiar before this article. Microsoft UI Automation contains four main components, as shown in the following table.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;DLL&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Provider API&lt;/td&gt;
      &lt;td&gt;UIAutomationProvider.dll and UIAutomationTypes.dll&lt;/td&gt;
      &lt;td&gt;A set of interface definitions that are implemented by UI Automation providers, objects that provide information about UI elements and respond to programmatic input.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Client API&lt;/td&gt;
      &lt;td&gt;UIAutomationClient.dll and UIAutomationTypes.dll&lt;/td&gt;
      &lt;td&gt;A set of types for managed code that enables UI Automation client applications to obtain information about the UI and to send input to controls.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Core&lt;/td&gt;
      &lt;td&gt;UiAutomationCore.dll&lt;/td&gt;
      &lt;td&gt;The underlying code (sometimes called the UI Automation core) that handles communication between providers and clients.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ClientsideProviders&lt;/td&gt;
      &lt;td&gt;UIAutomationClientsideProviders.dll&lt;/td&gt;
      &lt;td&gt;A set of UI Automation providers for standard legacy controls. (WPF controls have native support for UI Automation.) This support is automatically available to client applications.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The following dialogue represented the relationship between &lt;strong&gt;Automation Provider&lt;/strong&gt;, &lt;strong&gt;Automation Client&lt;/strong&gt;, and &lt;strong&gt;Automation Core&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-18-ui-automation-on-vba-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Relationship Between Provider, Client And Core&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Basically, for developers, there are two perspectives: to create support for custom controls (using the &lt;strong&gt;Provider API&lt;/strong&gt;), and creating applications that use the UI Automation core to communicate with UI elements (using the &lt;strong&gt;Client API&lt;/strong&gt;). For better understanding about Microsoft UI automation element tree structure, need to make an acquaintance with &lt;strong&gt;Control Patterns&lt;/strong&gt; and &lt;strong&gt;Control Type&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.windows.automation.automationelement?view=net-5.0&quot;&gt;AutomationElement&lt;/a&gt; objects expose common properties of the UI elements they represent. One of these properties is the control type, which defines its basic appearance and functionality as a single recognizable entity: for example, a button or check box.&lt;/p&gt;

&lt;p&gt;In addition, elements expose control patterns that provide properties specific to their control types. Control patterns also expose methods that enable clients to get further information about the element and to provide input.&lt;/p&gt;

&lt;p&gt;UI Automation Client also provides a mechanism that enables a client to gather information through &lt;strong&gt;events&lt;/strong&gt;. You can register specific event notifications, and the element’s properties and control patterns will pass into their handlers when the event raise.&lt;/p&gt;

&lt;p&gt;Next, I am going to lead you to create a simple macro excel application with the Microsoft UI Automation Client component step by step. I have wrote a snippet of Microsoft UI Automation’s usage at &lt;a href=&quot;https://gist.github.com/voltwu/fe90b3e7dd001c11228597f0ac29ab19&quot;&gt;UI Automation Snippet Example&lt;/a&gt;, which may be assistive for you.&lt;/p&gt;

&lt;h1 id=&quot;adding-reference&quot;&gt;Adding Reference&lt;/h1&gt;

&lt;p&gt;Create an Excel file and then open its VBA editor by striking &lt;code class=&quot;highlighter-rouge&quot;&gt;[ALT]&lt;/code&gt;+&lt;code class=&quot;highlighter-rouge&quot;&gt;[F11]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;At the menu &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;References...&lt;/code&gt;, scroll down to find and refer &lt;code class=&quot;highlighter-rouge&quot;&gt;UIAutomationClient&lt;/code&gt; component.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-19-ui-automation-on-excel-macro.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding UI AutomationClient reference&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;creating-cuiautomation-object&quot;&gt;Creating CUIAutomation Object&lt;/h1&gt;
&lt;pre&gt;
 &lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; &lt;vb-keywords&gt;New&lt;/vb-keywords&gt; CUIAutomation
&lt;/pre&gt;

&lt;h1 id=&quot;searching-elements&quot;&gt;Searching Elements&lt;/h1&gt;
&lt;p&gt;UI Automation Client provides several available ways to find elements. You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;inspecter.exe&lt;/code&gt; as an assistive software, which can inspect details of UI elements(such as: &lt;strong&gt;classname&lt;/strong&gt;, &lt;strong&gt;automation id&lt;/strong&gt;, and &lt;strong&gt;name&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Scope&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Condition&lt;/code&gt; are required for searching elements. &lt;code class=&quot;highlighter-rouge&quot;&gt;Scope&lt;/code&gt; specifies the scope of variant operations in UI Automation tree. &lt;code class=&quot;highlighter-rouge&quot;&gt;Condition&lt;/code&gt; used in filtering when searching for elements in the UI Automation tree. Take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/api/uiautomationclient/ne-uiautomationclient-treescope&quot;&gt;TreeScope enumeration&lt;/a&gt; and &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/api/uiautomationclient/nn-uiautomationclient-iuiautomationcondition&quot;&gt;IUIAutomationCondition interface&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Find first child or descendant element&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Creating CUIAutomation element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As New&lt;/vb-keywords&gt; CUIAutomation

&lt;vb-commets&gt;' find first child element with classname&lt;/vb-commets&gt;
&lt;vb-commets&gt;' oAutomation.GetRootElement is the top-level element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement1 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement1 = oAutomation.GetRootElement.FindFirst(TreeScope_Children, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_ClassNamePropertyId, &quot;class name&quot;))

&lt;vb-commets&gt;' find first descendant element with automation id&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement2 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement2 = MyElement1.FindFirst(TreeScope_Descendants, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_AutomationIdPropertyId, &quot;automation id&quot;))

&lt;vb-commets&gt;' find first parent element with name&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement3 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement3 = MyElement2.FindFirst(TreeScope_Parent, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_NamePropertyId, &quot;name&quot;))
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Find All elements&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Creating CUIAutomation element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; &lt;vb-keywords&gt;New&lt;/vb-keywords&gt; CUIAutomation

' find all elements with &quot;button&quot; as their's classname
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement4 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElementArray
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement4 = MyElement3.FindAll(TreeScope_Children, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_ClassNamePropertyId, &quot;button&quot;))
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Get Element’s unique identifier&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Get a unique identifier of an element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; uniqueIdentifier &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; Variant
 uniqueIdentifier = MyElement3.GetRuntimeId()
&lt;/pre&gt;

&lt;p&gt;The identifier is only guaranteed to be unique to the UI of the desktop on which it was generated. Identifiers can be reused over time.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;  
Identifier may change in the future !!!
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Focus Element&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' make MyElement3 be focused on the screen window&lt;/vb-commets&gt;
MyElement3.SetFocus
&lt;/pre&gt;

&lt;h1 id=&quot;retrieving-control-pattern&quot;&gt;Retrieving Control Pattern&lt;/h1&gt;

&lt;p&gt;Assumpting that you had known the difference between Control Type and Control Pattern, If not, take a look at the previous article. Control Pattern provides the  client a way to manipulate ui elements(such as: click, input, or dropdown, etc…)&lt;/p&gt;

&lt;p&gt;Each UI Elements have at least one pattern, Take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/winauto/uiauto-controlpattern-ids&quot;&gt;Control Pattern Identifiers&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Input&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' input text&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; oPattern = MyElement3.GetCurrentPattern(UIAutomationClient.UIA_LegacyIAccessiblePatternId)
oPattern.SetValue (&quot;input text&quot;)
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Click&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;vb-commets&gt;' click a button&lt;/vb-commets&gt;
&lt;vb-commets&gt;' btnElement is a button element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; oPattern = btnElement.GetCurrentPattern(UIAutomationClient.UIA_InvokePatternId)
ePattern.Invoke
&lt;/pre&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Above straightly illustrated the steps of creating an excel macro application with Microsoft UI Component.  The following reviews might help you to understand better.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Adding &lt;code class=&quot;highlighter-rouge&quot;&gt;UIAutomationClient&lt;/code&gt; in reference window&lt;/li&gt;
  &lt;li&gt;Searching elements through &lt;code class=&quot;highlighter-rouge&quot;&gt;FindFirst&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;FindAll&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Performing actions through &lt;code class=&quot;highlighter-rouge&quot;&gt;Control Pattern&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>UI Automation On Excel Macro</title>
   <link href="http://localhost:4000/2021/07/19/ui-automation-on-excel-macro/"/>
   <updated>2021-07-19T10:04:01+08:00</updated>
   <id>http://localhost:4000/2021/07/19/ui-automation-on-excel-macro</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;!-- &lt;div class='navi-link-container'&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class='navi-link' href=&quot;&quot;&gt;UI Automation On Excel Macro&lt;/a&gt;
&lt;/div&gt; --&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this chapter, I am gonna illustrate how to use the Microsoft UI Automation component. Microsoft UI Automation is a new accessibility framework for Microsoft Windows, available on all operating systems that support Window Presentation Foundation(WPF).&lt;/p&gt;

&lt;h1 id=&quot;basic-concepts&quot;&gt;Basic Concepts&lt;/h1&gt;
&lt;p&gt;It’s easy to build up robustness and assistive programs with Microsoft UI Automation. Several concepts need to be familiar before this article. Microsoft UI Automation contains four main components, as shown in the following table.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;DLL&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Provider API&lt;/td&gt;
      &lt;td&gt;UIAutomationProvider.dll and UIAutomationTypes.dll&lt;/td&gt;
      &lt;td&gt;A set of interface definitions that are implemented by UI Automation providers, objects that provide information about UI elements and respond to programmatic input.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Client API&lt;/td&gt;
      &lt;td&gt;UIAutomationClient.dll and UIAutomationTypes.dll&lt;/td&gt;
      &lt;td&gt;A set of types for managed code that enables UI Automation client applications to obtain information about the UI and to send input to controls.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Core&lt;/td&gt;
      &lt;td&gt;UiAutomationCore.dll&lt;/td&gt;
      &lt;td&gt;The underlying code (sometimes called the UI Automation core) that handles communication between providers and clients.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ClientsideProviders&lt;/td&gt;
      &lt;td&gt;UIAutomationClientsideProviders.dll&lt;/td&gt;
      &lt;td&gt;A set of UI Automation providers for standard legacy controls. (WPF controls have native support for UI Automation.) This support is automatically available to client applications.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The following dialogue represented the relationship between &lt;strong&gt;Automation Provider&lt;/strong&gt;, &lt;strong&gt;Automation Client&lt;/strong&gt;, and &lt;strong&gt;Automation Core&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-18-ui-automation-on-vba-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Relationship Between Provider, Client And Core&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Basically, for developers, there are two perspectives: to create support for custom controls (using the &lt;strong&gt;Provider API&lt;/strong&gt;), and creating applications that use the UI Automation core to communicate with UI elements (using the &lt;strong&gt;Client API&lt;/strong&gt;). For better understanding about Microsoft UI automation element tree structure, need to make an acquaintance with &lt;strong&gt;Control Patterns&lt;/strong&gt; and &lt;strong&gt;Control Type&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.windows.automation.automationelement?view=net-5.0&quot;&gt;AutomationElement&lt;/a&gt; objects expose common properties of the UI elements they represent. One of these properties is the control type, which defines its basic appearance and functionality as a single recognizable entity: for example, a button or check box.&lt;/p&gt;

&lt;p&gt;In addition, elements expose control patterns that provide properties specific to their control types. Control patterns also expose methods that enable clients to get further information about the element and to provide input.&lt;/p&gt;

&lt;p&gt;UI Automation Client also provides a mechanism that enables a client to gather information through &lt;strong&gt;events&lt;/strong&gt;. You can register specific event notifications, and the element’s properties and control patterns will pass into their handlers when the event raise.&lt;/p&gt;

&lt;p&gt;Next, I am going to lead you to create a simple macro excel application with the Microsoft UI Automation Client component step by step. I have wrote a snippet of Microsoft UI Automation’s usage at &lt;a href=&quot;https://gist.github.com/voltwu/fe90b3e7dd001c11228597f0ac29ab19&quot;&gt;UI Automation Snippet Example&lt;/a&gt;, which may be assistive for you.&lt;/p&gt;

&lt;h1 id=&quot;adding-reference&quot;&gt;Adding Reference&lt;/h1&gt;

&lt;p&gt;Create an Excel file and then open its VBA editor by striking &lt;code class=&quot;highlighter-rouge&quot;&gt;[ALT]&lt;/code&gt;+&lt;code class=&quot;highlighter-rouge&quot;&gt;[F11]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;At the menu &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;References...&lt;/code&gt;, scroll down to find and refer &lt;code class=&quot;highlighter-rouge&quot;&gt;UIAutomationClient&lt;/code&gt; component.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-07-19-ui-automation-on-excel-macro.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding UI AutomationClient reference&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;creating-cuiautomation-object&quot;&gt;Creating CUIAutomation Object&lt;/h1&gt;
&lt;pre&gt;
 &lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; &lt;vb-keywords&gt;New&lt;/vb-keywords&gt; CUIAutomation
&lt;/pre&gt;

&lt;h1 id=&quot;searching-elements&quot;&gt;Searching Elements&lt;/h1&gt;
&lt;p&gt;UI Automation Client provides several available ways to find elements. You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;inspecter.exe&lt;/code&gt; as an assistive software, which can inspect details of UI elements(such as: &lt;strong&gt;classname&lt;/strong&gt;, &lt;strong&gt;automation id&lt;/strong&gt;, and &lt;strong&gt;name&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Scope&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Condition&lt;/code&gt; are required for searching elements. &lt;code class=&quot;highlighter-rouge&quot;&gt;Scope&lt;/code&gt; specifies the scope of variant operations in UI Automation tree. &lt;code class=&quot;highlighter-rouge&quot;&gt;Condition&lt;/code&gt; used in filtering when searching for elements in the UI Automation tree. Take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/api/uiautomationclient/ne-uiautomationclient-treescope&quot;&gt;TreeScope enumeration&lt;/a&gt; and &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/api/uiautomationclient/nn-uiautomationclient-iuiautomationcondition&quot;&gt;IUIAutomationCondition interface&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Find first child or descendant element&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Creating CUIAutomation element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As New&lt;/vb-keywords&gt; CUIAutomation

&lt;vb-commets&gt;' find first child element with classname&lt;/vb-commets&gt;
&lt;vb-commets&gt;' oAutomation.GetRootElement is the top-level element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement1 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement1 = oAutomation.GetRootElement.FindFirst(TreeScope_Children, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_ClassNamePropertyId, &quot;class name&quot;))

&lt;vb-commets&gt;' find first descendant element with automation id&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement2 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement2 = MyElement1.FindFirst(TreeScope_Descendants, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_AutomationIdPropertyId, &quot;automation id&quot;))

&lt;vb-commets&gt;' find first parent element with name&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement3 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElement
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement3 = MyElement2.FindFirst(TreeScope_Parent, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_NamePropertyId, &quot;name&quot;))
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Find All elements&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Creating CUIAutomation element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; oAutomation &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; &lt;vb-keywords&gt;New&lt;/vb-keywords&gt; CUIAutomation

' find all elements with &quot;button&quot; as their's classname
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; MyElement4 &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; UIAutomationClient.IUIAutomationElementArray
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; MyElement4 = MyElement3.FindAll(TreeScope_Children, UiAutomation.CreatePropertyCondition(UIAutomationClient.UIA_ClassNamePropertyId, &quot;button&quot;))
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Get Element’s unique identifier&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' Get a unique identifier of an element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Dim&lt;/vb-keywords&gt; uniqueIdentifier &lt;vb-keywords&gt;As&lt;/vb-keywords&gt; Variant
 uniqueIdentifier = MyElement3.GetRuntimeId()
&lt;/pre&gt;

&lt;p&gt;The identifier is only guaranteed to be unique to the UI of the desktop on which it was generated. Identifiers can be reused over time.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;  
Identifier may change in the future !!!
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Focus Element&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' make MyElement3 be focused on the screen window&lt;/vb-commets&gt;
MyElement3.SetFocus
&lt;/pre&gt;

&lt;h1 id=&quot;retrieving-control-pattern&quot;&gt;Retrieving Control Pattern&lt;/h1&gt;

&lt;p&gt;Assumpting that you had known the difference between Control Type and Control Pattern, If not, take a look at the previous article. Control Pattern provides the  client a way to manipulate ui elements(such as: click, input, or dropdown, etc…)&lt;/p&gt;

&lt;p&gt;Each UI Elements have at least one pattern, Take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/winauto/uiauto-controlpattern-ids&quot;&gt;Control Pattern Identifiers&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Input&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;vb-commets&gt;' input text&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; oPattern = MyElement3.GetCurrentPattern(UIAutomationClient.UIA_LegacyIAccessiblePatternId)
oPattern.SetValue (&quot;input text&quot;)
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Click&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;vb-commets&gt;' click a button&lt;/vb-commets&gt;
&lt;vb-commets&gt;' btnElement is a button element&lt;/vb-commets&gt;
&lt;vb-keywords&gt;Set&lt;/vb-keywords&gt; oPattern = btnElement.GetCurrentPattern(UIAutomationClient.UIA_InvokePatternId)
ePattern.Invoke
&lt;/pre&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Above straightly illustrated the steps of creating an excel macro application with Microsoft UI Component.  The following reviews might help you to understand better.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Adding &lt;code class=&quot;highlighter-rouge&quot;&gt;UIAutomationClient&lt;/code&gt; in reference window&lt;/li&gt;
  &lt;li&gt;Searching elements through &lt;code class=&quot;highlighter-rouge&quot;&gt;FindFirst&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;FindAll&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Performing actions through &lt;code class=&quot;highlighter-rouge&quot;&gt;Control Pattern&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Caching Static Resources</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/02/26/cache-static-resources/"/>
   <updated>2021-02-26T10:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/02/26/cache-static-resources</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Caching Static Resources&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
</content>
 </entry>
 
 <entry>
   <title>Caching Static Resources</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/02/26/cache-static-resources/"/>
   <updated>2021-02-26T10:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/02/26/cache-static-resources</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Caching Static Resources&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
</content>
 </entry>
 
 <entry>
   <title>Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)</title>
   <link href="http://localhost:4000/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/"/>
   <updated>2021-01-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;navi-link&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;navi-link&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, I will guide you to set up a simple nexus3 instance.&lt;/p&gt;

&lt;h1 id=&quot;running-nexus3-on-docker&quot;&gt;Running nexus3 on docker&lt;/h1&gt;
&lt;p&gt;I am using the &lt;strong&gt;sonatype/nexus3&lt;/strong&gt; image for demonstration. There are multiple ways that you can set up a nexus3 instance. You can either unpack the archive in a directory to which you have full access, or you can install it with a Docker image. Take a look at &lt;a href=&quot;https://help.sonatype.com/repomanager3/installation&quot;&gt;sonatype Nexus Repository Manager 3 Installation&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;The following &lt;strong&gt;docker-compose.xml&lt;/strong&gt; utilize the &lt;bold&gt;sonatype/nexus3&lt;/bold&gt; image to achieve the installation.&lt;/p&gt;
&lt;pre&gt;
version: &quot;3.3&quot;
services:
  nexus3:
    restart: always
    image: &lt;bold&gt;sonatype/nexus3&lt;/bold&gt;
    ports:
      - &quot;8081:8081&quot;
    volumes:
      - nexus-data:/nexus-data
volumes:
    nexus-data:
        driver: local
        driver_opts:
            type: 'none'
            o: 'bind'
            device: '${PWD}/nexus-data'
&lt;/pre&gt;

&lt;p&gt;You should create a folder &lt;code class=&quot;highlighter-rouge&quot;&gt;nexus-data&lt;/code&gt; in your current directory at first, then use command &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up -d&lt;/code&gt; to running up. The &lt;code class=&quot;highlighter-rouge&quot;&gt;nexus-data&lt;/code&gt; folder will be used to store your persistent data.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir nexus-data
$ docker-compose up -d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;creating-a-repository&quot;&gt;Creating A Repository&lt;/h1&gt;

&lt;p&gt;create a docker repository&lt;/p&gt;

&lt;p&gt;make your docker repository private&lt;/p&gt;

&lt;h1 id=&quot;pushing-and-pulling-images&quot;&gt;Pushing and Pulling Images&lt;/h1&gt;

</content>
 </entry>
 
 <entry>
   <title>Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)</title>
   <link href="http://localhost:4000/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/"/>
   <updated>2021-01-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;navi-link&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;navi-link&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, I will guide you to set up a simple nexus3 instance.&lt;/p&gt;

&lt;h1 id=&quot;running-nexus3-on-docker&quot;&gt;Running nexus3 on docker&lt;/h1&gt;
&lt;p&gt;I am using the &lt;strong&gt;sonatype/nexus3&lt;/strong&gt; image for demonstration. There are multiple ways that you can set up a nexus3 instance. You can either unpack the archive in a directory to which you have full access, or you can install it with a Docker image. Take a look at &lt;a href=&quot;https://help.sonatype.com/repomanager3/installation&quot;&gt;sonatype Nexus Repository Manager 3 Installation&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;The following &lt;strong&gt;docker-compose.xml&lt;/strong&gt; utilize the &lt;bold&gt;sonatype/nexus3&lt;/bold&gt; image to achieve the installation.&lt;/p&gt;
&lt;pre&gt;
version: &quot;3.3&quot;
services:
  nexus3:
    restart: always
    image: &lt;bold&gt;sonatype/nexus3&lt;/bold&gt;
    ports:
      - &quot;8081:8081&quot;
    volumes:
      - nexus-data:/nexus-data
volumes:
    nexus-data:
        driver: local
        driver_opts:
            type: 'none'
            o: 'bind'
            device: '${PWD}/nexus-data'
&lt;/pre&gt;

&lt;p&gt;You should create a folder &lt;code class=&quot;highlighter-rouge&quot;&gt;nexus-data&lt;/code&gt; in your current directory at first, then use command &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up -d&lt;/code&gt; to running up. The &lt;code class=&quot;highlighter-rouge&quot;&gt;nexus-data&lt;/code&gt; folder will be used to store your persistent data.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir nexus-data
$ docker-compose up -d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;creating-a-repository&quot;&gt;Creating A Repository&lt;/h1&gt;

&lt;p&gt;create a docker repository&lt;/p&gt;

&lt;p&gt;make your docker repository private&lt;/p&gt;

&lt;h1 id=&quot;pushing-and-pulling-images&quot;&gt;Pushing and Pulling Images&lt;/h1&gt;

</content>
 </entry>
 
 <entry>
   <title>Using Nexus Repository Manager(NXRM) as your docker repository</title>
   <link href="http://localhost:4000/docker/2021/01/21/using-nexus-as-your-docker-repository/"/>
   <updated>2021-01-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2021/01/21/using-nexus-as-your-docker-repository</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Welcome to the Nexus Repository Manager for Docker Repository tutorial. In this article, I will guide you to set up a &lt;em&gt;Nexus Repository Manager&lt;/em&gt; as your docker registry from scratch, and we will cover installation, SSL, and User management in the next articles. At present, the Nexus Repository Manager has two versions &lt;a href=&quot;https://help.sonatype.com/repomanager2&quot;&gt;Repository Manager 2&lt;/a&gt; and &lt;a href=&quot;https://help.sonatype.com/repomanager3&quot;&gt;Repository Manager 3&lt;/a&gt;. The next articles will be demonstrating with &lt;strong&gt;&lt;em&gt;Nexus Repository Manager 3&lt;/em&gt;&lt;/strong&gt;, which is also well known as &lt;strong&gt;nexus3&lt;/strong&gt; or &lt;strong&gt;Nexus Repository Manager 3(NXRM3)&lt;/strong&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;h1&gt;Repository Manager vs Docker Registry&lt;/h1&gt;
A &lt;b&gt;Docker Registry&lt;/b&gt; is a repository for managing Docker images, just as we learned in the previous article &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot;&gt;docker private registry&lt;/a&gt;. However, A &lt;b&gt;Repository Manager&lt;/b&gt; is not only for managing docker images, it will usually be able to manage other repository technologies such as Maven, NuGet, or Git etc.
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/&quot; class=&quot;item-link&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/&quot; class=&quot;item-link&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Using Nexus Repository Manager(NXRM) as your docker repository</title>
   <link href="http://localhost:4000/docker/2021/01/21/using-nexus-as-your-docker-repository/"/>
   <updated>2021-01-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2021/01/21/using-nexus-as-your-docker-repository</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Using NXRM as your docker repository&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Welcome to the Nexus Repository Manager for Docker Repository tutorial. In this article, I will guide you to set up a &lt;em&gt;Nexus Repository Manager&lt;/em&gt; as your docker registry from scratch, and we will cover installation, SSL, and User management in the next articles. At present, the Nexus Repository Manager has two versions &lt;a href=&quot;https://help.sonatype.com/repomanager2&quot;&gt;Repository Manager 2&lt;/a&gt; and &lt;a href=&quot;https://help.sonatype.com/repomanager3&quot;&gt;Repository Manager 3&lt;/a&gt;. The next articles will be demonstrating with &lt;strong&gt;&lt;em&gt;Nexus Repository Manager 3&lt;/em&gt;&lt;/strong&gt;, which is also well known as &lt;strong&gt;nexus3&lt;/strong&gt; or &lt;strong&gt;Nexus Repository Manager 3(NXRM3)&lt;/strong&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;h1&gt;Repository Manager vs Docker Registry&lt;/h1&gt;
A &lt;b&gt;Docker Registry&lt;/b&gt; is a repository for managing Docker images, just as we learned in the previous article &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot;&gt;docker private registry&lt;/a&gt;. However, A &lt;b&gt;Repository Manager&lt;/b&gt; is not only for managing docker images, it will usually be able to manage other repository technologies such as Maven, NuGet, or Git etc.
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/&quot; class=&quot;item-link&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus3-as-your-repository-a-simple-guide/&quot; class=&quot;item-link&quot;&gt;Using Nexus3 as your repository - A Simple Guide(No Deep Shit!)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/"/>
   <updated>2021-01-05T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;navi-link&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;navi-link&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, I will guild you build and deploy a web application by using MSBuild, MSTest, and MSDeploy.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSBuild&lt;/strong&gt;: The Microsoft Build Engine(aka. MSBuild) is a platform for building applications. You can define an XML file, which guilds how the MSBuild behavior. The Visual Studio uses MSBuild to achieve the building process. However, the MSBuild doesn’t depend on Visual Studio, and hence you can invoke the MSBuild.exe without Visual Studio IDE installed.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSTest&lt;/strong&gt;: MSTest is a command-line command to run tests.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSDeploy&lt;/strong&gt;: Web Deploy (aka. msdeploy) is a command-line executable tool created by Microsoft, which simplifies the deployment of Web applications and Web sites to IIS servers.&lt;/p&gt;

&lt;blockquote&gt;
&lt;b&gt;NOTE:&lt;/b&gt;

MSBuild, MSTest, and MSDeploy tools are only for Microsoft platforms(&lt;b&gt;Windows&lt;/b&gt; Operation System). And it is not compatible with non-Microsoft platforms such as Linux or Mac.
&lt;/blockquote&gt;

&lt;p&gt;I created a simple &lt;em&gt;.net core web application&lt;/em&gt; for this demonstration. Project File Structures:&lt;/p&gt;

&lt;pre&gt;
├─&lt;bold&gt;UnitTestProject&lt;/bold&gt;
│  ├─...
│  └─UnitTest.cs
├─&lt;bold&gt;WebApplication&lt;/bold&gt;
│   ├─Controllers
│     └─...
│   ├─Views
│     └─...
│   └─wwwroot
│     └─...
├─&lt;bold&gt;WebApplication.sln&lt;/bold&gt;
&lt;/pre&gt;

&lt;p&gt;I also created an IIS server, which will be used later for the deployment part.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-01-05-deploying-a-web-app-from-a-command-line-msbuild-mstest-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;IIS Web Application&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;As you can see from the above, I created an IIS server for demonstrating, which has the physical path &lt;code class=&quot;highlighter-rouge&quot;&gt;D:\webapplication&lt;/code&gt; on my laptop. Currently, the &lt;code class=&quot;highlighter-rouge&quot;&gt;D:\webapplication&lt;/code&gt; folder is empty, which will be filled by using &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy.exe&lt;/code&gt; later.&lt;/p&gt;

&lt;h1 id=&quot;build-by-using-msbuild&quot;&gt;Build by using MSBuild&lt;/h1&gt;
&lt;p&gt;To get started, you need to install the &lt;code class=&quot;highlighter-rouge&quot;&gt;MSBuild.exe&lt;/code&gt; program on your machine. For me, I have a Visual Studio 2019 installed on my machine, and the location of my MSBuild is &lt;green&gt;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&lt;/green&gt;. However, the MSBuild can be installed without installing visual studio IDE, take a look at &lt;a href=&quot;https://stackoverflow.com/questions/25506178/getting-msbuild-exe-without-installing-visual-studio&quot;&gt;Getting msbuild.exe without installing Visual Studio&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Navigate into the project’s directory.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt; dir
2021/01/05  22:22    &amp;lt;DIR&amp;gt;          UnitTestProject
2021/01/05  22:21    &amp;lt;DIR&amp;gt;          WebApplication
2021/01/05  22:22             1,647 WebApplication.sln
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Clean&lt;/strong&gt;, it removes the code that previous built.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt; /p:Configuration=Release &lt;bold&gt;/t:Clean&lt;/bold&gt; WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Restore&lt;/strong&gt;, downloads and installs any packages missing.&lt;/p&gt;
&lt;pre&gt;
 &lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt; /p:Configuration=Release &lt;bold&gt;/t:restore&lt;/bold&gt; WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Build&lt;/strong&gt;, build this project to deploy ready.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt;  /p:Configuration=Release &lt;bold&gt;/P:DeployOnBuild=true&lt;/bold&gt;  WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;This build will generate your codes for deployment in &lt;code class=&quot;highlighter-rouge&quot;&gt;bin\Debug\netcoreapp3.1&lt;/code&gt; under each project. &lt;code class=&quot;highlighter-rouge&quot;&gt;/p:Configuration=Release&lt;/code&gt; instructs MSBuild to build in a release mode.&lt;/p&gt;

&lt;p&gt;By the way, the above command may do not copy your &lt;code class=&quot;highlighter-rouge&quot;&gt;Views&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;wwwroot&lt;/code&gt; into your publish directory for the web application. However, you can define copy rules in the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication.csproj&lt;/code&gt; file. For more information, take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild&quot;&gt;Microsoft Doc MSBuild&lt;/a&gt;. Here, I use &lt;code class=&quot;highlighter-rouge&quot;&gt;xcopy&lt;/code&gt; command to copy &lt;code class=&quot;highlighter-rouge&quot;&gt;Views&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;wwwroot&lt;/code&gt; into my publish directory.&lt;/p&gt;

&lt;pre&gt;
&lt;bold&gt;xcopy&lt;/bold&gt; /E /I /Y WebApplication\&lt;bold&gt;wwwroot&lt;/bold&gt; WebApplication\bin\Release\netcoreapp3.1\Publish\wwwroot
&lt;bold&gt;xcopy&lt;/bold&gt; /E /I /Y WebApplication\&lt;bold&gt;Views&lt;/bold&gt; WebApplication\bin\Release\netcoreapp3.1\Publish\Views
&lt;/pre&gt;

&lt;h1 id=&quot;test-by-using-mstest&quot;&gt;Test by using MSTest&lt;/h1&gt;
&lt;p&gt;You need to install MSTest on your machine first, as we need to use MSTest later. However, the MSTest is a bit hard to install without Visual Studio IDE installed. Take a look at &lt;a href=&quot;https://stackoverflow.com/questions/3402899/can-i-use-mstest-exe-without-installing-visual-studio&quot;&gt;Can I use mstest.exe without installing Visual Studio?&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;For me, I have Visual Studio 2019 installed, so I can find the &lt;code class=&quot;highlighter-rouge&quot;&gt;mstest.exe&lt;/code&gt; in &lt;green&gt;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\MSTest.exe&lt;/green&gt; on my local machine.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\MSTest.exe&quot;&lt;/green&gt; /testcontainer:&quot;UnitTestProject\bin\Release\netcoreapp3.1\UnitTestProject.dll&quot; /detail:testtype
&lt;/pre&gt;

&lt;p&gt;You may encounter this problem &lt;code class=&quot;highlighter-rouge&quot;&gt;No tests to execute.&lt;/code&gt;, because the MSTest locks compatibilities for the CLI environment. If it doesn’t work, you really should consider using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet test&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; instead. Take a look at &lt;a href=&quot;https://github.com/Microsoft/vstest/issues/1213&quot;&gt;MStest.exe via CLI does no work&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Example &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; for test on my machine:&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\Extensions\TestPlatform\vstest.console.exe&quot;&lt;/green&gt;  &quot;UnitTestProject\bin\Release\netcoreapp3.1\UnitTestProject.dll&quot;
&lt;/pre&gt;

&lt;h1 id=&quot;deploy-by-using-web-deploy&quot;&gt;Deploy by using Web Deploy&lt;/h1&gt;
&lt;p&gt;Web Deploy(aka. MSDeploy) is a tool that makes your IIS deployment easier and faster.  At present, the latest version is &lt;code class=&quot;highlighter-rouge&quot;&gt;3.6&lt;/code&gt;, which compatible with IIS 7, IIS 7.5, IIS 8, IIS 8.5, IIS 10.&lt;/p&gt;

&lt;p&gt;You can download Web Deploy from &lt;a href=&quot;https://www.iis.net/downloads/microsoft/web-deploy&quot;&gt;IIS Download Web Deploy&lt;/a&gt; website, once you installed, find the &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy.exe&lt;/code&gt;’s location. For me, it is &lt;green&gt;C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe&lt;/green&gt; . By the way, Web Deploy has nothing to do with Visual Studio, they don’t depend on each other.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Prepare source package&lt;/strong&gt;. The MSBuild takes the zip archived file as its source package, so we need to achieve our published web files as a zip file.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;WinRAR.exe a -afzip -ep1 -r &quot;WebApplication\bin\Release\netcoreapp3.1\Publish\WebApplication.zip&quot; &quot;WebApplication\bin\Release\netcoreapp3.1\Publish\&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command will archive all files under &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication\bin\Release\netcoreapp3.1\Publish\&lt;/code&gt; in a zip file named &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication.zip&lt;/code&gt;, which located in the same &lt;code class=&quot;highlighter-rouge&quot;&gt;Publish&lt;/code&gt; folder.
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Grant permissions&lt;/strong&gt;
In order to run &lt;code class=&quot;highlighter-rouge&quot;&gt;Msdeploy.exe&lt;/code&gt; normally, the current user need to have the following permissions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Read permission to &lt;code class=&quot;highlighter-rouge&quot;&gt;%windir%\system32\inetsrv\config&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Modify permission to &lt;code class=&quot;highlighter-rouge&quot;&gt;%windir%\system32\inetsrv\config\applicationHost.config&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you want to get know more about this, take a look at &lt;a href=&quot;https://docs.microsoft.com/th-th/troubleshoot/iis/web-deploy-error-non-admin-user&quot;&gt;Error when you use the Web Deployment tool as a non-administrative user&lt;/a&gt; for more details.
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Deploy to the local IIS server&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe&quot;&lt;/green&gt; -verb:sync &lt;bold&gt;-source:package&lt;/bold&gt;=&quot;WebApplication\bin\Release\netcoreapp3.1\publish\WebApplication.zip&quot; &lt;bold&gt;-dest:contentPath&lt;/bold&gt;='WebApplication'
&lt;/pre&gt;

&lt;p&gt;The above command uses &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication\bin\Release\netcoreapp3.1\publish\WebApplication.zip&lt;/code&gt; as a source package, and deploy this package to the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; website in IIS.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;-dest:contentPath='WebApplication'&lt;/code&gt; informs &lt;code class=&quot;highlighter-rouge&quot;&gt;msdeploy.exe&lt;/code&gt; deploy to the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; website, you can change the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; to your other web application by specifying your website name in the &lt;code class=&quot;highlighter-rouge&quot;&gt;contentPath&lt;/code&gt; field &lt;code class=&quot;highlighter-rouge&quot;&gt;-dest:contentPath='Your Website Name'&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;In this article, we have discussed how to build, test, and deploy on the Windows platform. The &lt;code class=&quot;highlighter-rouge&quot;&gt;MSBuild&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy&lt;/code&gt; are both independent tools. However, It is hard to set up an &lt;code class=&quot;highlighter-rouge&quot;&gt;MSTest&lt;/code&gt; without Visual Studio installed(you need to configure many dependencies), and also &lt;code class=&quot;highlighter-rouge&quot;&gt;MSTest&lt;/code&gt; is less compatible in the Windows CLI environment. You really should consider for testing using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet test&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; instead.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/"/>
   <updated>2021-01-05T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;navi-link&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;navi-link&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, I will guild you build and deploy a web application by using MSBuild, MSTest, and MSDeploy.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSBuild&lt;/strong&gt;: The Microsoft Build Engine(aka. MSBuild) is a platform for building applications. You can define an XML file, which guilds how the MSBuild behavior. The Visual Studio uses MSBuild to achieve the building process. However, the MSBuild doesn’t depend on Visual Studio, and hence you can invoke the MSBuild.exe without Visual Studio IDE installed.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSTest&lt;/strong&gt;: MSTest is a command-line command to run tests.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MSDeploy&lt;/strong&gt;: Web Deploy (aka. msdeploy) is a command-line executable tool created by Microsoft, which simplifies the deployment of Web applications and Web sites to IIS servers.&lt;/p&gt;

&lt;blockquote&gt;
&lt;b&gt;NOTE:&lt;/b&gt;

MSBuild, MSTest, and MSDeploy tools are only for Microsoft platforms(&lt;b&gt;Windows&lt;/b&gt; Operation System). And it is not compatible with non-Microsoft platforms such as Linux or Mac.
&lt;/blockquote&gt;

&lt;p&gt;I created a simple &lt;em&gt;.net core web application&lt;/em&gt; for this demonstration. Project File Structures:&lt;/p&gt;

&lt;pre&gt;
├─&lt;bold&gt;UnitTestProject&lt;/bold&gt;
│  ├─...
│  └─UnitTest.cs
├─&lt;bold&gt;WebApplication&lt;/bold&gt;
│   ├─Controllers
│     └─...
│   ├─Views
│     └─...
│   └─wwwroot
│     └─...
├─&lt;bold&gt;WebApplication.sln&lt;/bold&gt;
&lt;/pre&gt;

&lt;p&gt;I also created an IIS server, which will be used later for the deployment part.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2021-01-05-deploying-a-web-app-from-a-command-line-msbuild-mstest-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;IIS Web Application&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;As you can see from the above, I created an IIS server for demonstrating, which has the physical path &lt;code class=&quot;highlighter-rouge&quot;&gt;D:\webapplication&lt;/code&gt; on my laptop. Currently, the &lt;code class=&quot;highlighter-rouge&quot;&gt;D:\webapplication&lt;/code&gt; folder is empty, which will be filled by using &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy.exe&lt;/code&gt; later.&lt;/p&gt;

&lt;h1 id=&quot;build-by-using-msbuild&quot;&gt;Build by using MSBuild&lt;/h1&gt;
&lt;p&gt;To get started, you need to install the &lt;code class=&quot;highlighter-rouge&quot;&gt;MSBuild.exe&lt;/code&gt; program on your machine. For me, I have a Visual Studio 2019 installed on my machine, and the location of my MSBuild is &lt;green&gt;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&lt;/green&gt;. However, the MSBuild can be installed without installing visual studio IDE, take a look at &lt;a href=&quot;https://stackoverflow.com/questions/25506178/getting-msbuild-exe-without-installing-visual-studio&quot;&gt;Getting msbuild.exe without installing Visual Studio&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Navigate into the project’s directory.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt; dir
2021/01/05  22:22    &amp;lt;DIR&amp;gt;          UnitTestProject
2021/01/05  22:21    &amp;lt;DIR&amp;gt;          WebApplication
2021/01/05  22:22             1,647 WebApplication.sln
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Clean&lt;/strong&gt;, it removes the code that previous built.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt; /p:Configuration=Release &lt;bold&gt;/t:Clean&lt;/bold&gt; WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Restore&lt;/strong&gt;, downloads and installs any packages missing.&lt;/p&gt;
&lt;pre&gt;
 &lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt; /p:Configuration=Release &lt;bold&gt;/t:restore&lt;/bold&gt; WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;
&lt;strong&gt;Build&lt;/strong&gt;, build this project to deploy ready.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\msbuild.exe&quot;&lt;/green&gt;  /p:Configuration=Release &lt;bold&gt;/P:DeployOnBuild=true&lt;/bold&gt;  WebApplication.sln
&lt;/pre&gt;

&lt;p&gt;This build will generate your codes for deployment in &lt;code class=&quot;highlighter-rouge&quot;&gt;bin\Debug\netcoreapp3.1&lt;/code&gt; under each project. &lt;code class=&quot;highlighter-rouge&quot;&gt;/p:Configuration=Release&lt;/code&gt; instructs MSBuild to build in a release mode.&lt;/p&gt;

&lt;p&gt;By the way, the above command may do not copy your &lt;code class=&quot;highlighter-rouge&quot;&gt;Views&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;wwwroot&lt;/code&gt; into your publish directory for the web application. However, you can define copy rules in the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication.csproj&lt;/code&gt; file. For more information, take a look at &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild&quot;&gt;Microsoft Doc MSBuild&lt;/a&gt;. Here, I use &lt;code class=&quot;highlighter-rouge&quot;&gt;xcopy&lt;/code&gt; command to copy &lt;code class=&quot;highlighter-rouge&quot;&gt;Views&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;wwwroot&lt;/code&gt; into my publish directory.&lt;/p&gt;

&lt;pre&gt;
&lt;bold&gt;xcopy&lt;/bold&gt; /E /I /Y WebApplication\&lt;bold&gt;wwwroot&lt;/bold&gt; WebApplication\bin\Release\netcoreapp3.1\Publish\wwwroot
&lt;bold&gt;xcopy&lt;/bold&gt; /E /I /Y WebApplication\&lt;bold&gt;Views&lt;/bold&gt; WebApplication\bin\Release\netcoreapp3.1\Publish\Views
&lt;/pre&gt;

&lt;h1 id=&quot;test-by-using-mstest&quot;&gt;Test by using MSTest&lt;/h1&gt;
&lt;p&gt;You need to install MSTest on your machine first, as we need to use MSTest later. However, the MSTest is a bit hard to install without Visual Studio IDE installed. Take a look at &lt;a href=&quot;https://stackoverflow.com/questions/3402899/can-i-use-mstest-exe-without-installing-visual-studio&quot;&gt;Can I use mstest.exe without installing Visual Studio?&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;For me, I have Visual Studio 2019 installed, so I can find the &lt;code class=&quot;highlighter-rouge&quot;&gt;mstest.exe&lt;/code&gt; in &lt;green&gt;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\MSTest.exe&lt;/green&gt; on my local machine.&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\MSTest.exe&quot;&lt;/green&gt; /testcontainer:&quot;UnitTestProject\bin\Release\netcoreapp3.1\UnitTestProject.dll&quot; /detail:testtype
&lt;/pre&gt;

&lt;p&gt;You may encounter this problem &lt;code class=&quot;highlighter-rouge&quot;&gt;No tests to execute.&lt;/code&gt;, because the MSTest locks compatibilities for the CLI environment. If it doesn’t work, you really should consider using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet test&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; instead. Take a look at &lt;a href=&quot;https://github.com/Microsoft/vstest/issues/1213&quot;&gt;MStest.exe via CLI does no work&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Example &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; for test on my machine:&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\Extensions\TestPlatform\vstest.console.exe&quot;&lt;/green&gt;  &quot;UnitTestProject\bin\Release\netcoreapp3.1\UnitTestProject.dll&quot;
&lt;/pre&gt;

&lt;h1 id=&quot;deploy-by-using-web-deploy&quot;&gt;Deploy by using Web Deploy&lt;/h1&gt;
&lt;p&gt;Web Deploy(aka. MSDeploy) is a tool that makes your IIS deployment easier and faster.  At present, the latest version is &lt;code class=&quot;highlighter-rouge&quot;&gt;3.6&lt;/code&gt;, which compatible with IIS 7, IIS 7.5, IIS 8, IIS 8.5, IIS 10.&lt;/p&gt;

&lt;p&gt;You can download Web Deploy from &lt;a href=&quot;https://www.iis.net/downloads/microsoft/web-deploy&quot;&gt;IIS Download Web Deploy&lt;/a&gt; website, once you installed, find the &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy.exe&lt;/code&gt;’s location. For me, it is &lt;green&gt;C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe&lt;/green&gt; . By the way, Web Deploy has nothing to do with Visual Studio, they don’t depend on each other.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Prepare source package&lt;/strong&gt;. The MSBuild takes the zip archived file as its source package, so we need to achieve our published web files as a zip file.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;WinRAR.exe a -afzip -ep1 -r &quot;WebApplication\bin\Release\netcoreapp3.1\Publish\WebApplication.zip&quot; &quot;WebApplication\bin\Release\netcoreapp3.1\Publish\&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above command will archive all files under &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication\bin\Release\netcoreapp3.1\Publish\&lt;/code&gt; in a zip file named &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication.zip&lt;/code&gt;, which located in the same &lt;code class=&quot;highlighter-rouge&quot;&gt;Publish&lt;/code&gt; folder.
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Grant permissions&lt;/strong&gt;
In order to run &lt;code class=&quot;highlighter-rouge&quot;&gt;Msdeploy.exe&lt;/code&gt; normally, the current user need to have the following permissions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Read permission to &lt;code class=&quot;highlighter-rouge&quot;&gt;%windir%\system32\inetsrv\config&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Modify permission to &lt;code class=&quot;highlighter-rouge&quot;&gt;%windir%\system32\inetsrv\config\applicationHost.config&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you want to get know more about this, take a look at &lt;a href=&quot;https://docs.microsoft.com/th-th/troubleshoot/iis/web-deploy-error-non-admin-user&quot;&gt;Error when you use the Web Deployment tool as a non-administrative user&lt;/a&gt; for more details.
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Deploy to the local IIS server&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;green&gt;&quot;C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe&quot;&lt;/green&gt; -verb:sync &lt;bold&gt;-source:package&lt;/bold&gt;=&quot;WebApplication\bin\Release\netcoreapp3.1\publish\WebApplication.zip&quot; &lt;bold&gt;-dest:contentPath&lt;/bold&gt;='WebApplication'
&lt;/pre&gt;

&lt;p&gt;The above command uses &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication\bin\Release\netcoreapp3.1\publish\WebApplication.zip&lt;/code&gt; as a source package, and deploy this package to the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; website in IIS.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;-dest:contentPath='WebApplication'&lt;/code&gt; informs &lt;code class=&quot;highlighter-rouge&quot;&gt;msdeploy.exe&lt;/code&gt; deploy to the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; website, you can change the &lt;code class=&quot;highlighter-rouge&quot;&gt;WebApplication&lt;/code&gt; to your other web application by specifying your website name in the &lt;code class=&quot;highlighter-rouge&quot;&gt;contentPath&lt;/code&gt; field &lt;code class=&quot;highlighter-rouge&quot;&gt;-dest:contentPath='Your Website Name'&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;In this article, we have discussed how to build, test, and deploy on the Windows platform. The &lt;code class=&quot;highlighter-rouge&quot;&gt;MSBuild&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;MSDeploy&lt;/code&gt; are both independent tools. However, It is hard to set up an &lt;code class=&quot;highlighter-rouge&quot;&gt;MSTest&lt;/code&gt; without Visual Studio installed(you need to configure many dependencies), and also &lt;code class=&quot;highlighter-rouge&quot;&gt;MSTest&lt;/code&gt; is less compatible in the Windows CLI environment. You really should consider for testing using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet test&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;vstest.console.exe&lt;/code&gt; instead.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Web Deployment: Command Line Deployment</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/"/>
   <updated>2021-01-05T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Command Line is the most basic way that does the deployment process. Usually, we don’t need to run any command line for the build and deployment manually. It’s because Visual Studio IDE will do all of these for us in the UI. However, build and deploy through the command line is also principal to learn for DevOps. If you are unfamiliar with DevOps and Jenkins, you can take a look at &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot;&gt;Jenkins Tutorial For DevOps&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;This article aims to take cover a comprehensive deployment process through the command line way. Let us explore now!&lt;/p&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/&quot; class=&quot;item-link&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/&quot; class=&quot;item-link&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;&lt;/li&gt;
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Web Deployment: Command Line Deployment</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/"/>
   <updated>2021-01-05T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
    
        
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;ASP.NET Core Web Deployment: Command Line Deployment&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Command Line is the most basic way that does the deployment process. Usually, we don’t need to run any command line for the build and deployment manually. It’s because Visual Studio IDE will do all of these for us in the UI. However, build and deploy through the command line is also principal to learn for DevOps. If you are unfamiliar with DevOps and Jenkins, you can take a look at &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot;&gt;Jenkins Tutorial For DevOps&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;This article aims to take cover a comprehensive deployment process through the command line way. Let us explore now!&lt;/p&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/&quot; class=&quot;item-link&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/deploying-a-web-app-from-a-command-line-msbuild-mstest/&quot; class=&quot;item-link&quot;&gt;Deploying a Web App from a Command Line using MSBuild, MSTest, and WebDeploy&lt;/a&gt;&lt;/li&gt;
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;

</content>
 </entry>
 
 <entry>
   <title>Jenkins with asp.net core CI&CD pipeline for Linux</title>
   <link href="http://localhost:4000/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/"/>
   <updated>2020-12-30T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this tutorial, I will guild you to set up a CI and CD workflow pipeline step by step. I use this GitHub repository &lt;a href=&quot;https://github.com/voltwu/Jenkins-.NET-Core-CI-CD-pipeline/tree/dev&quot;&gt;https://github.com/voltwu/Jenkins-.NET-Core-CI-CD-pipeline&lt;/a&gt; to demonstrate this example, which has two branches, &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-l.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Example repository&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The purpose of this article:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins pipeline architecture&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Developers push their codes into a repository(Such as Github), Jenkins will automatically pull codes from that repository, then process build, test, publish and deploy. All of these will be processed automatically in the Jenkins pipeline.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;A Linux machine. I am using Debian 9.&lt;/li&gt;
  &lt;li&gt;.Net Core 3.1 installed. Check &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/install/linux&quot;&gt;Net Core Install on Linux&lt;/a&gt; for the installation guild.&lt;/li&gt;
  &lt;li&gt;A running Jenkins. Check &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot;&gt;Jenkins Installation&lt;/a&gt;, if you haven’t installed Jenkins yet.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;create-a-job&quot;&gt;Create A Job&lt;/h1&gt;
&lt;p&gt;Click &lt;em&gt;New Item&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Create A New Job&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Fill item name and click &lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;. The other two types &lt;strong&gt;&lt;em&gt;Freestyle project&lt;/em&gt;&lt;/strong&gt; and &lt;strong&gt;&lt;em&gt;Pipeline&lt;/em&gt;&lt;/strong&gt; are also commonly used in Jenkins. In contrast to the &lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;, the other two are function limited and feature lesser. The following is a brief comparison of three of them.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Freestyle Project&lt;/strong&gt;: Build or run simple jobs like allowing to specify the version control system from which you need to extract code and build it and call tests if available.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Pipeline&lt;/strong&gt;: Setup continuous delivery pipeline or say define the deployment pipeline as code, which allows you to orchestrate all the stages in delivering an application as one single pipeline project.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;: This is similar to Pipeline. Multibranch Pipeline not just contains all functionalities that Pipeline supported, more further, Multibranch Pipeline allows you to pick a specific branch. If you have two branches &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; for development, &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; for production, then you need to distinguish branches, so you can set up different pipelines.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;branch-sources&quot;&gt;Branch Sources&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Branch Sources&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;I use &lt;strong&gt;Git&lt;/strong&gt; as the branch source example. Then fill in the &lt;strong&gt;&lt;em&gt;project repository&lt;/em&gt;&lt;/strong&gt; address, if the project is &lt;strong&gt;private&lt;/strong&gt;, then you need to &lt;strong&gt;add credentials&lt;/strong&gt;. This repository for this example is open, so I don’t need to add any credentials.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Git Repository&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The &lt;strong&gt;Behaviours&lt;/strong&gt; describes how to identify what branches you want to use. Here I choose to discover all branches and then filter branch name using &lt;strong&gt;&lt;em&gt;wildcards&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Filter name by wildcards&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;pick up all branches that starts with dev&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;I filled in &lt;em&gt;Include&lt;/em&gt; with &lt;code class=&quot;highlighter-rouge&quot;&gt;dev*&lt;/code&gt;, which will pick up all branches that name start with &lt;em&gt;dev&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;build-configuration&quot;&gt;Build Configuration&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-g.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Build Configuration with jenkinsfile&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Choose Build Configuration Mode as by &lt;strong&gt;Jenkinsfile&lt;/strong&gt;. 	&lt;code class=&quot;highlighter-rouge&quot;&gt;Script Path&lt;/code&gt; specify the Jenkinsfile location, which will be located at the project’s root path by default. If your Jenkinsfile located at another place, you can specify it at &lt;code class=&quot;highlighter-rouge&quot;&gt;Script Path&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;scan-multibranch-pipeline-triggers&quot;&gt;Scan Multibranch Pipeline Triggers&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-h.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Periodically if not otherwise run&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Sometimes, the Jenkins may unexpectedly unresponsive to your code’s push action. You should specify a periodical running task with an interval time, just in case of your Jenkins unresponsive.&lt;/p&gt;

&lt;h2 id=&quot;create-a-jenkinsfile&quot;&gt;Create a Jenkinsfile&lt;/h2&gt;

&lt;p&gt;The following is my Jenkins file, which includes six stages. And in the later, when everything set up completely. You can visualize these stages in the UI component.&lt;/p&gt;

&lt;p&gt;I won’t discuss the pipeline syntax, as it already out of the scope of this article. Check this &lt;a href=&quot;https://www.jenkins.io/doc/book/pipeline/&quot;&gt;Pipeline Handlebook&lt;/a&gt; for scripted pipeline syntax and pipeline declarative syntax.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pipeline {
    agent any
    triggers {
        githubPush()
    }
    stages {
        stage('Restore packages'){
           steps{
               sh 'dotnet restore WebApplication.sln'
            }
         }
        stage('Clean'){
           steps{
               sh 'dotnet clean WebApplication.sln --configuration Release'
            }
         }
        stage('Build'){
           steps{
               sh 'dotnet build WebApplication.sln --configuration Release --no-restore'
            }
         }
        stage('Test: Unit Test'){
           steps {
                sh 'dotnet test XUnitTestProject/XUnitTestProject.csproj --configuration Release --no-restore'
             }
          }
        stage('Publish'){
             steps{
               sh 'dotnet publish WebApplication/WebApplication.csproj --configuration Release --no-restore'
             }
        }
        stage('Deploy'){
             steps{
               sh '''for pid in $(lsof -t -i:9090); do
                       kill -9 $pid
               done'''
               sh 'cd WebApplication/bin/Release/netcoreapp3.1/publish/'
               sh 'nohup dotnet WebApplication.dll --urls=&quot;http://104.128.91.189:9090&quot; --ip=&quot;104.128.91.189&quot; --port=9090 --no-restore &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;'
             }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see from the above pipeline file., I set 6 stages, each stage corresponding different task.&lt;/p&gt;

&lt;h1 id=&quot;setup-automatic-build-on-push&quot;&gt;Setup automatic build on push&lt;/h1&gt;

&lt;p&gt;In this section, I will set up an automatic build on push. Each push to the source code will trigger your Jenkins to run all of these stages as I described above.&lt;/p&gt;

&lt;p&gt;In order to complete that, we need to set on both Jenkins and Github, so they can communicate with others. Set webhook on Github. (Your Jenkins needs to run on a public server, So Github can notify your Jenkins server.)&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-i.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Github weebhook&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Fill in your webhook address as &lt;a href=&quot;http://server:port/github-webhook/&quot;&gt;http://server:port/github-webhook/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In order to notify the Jenkins, you also need to add Following section at your &lt;em&gt;Jenkinsfile&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-j.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins notify as pipeline code&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Take a look at &lt;a href=&quot;https://stackoverflow.com/questions/42062481/how-to-trigger-a-jenkins-multibranch-pipeline-when-code-change-is-pushed-to-gith?noredirect=1&amp;amp;lq=1&quot;&gt;How to trigger a Jenkins multibranch pipeline when code change is pushed to GitHub&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Now, Github will notify your Jenkins server, when new pushes happened in your Jenkins server.&lt;/p&gt;

&lt;h1 id=&quot;test&quot;&gt;Test&lt;/h1&gt;
&lt;p&gt;Now, we have everything set up. 
Push somes codes into repository and take a look at stages.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-k.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins notify as pipeline code&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, you have an entire workflow pipeline set up. Let’s enjoy your Jenkins. If you have any questions or doubts, please feel free to leave comments below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Jenkins with asp.net core CI&CD pipeline for Linux</title>
   <link href="http://localhost:4000/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/"/>
   <updated>2020-12-30T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this tutorial, I will guild you to set up a CI and CD workflow pipeline step by step. I use this GitHub repository &lt;a href=&quot;https://github.com/voltwu/Jenkins-.NET-Core-CI-CD-pipeline/tree/dev&quot;&gt;https://github.com/voltwu/Jenkins-.NET-Core-CI-CD-pipeline&lt;/a&gt; to demonstrate this example, which has two branches, &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-l.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Example repository&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The purpose of this article:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins pipeline architecture&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Developers push their codes into a repository(Such as Github), Jenkins will automatically pull codes from that repository, then process build, test, publish and deploy. All of these will be processed automatically in the Jenkins pipeline.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;A Linux machine. I am using Debian 9.&lt;/li&gt;
  &lt;li&gt;.Net Core 3.1 installed. Check &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/install/linux&quot;&gt;Net Core Install on Linux&lt;/a&gt; for the installation guild.&lt;/li&gt;
  &lt;li&gt;A running Jenkins. Check &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot;&gt;Jenkins Installation&lt;/a&gt;, if you haven’t installed Jenkins yet.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;create-a-job&quot;&gt;Create A Job&lt;/h1&gt;
&lt;p&gt;Click &lt;em&gt;New Item&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Create A New Job&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Fill item name and click &lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;. The other two types &lt;strong&gt;&lt;em&gt;Freestyle project&lt;/em&gt;&lt;/strong&gt; and &lt;strong&gt;&lt;em&gt;Pipeline&lt;/em&gt;&lt;/strong&gt; are also commonly used in Jenkins. In contrast to the &lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;, the other two are function limited and feature lesser. The following is a brief comparison of three of them.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Freestyle Project&lt;/strong&gt;: Build or run simple jobs like allowing to specify the version control system from which you need to extract code and build it and call tests if available.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Pipeline&lt;/strong&gt;: Setup continuous delivery pipeline or say define the deployment pipeline as code, which allows you to orchestrate all the stages in delivering an application as one single pipeline project.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Multibranch Pipeline&lt;/strong&gt;: This is similar to Pipeline. Multibranch Pipeline not just contains all functionalities that Pipeline supported, more further, Multibranch Pipeline allows you to pick a specific branch. If you have two branches &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; for development, &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; for production, then you need to distinguish branches, so you can set up different pipelines.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;branch-sources&quot;&gt;Branch Sources&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Branch Sources&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;I use &lt;strong&gt;Git&lt;/strong&gt; as the branch source example. Then fill in the &lt;strong&gt;&lt;em&gt;project repository&lt;/em&gt;&lt;/strong&gt; address, if the project is &lt;strong&gt;private&lt;/strong&gt;, then you need to &lt;strong&gt;add credentials&lt;/strong&gt;. This repository for this example is open, so I don’t need to add any credentials.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Git Repository&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The &lt;strong&gt;Behaviours&lt;/strong&gt; describes how to identify what branches you want to use. Here I choose to discover all branches and then filter branch name using &lt;strong&gt;&lt;em&gt;wildcards&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Filter name by wildcards&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;pick up all branches that starts with dev&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;I filled in &lt;em&gt;Include&lt;/em&gt; with &lt;code class=&quot;highlighter-rouge&quot;&gt;dev*&lt;/code&gt;, which will pick up all branches that name start with &lt;em&gt;dev&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;build-configuration&quot;&gt;Build Configuration&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-g.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Build Configuration with jenkinsfile&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Choose Build Configuration Mode as by &lt;strong&gt;Jenkinsfile&lt;/strong&gt;. 	&lt;code class=&quot;highlighter-rouge&quot;&gt;Script Path&lt;/code&gt; specify the Jenkinsfile location, which will be located at the project’s root path by default. If your Jenkinsfile located at another place, you can specify it at &lt;code class=&quot;highlighter-rouge&quot;&gt;Script Path&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;scan-multibranch-pipeline-triggers&quot;&gt;Scan Multibranch Pipeline Triggers&lt;/h2&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-h.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Periodically if not otherwise run&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Sometimes, the Jenkins may unexpectedly unresponsive to your code’s push action. You should specify a periodical running task with an interval time, just in case of your Jenkins unresponsive.&lt;/p&gt;

&lt;h2 id=&quot;create-a-jenkinsfile&quot;&gt;Create a Jenkinsfile&lt;/h2&gt;

&lt;p&gt;The following is my Jenkins file, which includes six stages. And in the later, when everything set up completely. You can visualize these stages in the UI component.&lt;/p&gt;

&lt;p&gt;I won’t discuss the pipeline syntax, as it already out of the scope of this article. Check this &lt;a href=&quot;https://www.jenkins.io/doc/book/pipeline/&quot;&gt;Pipeline Handlebook&lt;/a&gt; for scripted pipeline syntax and pipeline declarative syntax.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pipeline {
    agent any
    triggers {
        githubPush()
    }
    stages {
        stage('Restore packages'){
           steps{
               sh 'dotnet restore WebApplication.sln'
            }
         }
        stage('Clean'){
           steps{
               sh 'dotnet clean WebApplication.sln --configuration Release'
            }
         }
        stage('Build'){
           steps{
               sh 'dotnet build WebApplication.sln --configuration Release --no-restore'
            }
         }
        stage('Test: Unit Test'){
           steps {
                sh 'dotnet test XUnitTestProject/XUnitTestProject.csproj --configuration Release --no-restore'
             }
          }
        stage('Publish'){
             steps{
               sh 'dotnet publish WebApplication/WebApplication.csproj --configuration Release --no-restore'
             }
        }
        stage('Deploy'){
             steps{
               sh '''for pid in $(lsof -t -i:9090); do
                       kill -9 $pid
               done'''
               sh 'cd WebApplication/bin/Release/netcoreapp3.1/publish/'
               sh 'nohup dotnet WebApplication.dll --urls=&quot;http://104.128.91.189:9090&quot; --ip=&quot;104.128.91.189&quot; --port=9090 --no-restore &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;'
             }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see from the above pipeline file., I set 6 stages, each stage corresponding different task.&lt;/p&gt;

&lt;h1 id=&quot;setup-automatic-build-on-push&quot;&gt;Setup automatic build on push&lt;/h1&gt;

&lt;p&gt;In this section, I will set up an automatic build on push. Each push to the source code will trigger your Jenkins to run all of these stages as I described above.&lt;/p&gt;

&lt;p&gt;In order to complete that, we need to set on both Jenkins and Github, so they can communicate with others. Set webhook on Github. (Your Jenkins needs to run on a public server, So Github can notify your Jenkins server.)&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-i.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Github weebhook&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Fill in your webhook address as &lt;a href=&quot;http://server:port/github-webhook/&quot;&gt;http://server:port/github-webhook/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In order to notify the Jenkins, you also need to add Following section at your &lt;em&gt;Jenkinsfile&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-j.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins notify as pipeline code&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Take a look at &lt;a href=&quot;https://stackoverflow.com/questions/42062481/how-to-trigger-a-jenkins-multibranch-pipeline-when-code-change-is-pushed-to-gith?noredirect=1&amp;amp;lq=1&quot;&gt;How to trigger a Jenkins multibranch pipeline when code change is pushed to GitHub&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Now, Github will notify your Jenkins server, when new pushes happened in your Jenkins server.&lt;/p&gt;

&lt;h1 id=&quot;test&quot;&gt;Test&lt;/h1&gt;
&lt;p&gt;Now, we have everything set up. 
Push somes codes into repository and take a look at stages.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-30-Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux-k.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins notify as pipeline code&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, you have an entire workflow pipeline set up. Let’s enjoy your Jenkins. If you have any questions or doubts, please feel free to leave comments below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>How to Install Jenkins On Debian 9 Linux</title>
   <link href="http://localhost:4000/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/"/>
   <updated>2020-12-29T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Jenkins is an automation server, which can be installed through Docker or other packages. In the previous blog, I introduced how to install Jenkins on Docker Compose. In this article, I will focus on how to install Jenkins on Debian 9 Linux System. If you don’t Jenkins, you can take a look at my Jenkins Tutorial for a short description.&lt;/p&gt;

&lt;h1 id=&quot;install-java&quot;&gt;Install Java&lt;/h1&gt;
&lt;p&gt;Jenkins depends on Java application, which you should be installed as a prerequisite. There are many ways that you can achieve a Java environment implementation. The most common way is OpenJDK, which will be used to install for this article.&lt;/p&gt;

&lt;p&gt;Open Java Development Kit(OpenJDK) Installation.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;search of all available jdk packages:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt update
$ apt search openjdks
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Pick openjdk 8 or higher version:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt install openjdk-8-jdk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;install-jenkins&quot;&gt;Install Jenkins&lt;/h1&gt;
&lt;p&gt;Jenkins provides two main releases, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;lts&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;weekly&lt;/code&gt;. Both of them are available to be installed, the &lt;code class=&quot;highlighter-rouge&quot;&gt;weekly&lt;/code&gt; release produces weekly for bug fixes and features to users and plugin developers. However, the &lt;code class=&quot;highlighter-rouge&quot;&gt;lts&lt;/code&gt; choose from every twelve weeks from regular releases as a stable release for that time period.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install LTS Version&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
$ sudo sh -c 'echo deb https://pkg.jenkins.io/debian-stable binary/ &amp;gt; \
    /etc/apt/sources.list.d/jenkins.list'
$ sudo apt-get update
$ sudo apt-get install jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Install Weekly Version&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
$ sudo sh -c 'echo deb https://pkg.jenkins.io/debian binary/ &amp;gt; \
    /etc/apt/sources.list.d/jenkins.list'
$ sudo apt-get update
$ sudo apt-get install jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;manage-jenkins-service&quot;&gt;Manage Jenkins Service&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;start Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl start jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Jenkins status&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl status jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Stop Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl stop jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Disable Jenkins on startup&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl disable jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable Jenkins on startup&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl enable jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Uninstall Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt-get remove jenkins
$ rm -rf /var/lib/jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;where-is-the-jenkins-home-directory&quot;&gt;Where is the Jenkins Home Directory&lt;/h1&gt;
&lt;p&gt;By default, the Jenkins home directory located at &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/jenkins&lt;/code&gt; on Linux.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls /var/bin/jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When your Jenkins server running up, you can use another location instead of the default one on the Jenkins dashboard.&lt;/p&gt;

&lt;h1 id=&quot;set-up-wizard&quot;&gt;Set up Wizard&lt;/h1&gt;
&lt;p&gt;Opens &lt;a href=&quot;http://server_ip:8080&quot;&gt;server_ip:8080&lt;/a&gt; at your browser, the default port is &lt;code class=&quot;highlighter-rouge&quot;&gt;8080&lt;/code&gt;, and you can change it in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/default/jenkins&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;initial password&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Check initual admin password.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /var/lib/jenkins/secrets/initialAdminPassword
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Copy the passord and paste it at &lt;em&gt;administrator password&lt;/em&gt;, then click &lt;em&gt;Continue&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Install Plugins&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Add first admin user&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins Dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>How to Install Jenkins On Debian 9 Linux</title>
   <link href="http://localhost:4000/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/"/>
   <updated>2020-12-29T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Jenkins is an automation server, which can be installed through Docker or other packages. In the previous blog, I introduced how to install Jenkins on Docker Compose. In this article, I will focus on how to install Jenkins on Debian 9 Linux System. If you don’t Jenkins, you can take a look at my Jenkins Tutorial for a short description.&lt;/p&gt;

&lt;h1 id=&quot;install-java&quot;&gt;Install Java&lt;/h1&gt;
&lt;p&gt;Jenkins depends on Java application, which you should be installed as a prerequisite. There are many ways that you can achieve a Java environment implementation. The most common way is OpenJDK, which will be used to install for this article.&lt;/p&gt;

&lt;p&gt;Open Java Development Kit(OpenJDK) Installation.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;search of all available jdk packages:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt update
$ apt search openjdks
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Pick openjdk 8 or higher version:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt install openjdk-8-jdk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;install-jenkins&quot;&gt;Install Jenkins&lt;/h1&gt;
&lt;p&gt;Jenkins provides two main releases, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;lts&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;weekly&lt;/code&gt;. Both of them are available to be installed, the &lt;code class=&quot;highlighter-rouge&quot;&gt;weekly&lt;/code&gt; release produces weekly for bug fixes and features to users and plugin developers. However, the &lt;code class=&quot;highlighter-rouge&quot;&gt;lts&lt;/code&gt; choose from every twelve weeks from regular releases as a stable release for that time period.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Install LTS Version&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -
$ sudo sh -c 'echo deb https://pkg.jenkins.io/debian-stable binary/ &amp;gt; \
    /etc/apt/sources.list.d/jenkins.list'
$ sudo apt-get update
$ sudo apt-get install jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Install Weekly Version&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
$ sudo sh -c 'echo deb https://pkg.jenkins.io/debian binary/ &amp;gt; \
    /etc/apt/sources.list.d/jenkins.list'
$ sudo apt-get update
$ sudo apt-get install jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;manage-jenkins-service&quot;&gt;Manage Jenkins Service&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;start Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl start jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Jenkins status&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl status jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Stop Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl stop jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Disable Jenkins on startup&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl disable jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Enable Jenkins on startup&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl enable jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Uninstall Jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt-get remove jenkins
$ rm -rf /var/lib/jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;where-is-the-jenkins-home-directory&quot;&gt;Where is the Jenkins Home Directory&lt;/h1&gt;
&lt;p&gt;By default, the Jenkins home directory located at &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/jenkins&lt;/code&gt; on Linux.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls /var/bin/jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When your Jenkins server running up, you can use another location instead of the default one on the Jenkins dashboard.&lt;/p&gt;

&lt;h1 id=&quot;set-up-wizard&quot;&gt;Set up Wizard&lt;/h1&gt;
&lt;p&gt;Opens &lt;a href=&quot;http://server_ip:8080&quot;&gt;server_ip:8080&lt;/a&gt; at your browser, the default port is &lt;code class=&quot;highlighter-rouge&quot;&gt;8080&lt;/code&gt;, and you can change it in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/default/jenkins&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;initial password&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Check initual admin password.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat /var/lib/jenkins/secrets/initialAdminPassword
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Copy the passord and paste it at &lt;em&gt;administrator password&lt;/em&gt;, then click &lt;em&gt;Continue&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Install Plugins&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Add first admin user&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-29-how-to-install-jenkins-on-debian-9-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins Dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Jenkins Installation</title>
   <link href="http://localhost:4000/jenkins/2020/12/27/jenkins-installation/"/>
   <updated>2020-12-27T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/27/jenkins-installation</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins Installation&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;According to the official document, Jenkins supports many installation ways.  You can install Jenkins on Linux, Windows, or mac. Take a look at the official document for more details. This tutorial collects some common issues during installation, also contains comprehensive installation guilds and details that everything you matter. Please be free to leave comments if you have any questions or advice.&lt;/p&gt;

&lt;blockquote&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
You can install Jenkins through Docker, it is very convenient and fast. However, If your CI/CD pipeline needs to utilize the original operating system resources, it will be difficult(such as run installed software in bash command). If you only matter the CI process, then Docker will be okay for you, because Jenkins has provided abundant plugins now. However, if you also matter the CD process, usually you need to manipulate the server, and it will be difficult when using Docker. So, use Docker or not, it all depends on you.
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/23/install-jenkins-on-docker/&quot; class=&quot;item-link&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/23/install-jenkins-on-docker/&quot; class=&quot;item-link&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/&quot; class=&quot;item-link&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/&quot; class=&quot;item-link&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Jenkins Installation</title>
   <link href="http://localhost:4000/jenkins/2020/12/27/jenkins-installation/"/>
   <updated>2020-12-27T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/27/jenkins-installation</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins Installation&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;According to the official document, Jenkins supports many installation ways.  You can install Jenkins on Linux, Windows, or mac. Take a look at the official document for more details. This tutorial collects some common issues during installation, also contains comprehensive installation guilds and details that everything you matter. Please be free to leave comments if you have any questions or advice.&lt;/p&gt;

&lt;blockquote&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
You can install Jenkins through Docker, it is very convenient and fast. However, If your CI/CD pipeline needs to utilize the original operating system resources, it will be difficult(such as run installed software in bash command). If you only matter the CI process, then Docker will be okay for you, because Jenkins has provided abundant plugins now. However, if you also matter the CD process, usually you need to manipulate the server, and it will be difficult when using Docker. So, use Docker or not, it all depends on you.
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/23/install-jenkins-on-docker/&quot; class=&quot;item-link&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/23/install-jenkins-on-docker/&quot; class=&quot;item-link&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/&quot; class=&quot;item-link&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/29/how-to-install-jenkins-on-debian-9/&quot; class=&quot;item-link&quot;&gt;How to Install Jenkins On Debian 9 Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Install Jenkins Using Docker</title>
   <link href="http://localhost:4000/jenkins/2020/12/23/install-jenkins-on-docker/"/>
   <updated>2020-12-23T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/23/install-jenkins-on-docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;To get the start, you need to install Jenkins. There are plenty of ways you can achieve this goal. You can build from source code, run war file in Java, or run from a Docker image. etc.&lt;/p&gt;

&lt;p&gt;Generally, Jenkins provides two major releases, &lt;strong&gt;weekly&lt;/strong&gt; and &lt;strong&gt;lts&lt;/strong&gt;. &lt;strong&gt;&lt;em&gt;Weekly&lt;/em&gt;&lt;/strong&gt;, as the name says, new releases are produced weekly to deliver bug fixes and features to users and plugin developers. &lt;strong&gt;&lt;em&gt;lts&lt;/em&gt;&lt;/strong&gt;, every 12 weeks from the stream of regular releases as the stable release for that time period.&lt;/p&gt;

&lt;p&gt;Here, I am gonna illustrate that install Jenkins using Docker. If you run Jenkins using Docker, you have to fit these prerequisites:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;A256 MB of RAM&lt;/li&gt;
  &lt;li&gt;1 GB of drive space (although 10 GB is a recommended minimum if running Jenkins as a Docker container)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The next step, create a &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yaml&lt;/code&gt; file. And place your instructions into it.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;docker-compose.yaml&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;
version: '3.9'
services:
  jenkins:
    image: jenkins/jenkins:&lt;bold&gt;lts&lt;/bold&gt;
    ports:
      - 8080:8080
      - 50000:50000
    volumes:
      - ./jenkins_home:/var/jenkins_home/
    restart: always
    &lt;bold&gt;privileged: true&lt;/bold&gt;
    &lt;bold&gt;user: root&lt;/bold&gt;
&lt;/pre&gt;

&lt;p&gt;The above docker-compose file grants its admin permission by &lt;code class=&quot;highlighter-rouge&quot;&gt;privileged: true&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;user: root&lt;/code&gt;. And mounting &lt;code class=&quot;highlighter-rouge&quot;&gt;Jenkins&lt;/code&gt; folder to &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/jenkins_home&lt;/code&gt; inside the container’s instance.  Take a loot at &lt;a href=&quot;https://github.com/jenkinsci/docker&quot;&gt;Official Jenkins Docker image&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Navigate to the same folder where you place the &lt;em&gt;docker-compose.yaml&lt;/em&gt; file. Then expose your application up.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker-compose up -d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also use docker command directly.&lt;/p&gt;
&lt;pre&gt;
docker run \
-v $(pwd)/jenkins_home:/var/jenkins_home  \
-d  \
-p 8080:8080  \
-p 50000:50000  \
-u root \
jenkins/jenkins:lts 
&lt;/pre&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
The above command probably will run your Jenkins web application on a private network. If you can't access your Jenkins remotely(such as: running on a VPS), you can add &lt;code&gt;--net host&lt;/code&gt;  to use the &lt;code&gt;host&lt;/code&gt; network instead of using the default &lt;code&gt;bridge&lt;/code&gt;. You can run &lt;code&gt;docker network list&lt;/code&gt; to list all of available network objects on your machine.
&lt;/blockquote&gt;

&lt;p&gt;Docker compose with &lt;code class=&quot;highlighter-rouge&quot;&gt;host&lt;/code&gt; network mode:&lt;/p&gt;
&lt;pre&gt;
version: '3.9'
services:
  jenkins:
    image: jenkins/jenkins:lts
    volumes:
      - ./jenkins_home:/var/jenkins_home/
    restart: always
    privileged: true
    user: root
    &lt;red-bold&gt;network_mode: &quot;host&quot;&lt;/red-bold&gt;
&lt;/pre&gt;
&lt;p&gt;Or using docker command directly.&lt;/p&gt;
&lt;pre&gt;
docker run  \
-v $(pwd)/jenkins_home:/var/jenkins_home  \
-d  \
-u root  \
&lt;red-bold&gt;--net host&lt;/red-bold&gt;   \
jenkins/jenkins:lts
&lt;/pre&gt;
&lt;p&gt;The &lt;red-bold&gt;host&lt;/red-bold&gt; network mode instructs docker daemon to use your host’s network. So you &lt;b&gt;don’t&lt;/b&gt; need to specify the &lt;b&gt;ports mapping&lt;/b&gt; anymore(beacuase it directly runs on your host’s network). Once your Jenkins is running up,  access your Jenkins on the browser at &lt;a href=&quot;http://server_ip:8080&quot;&gt;server_ip:8080&lt;/a&gt;, the default port is &lt;code class=&quot;highlighter-rouge&quot;&gt;8080&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You will see someting like this for setup wizard.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;setup wizard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;check your initial admin password&lt;/p&gt;
&lt;pre&gt;
$ docker exec &amp;lt;containerid&amp;gt; cat /var/jenkins_home/secrets/initialAdminPassword
&lt;/pre&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;install plugins&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Add first admin user&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins Dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, a Jenkins instance is fully set up. And in the next articles, I will discuss how to use the Jenkins dashboard.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Install Jenkins Using Docker</title>
   <link href="http://localhost:4000/jenkins/2020/12/23/install-jenkins-on-docker/"/>
   <updated>2020-12-23T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/23/install-jenkins-on-docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/23/jenkins-tutorial/&quot; class=&quot;navi-link&quot;&gt;Jenkins&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
        
        
            &lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;navi-link&quot;&gt;Jenkins Installation&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
        
    
  
    
        
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Install Jenkins Using Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;To get the start, you need to install Jenkins. There are plenty of ways you can achieve this goal. You can build from source code, run war file in Java, or run from a Docker image. etc.&lt;/p&gt;

&lt;p&gt;Generally, Jenkins provides two major releases, &lt;strong&gt;weekly&lt;/strong&gt; and &lt;strong&gt;lts&lt;/strong&gt;. &lt;strong&gt;&lt;em&gt;Weekly&lt;/em&gt;&lt;/strong&gt;, as the name says, new releases are produced weekly to deliver bug fixes and features to users and plugin developers. &lt;strong&gt;&lt;em&gt;lts&lt;/em&gt;&lt;/strong&gt;, every 12 weeks from the stream of regular releases as the stable release for that time period.&lt;/p&gt;

&lt;p&gt;Here, I am gonna illustrate that install Jenkins using Docker. If you run Jenkins using Docker, you have to fit these prerequisites:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;A256 MB of RAM&lt;/li&gt;
  &lt;li&gt;1 GB of drive space (although 10 GB is a recommended minimum if running Jenkins as a Docker container)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The next step, create a &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yaml&lt;/code&gt; file. And place your instructions into it.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;docker-compose.yaml&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;
version: '3.9'
services:
  jenkins:
    image: jenkins/jenkins:&lt;bold&gt;lts&lt;/bold&gt;
    ports:
      - 8080:8080
      - 50000:50000
    volumes:
      - ./jenkins_home:/var/jenkins_home/
    restart: always
    &lt;bold&gt;privileged: true&lt;/bold&gt;
    &lt;bold&gt;user: root&lt;/bold&gt;
&lt;/pre&gt;

&lt;p&gt;The above docker-compose file grants its admin permission by &lt;code class=&quot;highlighter-rouge&quot;&gt;privileged: true&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;user: root&lt;/code&gt;. And mounting &lt;code class=&quot;highlighter-rouge&quot;&gt;Jenkins&lt;/code&gt; folder to &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/jenkins_home&lt;/code&gt; inside the container’s instance.  Take a loot at &lt;a href=&quot;https://github.com/jenkinsci/docker&quot;&gt;Official Jenkins Docker image&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Navigate to the same folder where you place the &lt;em&gt;docker-compose.yaml&lt;/em&gt; file. Then expose your application up.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker-compose up -d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also use docker command directly.&lt;/p&gt;
&lt;pre&gt;
docker run \
-v $(pwd)/jenkins_home:/var/jenkins_home  \
-d  \
-p 8080:8080  \
-p 50000:50000  \
-u root \
jenkins/jenkins:lts 
&lt;/pre&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
The above command probably will run your Jenkins web application on a private network. If you can't access your Jenkins remotely(such as: running on a VPS), you can add &lt;code&gt;--net host&lt;/code&gt;  to use the &lt;code&gt;host&lt;/code&gt; network instead of using the default &lt;code&gt;bridge&lt;/code&gt;. You can run &lt;code&gt;docker network list&lt;/code&gt; to list all of available network objects on your machine.
&lt;/blockquote&gt;

&lt;p&gt;Docker compose with &lt;code class=&quot;highlighter-rouge&quot;&gt;host&lt;/code&gt; network mode:&lt;/p&gt;
&lt;pre&gt;
version: '3.9'
services:
  jenkins:
    image: jenkins/jenkins:lts
    volumes:
      - ./jenkins_home:/var/jenkins_home/
    restart: always
    privileged: true
    user: root
    &lt;red-bold&gt;network_mode: &quot;host&quot;&lt;/red-bold&gt;
&lt;/pre&gt;
&lt;p&gt;Or using docker command directly.&lt;/p&gt;
&lt;pre&gt;
docker run  \
-v $(pwd)/jenkins_home:/var/jenkins_home  \
-d  \
-u root  \
&lt;red-bold&gt;--net host&lt;/red-bold&gt;   \
jenkins/jenkins:lts
&lt;/pre&gt;
&lt;p&gt;The &lt;red-bold&gt;host&lt;/red-bold&gt; network mode instructs docker daemon to use your host’s network. So you &lt;b&gt;don’t&lt;/b&gt; need to specify the &lt;b&gt;ports mapping&lt;/b&gt; anymore(beacuase it directly runs on your host’s network). Once your Jenkins is running up,  access your Jenkins on the browser at &lt;a href=&quot;http://server_ip:8080&quot;&gt;server_ip:8080&lt;/a&gt;, the default port is &lt;code class=&quot;highlighter-rouge&quot;&gt;8080&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You will see someting like this for setup wizard.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;setup wizard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;check your initial admin password&lt;/p&gt;
&lt;pre&gt;
$ docker exec &amp;lt;containerid&amp;gt; cat /var/jenkins_home/secrets/initialAdminPassword
&lt;/pre&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;install plugins&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Add first admin user&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-24-install-jenkins-on-docker-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Jenkins Dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, a Jenkins instance is fully set up. And in the next articles, I will discuss how to use the Jenkins dashboard.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Jenkins Tutorial</title>
   <link href="http://localhost:4000/jenkins/2020/12/23/jenkins-tutorial/"/>
   <updated>2020-12-23T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/23/jenkins-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Jenkins is used for automated continuous integration and continuous deployment. And it is an open-source continuous integration in support of DevOps. In Jenkins, you can set up an automated CI/CD process in a stable, convenient, and fast way.&lt;/p&gt;

&lt;p&gt;Let us assume a scenario that many developers commit and push their codes into the project repository. Then a test team continuously tests the codes. If codes pass the test, it will be integrated into the project, otherwise it will be sent back to the developer again for bugs fixing. The development team may push codes several times a day, and the test team may need to test the codes over and over again. This will be tedious for testers, as they do the same test repeatedly. As well as, the deployers also do the same tedious process (such as: same build and deploy operation).&lt;/p&gt;

&lt;p&gt;With Jenkins, all of these processes &lt;strong&gt;test&lt;/strong&gt;, &lt;strong&gt;build&lt;/strong&gt;, and &lt;strong&gt;deploy&lt;/strong&gt; can be configured for &lt;strong&gt;automated actions&lt;/strong&gt;. So once developers push their codes into the repository, the Jenkin will automatically pull the latest codes from the same repository, build these codes, test them, and deploy them(if the test &lt;strong&gt;passed&lt;/strong&gt;) for your web application.&lt;/p&gt;

&lt;p&gt;Let us dive into Jenkins’s journey!&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;item-link&quot;&gt;Jenkins Installation&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;item-link&quot;&gt;Jenkins Installation&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/&quot; class=&quot;item-link&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/&quot; class=&quot;item-link&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Jenkins Tutorial</title>
   <link href="http://localhost:4000/jenkins/2020/12/23/jenkins-tutorial/"/>
   <updated>2020-12-23T09:03:01+08:00</updated>
   <id>http://localhost:4000/jenkins/2020/12/23/jenkins-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Jenkins&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Jenkins is used for automated continuous integration and continuous deployment. And it is an open-source continuous integration in support of DevOps. In Jenkins, you can set up an automated CI/CD process in a stable, convenient, and fast way.&lt;/p&gt;

&lt;p&gt;Let us assume a scenario that many developers commit and push their codes into the project repository. Then a test team continuously tests the codes. If codes pass the test, it will be integrated into the project, otherwise it will be sent back to the developer again for bugs fixing. The development team may push codes several times a day, and the test team may need to test the codes over and over again. This will be tedious for testers, as they do the same test repeatedly. As well as, the deployers also do the same tedious process (such as: same build and deploy operation).&lt;/p&gt;

&lt;p&gt;With Jenkins, all of these processes &lt;strong&gt;test&lt;/strong&gt;, &lt;strong&gt;build&lt;/strong&gt;, and &lt;strong&gt;deploy&lt;/strong&gt; can be configured for &lt;strong&gt;automated actions&lt;/strong&gt;. So once developers push their codes into the repository, the Jenkin will automatically pull the latest codes from the same repository, build these codes, test them, and deploy them(if the test &lt;strong&gt;passed&lt;/strong&gt;) for your web application.&lt;/p&gt;

&lt;p&gt;Let us dive into Jenkins’s journey!&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;item-link&quot;&gt;Jenkins Installation&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/27/jenkins-installation/&quot; class=&quot;item-link&quot;&gt;Jenkins Installation&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
      
      
      
      
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/&quot; class=&quot;item-link&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
      
      
      
      
                &lt;li&gt;&lt;a href=&quot;/jenkins/2020/12/30/Jenkins-with-asp-net-core-CI-CD-pipeline-for-linux/&quot; class=&quot;item-link&quot;&gt;Jenkins with asp.net core CI&amp;amp;CD pipeline for Linux&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker Orchestration</title>
   <link href="http://localhost:4000/docker/2020/12/22/docker-orchestration/"/>
   <updated>2020-12-22T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/22/docker-orchestration</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Orchestration&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;It is time to discuss the docker orchestration now. We have talked a lot about docker, and it is time ready for production. Let us think about a scenario that you managed a microservice with tens, hundreds, or thousands of container instances. It is rough to deploy and manage these containers, and even it is impossible by manually. And hence, the orchestration comes into play, with orchestration all of these becomes easier and convenient. Orchestration offers you a reliable way to deploy, scale, network, volume and manage, etc.&lt;/p&gt;

&lt;p&gt;At present, the most popular orchestration for containerization is &lt;a href=&quot;https://kubernetes.io/&quot;&gt;Kubernetes&lt;/a&gt;, which is provided by Google. Docker also gives its own orchestration, which is &lt;a href=&quot;https://docs.docker.com/get-started/swarm-deploy/&quot;&gt;Docker Swarm&lt;/a&gt;. Kubernetes is more complex, features, and hard to learn than Docker Swarm. If you want to get to know more about Kubernetes, you can take a look at &lt;a href=&quot;https://kubernetes.io/docs/tutorials/kubernetes-basics/&quot;&gt;Learn Kubernetes Basics&lt;/a&gt;.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Orchestration</title>
   <link href="http://localhost:4000/docker/2020/12/22/docker-orchestration/"/>
   <updated>2020-12-22T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/22/docker-orchestration</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Orchestration&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;It is time to discuss the docker orchestration now. We have talked a lot about docker, and it is time ready for production. Let us think about a scenario that you managed a microservice with tens, hundreds, or thousands of container instances. It is rough to deploy and manage these containers, and even it is impossible by manually. And hence, the orchestration comes into play, with orchestration all of these becomes easier and convenient. Orchestration offers you a reliable way to deploy, scale, network, volume and manage, etc.&lt;/p&gt;

&lt;p&gt;At present, the most popular orchestration for containerization is &lt;a href=&quot;https://kubernetes.io/&quot;&gt;Kubernetes&lt;/a&gt;, which is provided by Google. Docker also gives its own orchestration, which is &lt;a href=&quot;https://docs.docker.com/get-started/swarm-deploy/&quot;&gt;Docker Swarm&lt;/a&gt;. Kubernetes is more complex, features, and hard to learn than Docker Swarm. If you want to get to know more about Kubernetes, you can take a look at &lt;a href=&quot;https://kubernetes.io/docs/tutorials/kubernetes-basics/&quot;&gt;Learn Kubernetes Basics&lt;/a&gt;.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Webhooks</title>
   <link href="http://localhost:4000/docker/2020/12/20/docker-hub-webhooks/"/>
   <updated>2020-12-20T09:05:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/20/docker-hub-webhooks</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Webhooks&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;In the preceding articles that we have talked about &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build/&quot;&gt;Docker Hub Automated Build&lt;/a&gt; and &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/16/docker-hub-automated-test/&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;. In this episode that we continue to talk about the Docker Hub Webhook. Docker Hub allows your webhooks to be triggered when new images were build up. This feature is for continuous deployment(CD). You should set up an open automated deployment web API, which will be used as Docker Hub Webhook.&lt;/p&gt;

&lt;h1 id=&quot;create-an-deployment-api&quot;&gt;Create An Deployment API&lt;/h1&gt;
&lt;p&gt;This API depends on your deployment workflow, such as whether if you are using k8s or &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/07/08/build-and-run-your-image/&quot;&gt;running a single docker image&lt;/a&gt;. Whatever types of API you are going to build, you should expose that API to the Internet. So the DockerHub can access your API.&lt;/p&gt;

&lt;p&gt;I found some useful tools that can help developers deploy automatic deployment process API.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://webhook.site/&quot;&gt;webhook.site&lt;/a&gt;: On their website, you can get a link. And this website will list out all of the payloads of your link. So it can help you analyze your payload.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt;: This is an open-source application fork from &lt;a href=&quot;https://github.com/Praisebetoscience/dockerhub-webhook&quot;&gt;Praisebetoscience/docker hub-webhook&lt;/a&gt; that is a simple server-side python script in a Flask framework.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I built an automated deployment process using &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt; and my &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation/blob/main/webhooks/docker-hub-cd-script.sh&quot;&gt;docker hub cd script&lt;/a&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-hub-cd-script.sh&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#! /bin/sh&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;script_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;docker-hub-cd-script.sh

&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;pid &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;pidof &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$script_name&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do
    if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-9&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pid&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi 
done

&lt;/span&gt;docker container stop docker-hub-automated-build-example

docker container rm docker-hub-automated-build-example

docker image rm &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; davidwxg/docker-hub-automated-build-example:latest

docker run &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 8000:8000 &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; docker-hub-automated-build-example davidwxg/docker-hub-automated-build-example:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This shell script will kill other instances of this script. Stop and remove the running container &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-hub-automated-build-example&lt;/code&gt;, Clean local images &lt;code class=&quot;highlighter-rouge&quot;&gt;davidwxg/docker-hub-automated-build-example:latest&lt;/code&gt;, and running up a container with the latest remote image.&lt;/p&gt;

&lt;p&gt;Then configure this script in &lt;code class=&quot;highlighter-rouge&quot;&gt;config.py&lt;/code&gt; in &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt; application&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HOOKS = {
         'repo1': {'latest':'docker-hub-cd-script.sh'}
        }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can get more information on &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Open source Docker Webhook&lt;/a&gt; and &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;docker-hub-CI-CD-explanation&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;set-up-webhooks&quot;&gt;Set up Webhooks&lt;/h1&gt;
&lt;p&gt;Open your docker hub dashboard, navigate to &lt;em&gt;webhooks&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-20-docker-hub-webhooks-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;building logs&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;This article discussed the Docker Hub webhook and according to the previous two articles &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build/&quot;&gt;Docker Hub Automated Builds&lt;/a&gt; and &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/16/docker-hub-automated-test/&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;. We built up a comprehensive, automated deployment system. Hope you can enjoy this, if you have any questions or advisements, please be free to comments at &lt;a href=&quot;https://disqus.com/&quot;&gt;DISQUS&lt;/a&gt; in the below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Webhooks</title>
   <link href="http://localhost:4000/docker/2020/12/20/docker-hub-webhooks/"/>
   <updated>2020-12-20T09:05:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/20/docker-hub-webhooks</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Webhooks&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;In the preceding articles that we have talked about &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build/&quot;&gt;Docker Hub Automated Build&lt;/a&gt; and &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/16/docker-hub-automated-test/&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;. In this episode that we continue to talk about the Docker Hub Webhook. Docker Hub allows your webhooks to be triggered when new images were build up. This feature is for continuous deployment(CD). You should set up an open automated deployment web API, which will be used as Docker Hub Webhook.&lt;/p&gt;

&lt;h1 id=&quot;create-an-deployment-api&quot;&gt;Create An Deployment API&lt;/h1&gt;
&lt;p&gt;This API depends on your deployment workflow, such as whether if you are using k8s or &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/07/08/build-and-run-your-image/&quot;&gt;running a single docker image&lt;/a&gt;. Whatever types of API you are going to build, you should expose that API to the Internet. So the DockerHub can access your API.&lt;/p&gt;

&lt;p&gt;I found some useful tools that can help developers deploy automatic deployment process API.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://webhook.site/&quot;&gt;webhook.site&lt;/a&gt;: On their website, you can get a link. And this website will list out all of the payloads of your link. So it can help you analyze your payload.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt;: This is an open-source application fork from &lt;a href=&quot;https://github.com/Praisebetoscience/dockerhub-webhook&quot;&gt;Praisebetoscience/docker hub-webhook&lt;/a&gt; that is a simple server-side python script in a Flask framework.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I built an automated deployment process using &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt; and my &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation/blob/main/webhooks/docker-hub-cd-script.sh&quot;&gt;docker hub cd script&lt;/a&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-hub-cd-script.sh&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#! /bin/sh&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;script_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;docker-hub-cd-script.sh

&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;pid &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;pidof &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$script_name&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do
    if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$$&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-9&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pid&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi 
done

&lt;/span&gt;docker container stop docker-hub-automated-build-example

docker container rm docker-hub-automated-build-example

docker image rm &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; davidwxg/docker-hub-automated-build-example:latest

docker run &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 8000:8000 &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; docker-hub-automated-build-example davidwxg/docker-hub-automated-build-example:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This shell script will kill other instances of this script. Stop and remove the running container &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-hub-automated-build-example&lt;/code&gt;, Clean local images &lt;code class=&quot;highlighter-rouge&quot;&gt;davidwxg/docker-hub-automated-build-example:latest&lt;/code&gt;, and running up a container with the latest remote image.&lt;/p&gt;

&lt;p&gt;Then configure this script in &lt;code class=&quot;highlighter-rouge&quot;&gt;config.py&lt;/code&gt; in &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Docker Webhook&lt;/a&gt; application&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HOOKS = {
         'repo1': {'latest':'docker-hub-cd-script.sh'}
        }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can get more information on &lt;a href=&quot;https://github.com/voltwu/docker-hub-webhook&quot;&gt;Open source Docker Webhook&lt;/a&gt; and &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;docker-hub-CI-CD-explanation&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;set-up-webhooks&quot;&gt;Set up Webhooks&lt;/h1&gt;
&lt;p&gt;Open your docker hub dashboard, navigate to &lt;em&gt;webhooks&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-20-docker-hub-webhooks-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;building logs&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;This article discussed the Docker Hub webhook and according to the previous two articles &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build/&quot;&gt;Docker Hub Automated Builds&lt;/a&gt; and &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/16/docker-hub-automated-test/&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;. We built up a comprehensive, automated deployment system. Hope you can enjoy this, if you have any questions or advisements, please be free to comments at &lt;a href=&quot;https://disqus.com/&quot;&gt;DISQUS&lt;/a&gt; in the below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Automated Tests</title>
   <link href="http://localhost:4000/docker/2020/12/16/docker-hub-automated-test/"/>
   <updated>2020-12-16T09:02:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/16/docker-hub-automated-test</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the preceding article, we discussed the &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build&quot;&gt;automated builds mechanism on the Docker Hub&lt;/a&gt;. And another cool feature of Docker Hub is the Automated Tests functionality.&lt;/p&gt;

&lt;p&gt;Docker Hub enables you to build images from the source code, which needs to pass the tests. When you &lt;strong&gt;configured&lt;/strong&gt; automated tests, &lt;strong&gt;the Docker Hub only builds the images when the tests passed&lt;/strong&gt;. If an image failed on the tests, then it won’t be pushed into your docker hub registry.&lt;/p&gt;

&lt;p&gt;It is easy to set up an automatic tests pipeline on Docker Hub.&lt;/p&gt;

&lt;h1 id=&quot;enable-automatic-tests-on-the-docker-hub-dashboard&quot;&gt;Enable Automatic Tests on the docker hub dashboard&lt;/h1&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-16-docker-hub-automated-test-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;open automated test pipeline&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;set-up-automated-test-files&quot;&gt;Set up automated test files&lt;/h1&gt;
&lt;p&gt;Docker Hub will identity files ending with &lt;code class=&quot;highlighter-rouge&quot;&gt;.test.yml&lt;/code&gt; suffix as test files. If you specify more than one test file, the Docker Hub will run them sequentially.&lt;/p&gt;

&lt;p&gt;The test file should look like this:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;services:
 sut:
   build:
     context: .
   command: my_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;my_tests.sh&lt;/code&gt; file returns &lt;strong&gt;0&lt;/strong&gt; determines that the tests &lt;strong&gt;passed&lt;/strong&gt;, and &lt;strong&gt;fail&lt;/strong&gt; otherwise.&lt;/p&gt;

&lt;p&gt;In the preceding article, I created a Github repository &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation/&quot;&gt;Docker Hub CI/CD Explanation&lt;/a&gt; for demonstration. Here, I am going to add automatic test files for that repository.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;my project tests file architecture&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─tests
│  ├─unittest_api.py
│  └─unittest_module.py
├─docker-compose.test.yml
└─run_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.test.yml&lt;/code&gt; is a test yaml file, which will be executed by the Docker Hub Tests pipeline. You can add more test yaml files, and they will be executed sequentially.&lt;/p&gt;

&lt;p&gt;Let us take a look at my &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.test.yaml&lt;/code&gt; file contents.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;services:
 sut:
   build:
     context: .
   ports:
     - &quot;8000:8000&quot;
   command: run_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above snippet builds an image from the current directory and traffic the port to 8000 from 8000 inside the container. &lt;code class=&quot;highlighter-rouge&quot;&gt;command: run_tests.sh&lt;/code&gt; means that running the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; script after the image was build and the container was running up.&lt;/p&gt;

&lt;p&gt;The image will be pushed into your docker hub registry, only when the tests passed.(aka the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; returns code &lt;strong&gt;0&lt;/strong&gt;).&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
&lt;p&gt;In order to use &lt;code&gt;run_tests.sh&lt;/code&gt; script. You should make it executable and place it into the environment variables. Or specify the full executable file path in the &lt;code&gt;services.sut.command&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Grant script executable and add it into environment variables with &lt;code&gt;ENV&lt;/code&gt; in Dockerfile. &lt;br /&gt;Example:
&lt;br /&gt;
  &lt;code&gt;
  RUN chmod +x /usr/src/app/run_tests.sh
  &lt;/code&gt;
&lt;br /&gt;
  &lt;code&gt;
  ENV PATH=&quot;/usr/src/app&quot;
  &lt;/code&gt;
&lt;br /&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; is a simple Linux script, which was made to customize this demo project’s test for this article. You can change this script to fit your project’s tests.&lt;/p&gt;

&lt;p&gt;In this example, the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; file will execute all unit test files under the &lt;code class=&quot;highlighter-rouge&quot;&gt;tests&lt;/code&gt; directory.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; contents:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-CMD&quot;&gt;#! /bin/bash
# run all unit test files that file name start with &quot;unittest&quot; under &quot;test&quot; dir.
for dir in $(ls tests -1FA | grep &quot;^unittest&quot;); 
    do python3 tests/$dir; 
done
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I hope I made this article clear, and if there was something not clear, please be free to leave it in the comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Automated Tests</title>
   <link href="http://localhost:4000/docker/2020/12/16/docker-hub-automated-test/"/>
   <updated>2020-12-16T09:02:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/16/docker-hub-automated-test</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the preceding article, we discussed the &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/12/15/docker-hub-automated-build&quot;&gt;automated builds mechanism on the Docker Hub&lt;/a&gt;. And another cool feature of Docker Hub is the Automated Tests functionality.&lt;/p&gt;

&lt;p&gt;Docker Hub enables you to build images from the source code, which needs to pass the tests. When you &lt;strong&gt;configured&lt;/strong&gt; automated tests, &lt;strong&gt;the Docker Hub only builds the images when the tests passed&lt;/strong&gt;. If an image failed on the tests, then it won’t be pushed into your docker hub registry.&lt;/p&gt;

&lt;p&gt;It is easy to set up an automatic tests pipeline on Docker Hub.&lt;/p&gt;

&lt;h1 id=&quot;enable-automatic-tests-on-the-docker-hub-dashboard&quot;&gt;Enable Automatic Tests on the docker hub dashboard&lt;/h1&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-16-docker-hub-automated-test-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;open automated test pipeline&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;set-up-automated-test-files&quot;&gt;Set up automated test files&lt;/h1&gt;
&lt;p&gt;Docker Hub will identity files ending with &lt;code class=&quot;highlighter-rouge&quot;&gt;.test.yml&lt;/code&gt; suffix as test files. If you specify more than one test file, the Docker Hub will run them sequentially.&lt;/p&gt;

&lt;p&gt;The test file should look like this:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;services:
 sut:
   build:
     context: .
   command: my_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;my_tests.sh&lt;/code&gt; file returns &lt;strong&gt;0&lt;/strong&gt; determines that the tests &lt;strong&gt;passed&lt;/strong&gt;, and &lt;strong&gt;fail&lt;/strong&gt; otherwise.&lt;/p&gt;

&lt;p&gt;In the preceding article, I created a Github repository &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation/&quot;&gt;Docker Hub CI/CD Explanation&lt;/a&gt; for demonstration. Here, I am going to add automatic test files for that repository.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;my project tests file architecture&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─tests
│  ├─unittest_api.py
│  └─unittest_module.py
├─docker-compose.test.yml
└─run_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.test.yml&lt;/code&gt; is a test yaml file, which will be executed by the Docker Hub Tests pipeline. You can add more test yaml files, and they will be executed sequentially.&lt;/p&gt;

&lt;p&gt;Let us take a look at my &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.test.yaml&lt;/code&gt; file contents.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;services:
 sut:
   build:
     context: .
   ports:
     - &quot;8000:8000&quot;
   command: run_tests.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above snippet builds an image from the current directory and traffic the port to 8000 from 8000 inside the container. &lt;code class=&quot;highlighter-rouge&quot;&gt;command: run_tests.sh&lt;/code&gt; means that running the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; script after the image was build and the container was running up.&lt;/p&gt;

&lt;p&gt;The image will be pushed into your docker hub registry, only when the tests passed.(aka the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; returns code &lt;strong&gt;0&lt;/strong&gt;).&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
&lt;p&gt;In order to use &lt;code&gt;run_tests.sh&lt;/code&gt; script. You should make it executable and place it into the environment variables. Or specify the full executable file path in the &lt;code&gt;services.sut.command&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Grant script executable and add it into environment variables with &lt;code&gt;ENV&lt;/code&gt; in Dockerfile. &lt;br /&gt;Example:
&lt;br /&gt;
  &lt;code&gt;
  RUN chmod +x /usr/src/app/run_tests.sh
  &lt;/code&gt;
&lt;br /&gt;
  &lt;code&gt;
  ENV PATH=&quot;/usr/src/app&quot;
  &lt;/code&gt;
&lt;br /&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; is a simple Linux script, which was made to customize this demo project’s test for this article. You can change this script to fit your project’s tests.&lt;/p&gt;

&lt;p&gt;In this example, the &lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; file will execute all unit test files under the &lt;code class=&quot;highlighter-rouge&quot;&gt;tests&lt;/code&gt; directory.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;run_tests.sh&lt;/code&gt; contents:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-CMD&quot;&gt;#! /bin/bash
# run all unit test files that file name start with &quot;unittest&quot; under &quot;test&quot; dir.
for dir in $(ls tests -1FA | grep &quot;^unittest&quot;); 
    do python3 tests/$dir; 
done
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I hope I made this article clear, and if there was something not clear, please be free to leave it in the comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Automated Builds</title>
   <link href="http://localhost:4000/docker/2020/12/15/docker-hub-automated-build/"/>
   <updated>2020-12-15T09:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/15/docker-hub-automated-build</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Hi, Guys! I am back here. In this episode, I am going to show you how to implement a continuous integration mechanism with Docker Hub and Github.&lt;/p&gt;

&lt;p&gt;Let’s assume a scenario that if a team is developing a project, developers responsible for their own part of this project, and they will push their source code to the repository. As a project manager, you certainly don’t want to rebuild and deploy the project manually over and over again. Here, the CI/CD is coming to play.&lt;/p&gt;

&lt;p&gt;This article only focuses on continuous integration(CI) based on Github and Docker Hub.&lt;/p&gt;

&lt;h1 id=&quot;sign-in-to-your-github-and-docker-hub-account&quot;&gt;Sign in to your Github and Docker Hub account.&lt;/h1&gt;
&lt;p&gt;Sign in your &lt;a href=&quot;https://github.com/&quot;&gt;GitHub&lt;/a&gt; and &lt;a href=&quot;https://hub.docker.com/&quot;&gt;Docker Hub&lt;/a&gt;, or register one if don’t have them. I create a repository &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;docker-hub-CI-CD-explanation&lt;/a&gt; and &lt;a href=&quot;https://hub.docker.com/r/davidwxg/docker-hub-automated-build-example&quot;&gt;docker-hub-automated-build-example&lt;/a&gt; for demonstration in this article.&lt;/p&gt;
&lt;h1 id=&quot;create-a-github-repository&quot;&gt;Create a Github repository.&lt;/h1&gt;
&lt;p&gt;I created a Github repository named &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;Docker Hub CI CD Explanation&lt;/a&gt; for next demonstration. 
And I created two branches, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branches.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;main and dev branches&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The  &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch is for the production environment and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch is for the development environment. Developers push their code into the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, and then the project manager merges the merge request of &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; into the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch once developer finished a comprehensive unit.&lt;/p&gt;

&lt;p&gt;As for this demonstration, I created a simple python common gateway interface(Python CGI) web application with simple file structures. If you are unfamiliar with the python CGI program, take look at the &lt;a href=&quot;https://voltwu.github.io/blog/python/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module/&quot;&gt;Python Running A CGI Web Server With http.server Module&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;CGI Web Example File Structures:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─cgi-bin
│  └─hello.py
└─index.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;add-dockerfile&quot;&gt;Add Dockerfile&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; will be used by Docker Hub when &lt;a href=&quot;https://docs.docker.com/docker-hub/builds/&quot;&gt;Docker Hub Automatic Build Mechanism&lt;/a&gt; builds your images. So the Dockerfile is the guide, which instructs Docker Hub that how to build your images. In this article, I create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; on both &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branches. Currently, The file structures should look like this.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;file structures on branch: main&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─Dockerfile
└─README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;file structures on branch: dev&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─cgi-bin
│  └─hello.py
├─index.py
├─Dockerfile
└─README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As I will set two automatic builds on both &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branches in the later, so I need Dockerfile on each of them.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch is used for the development environment, once developers push their codes into &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, then the Docker Hub will automatically build up a development image.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch is used for the production environment, once the project manager merges the request from the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, then Docker Hub will automatically build up a production image.&lt;/p&gt;

&lt;h1 id=&quot;create-a-docker-hub-repository-and-set-automated-builds&quot;&gt;Create a Docker Hub repository and set automated builds&lt;/h1&gt;
&lt;p&gt;Sign in to your Docker Hub account. Navigate to &lt;em&gt;Account Settings&lt;/em&gt; &amp;gt; &lt;em&gt;Linked Accounts&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;linked account on docker hub&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Currently, the docker hub supports linking accounts to &lt;a href=&quot;http://github.com/&quot;&gt;Github&lt;/a&gt; and &lt;a href=&quot;https://bitbucket.org/&quot;&gt;Bitbucket&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When you finished linking accounts, then create a repository(&lt;em&gt;repositories&lt;/em&gt; &amp;gt; &lt;em&gt;Create Repository&lt;/em&gt;). 
I created a repository, which named &lt;em&gt;docker-hub-automated-build-example&lt;/em&gt; for the demonstration.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub simple example&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, I need set up the Automated Builds, click the &lt;strong&gt;&lt;em&gt;Builds&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds example&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Connect to an external repository source, and choose your organization and selected a repository.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds configuration&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;As you can see from the above configuration, I configured two Build Rules, which are for the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch and the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch. The &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; as its tag, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev-latest&lt;/code&gt; as its tag.&lt;/p&gt;

&lt;p&gt;You can also specify the tag as its source type, and then the automated builds will be triggered when new tags are created&lt;/p&gt;

&lt;p&gt;Click the &lt;strong&gt;&lt;em&gt;Create and Build&lt;/em&gt;&lt;/strong&gt; button in the right bottom of this page. Then after few minutes, you will see your images.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds results&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;test&quot;&gt;Test&lt;/h1&gt;
&lt;p&gt;The first time relatively takes more time, which really depends on the bandwidth and dependency size. In this example, both branches build images successfully. If your building failed, you can take a look at the detailed logs. for example:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-g.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;take a look at the recent builds&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-h.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;building logs&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, let us create a merge request on &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch and merge this request on the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch. When you finished the merge request, the Docker Hub will automatically retry to build a new image on the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch.&lt;/p&gt;

&lt;p&gt;Here, a simple synopsis of the leading steps in this article:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Add Dockerfile on Github or Bitbucket&lt;/li&gt;
  &lt;li&gt;Setup automatical build on Docker Hub&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Automated Builds</title>
   <link href="http://localhost:4000/docker/2020/12/15/docker-hub-automated-build/"/>
   <updated>2020-12-15T09:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/15/docker-hub-automated-build</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Hi, Guys! I am back here. In this episode, I am going to show you how to implement a continuous integration mechanism with Docker Hub and Github.&lt;/p&gt;

&lt;p&gt;Let’s assume a scenario that if a team is developing a project, developers responsible for their own part of this project, and they will push their source code to the repository. As a project manager, you certainly don’t want to rebuild and deploy the project manually over and over again. Here, the CI/CD is coming to play.&lt;/p&gt;

&lt;p&gt;This article only focuses on continuous integration(CI) based on Github and Docker Hub.&lt;/p&gt;

&lt;h1 id=&quot;sign-in-to-your-github-and-docker-hub-account&quot;&gt;Sign in to your Github and Docker Hub account.&lt;/h1&gt;
&lt;p&gt;Sign in your &lt;a href=&quot;https://github.com/&quot;&gt;GitHub&lt;/a&gt; and &lt;a href=&quot;https://hub.docker.com/&quot;&gt;Docker Hub&lt;/a&gt;, or register one if don’t have them. I create a repository &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;docker-hub-CI-CD-explanation&lt;/a&gt; and &lt;a href=&quot;https://hub.docker.com/r/davidwxg/docker-hub-automated-build-example&quot;&gt;docker-hub-automated-build-example&lt;/a&gt; for demonstration in this article.&lt;/p&gt;
&lt;h1 id=&quot;create-a-github-repository&quot;&gt;Create a Github repository.&lt;/h1&gt;
&lt;p&gt;I created a Github repository named &lt;a href=&quot;https://github.com/voltwu/docker-hub-CI-CD-explanation&quot;&gt;Docker Hub CI CD Explanation&lt;/a&gt; for next demonstration. 
And I created two branches, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branches.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;main and dev branches&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The  &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch is for the production environment and &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch is for the development environment. Developers push their code into the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, and then the project manager merges the merge request of &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; into the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch once developer finished a comprehensive unit.&lt;/p&gt;

&lt;p&gt;As for this demonstration, I created a simple python common gateway interface(Python CGI) web application with simple file structures. If you are unfamiliar with the python CGI program, take look at the &lt;a href=&quot;https://voltwu.github.io/blog/python/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module/&quot;&gt;Python Running A CGI Web Server With http.server Module&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;CGI Web Example File Structures:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─cgi-bin
│  └─hello.py
└─index.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;add-dockerfile&quot;&gt;Add Dockerfile&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; will be used by Docker Hub when &lt;a href=&quot;https://docs.docker.com/docker-hub/builds/&quot;&gt;Docker Hub Automatic Build Mechanism&lt;/a&gt; builds your images. So the Dockerfile is the guide, which instructs Docker Hub that how to build your images. In this article, I create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; on both &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branches. Currently, The file structures should look like this.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;file structures on branch: main&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─Dockerfile
└─README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;file structures on branch: dev&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├─cgi-bin
│  └─hello.py
├─index.py
├─Dockerfile
└─README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As I will set two automatic builds on both &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branches in the later, so I need Dockerfile on each of them.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch is used for the development environment, once developers push their codes into &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, then the Docker Hub will automatically build up a development image.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch is used for the production environment, once the project manager merges the request from the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch, then Docker Hub will automatically build up a production image.&lt;/p&gt;

&lt;h1 id=&quot;create-a-docker-hub-repository-and-set-automated-builds&quot;&gt;Create a Docker Hub repository and set automated builds&lt;/h1&gt;
&lt;p&gt;Sign in to your Docker Hub account. Navigate to &lt;em&gt;Account Settings&lt;/em&gt; &amp;gt; &lt;em&gt;Linked Accounts&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;linked account on docker hub&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Currently, the docker hub supports linking accounts to &lt;a href=&quot;http://github.com/&quot;&gt;Github&lt;/a&gt; and &lt;a href=&quot;https://bitbucket.org/&quot;&gt;Bitbucket&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When you finished linking accounts, then create a repository(&lt;em&gt;repositories&lt;/em&gt; &amp;gt; &lt;em&gt;Create Repository&lt;/em&gt;). 
I created a repository, which named &lt;em&gt;docker-hub-automated-build-example&lt;/em&gt; for the demonstration.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub simple example&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, I need set up the Automated Builds, click the &lt;strong&gt;&lt;em&gt;Builds&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds example&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Connect to an external repository source, and choose your organization and selected a repository.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds configuration&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;As you can see from the above configuration, I configured two Build Rules, which are for the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch and the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch. The &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; as its tag, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;dev-latest&lt;/code&gt; as its tag.&lt;/p&gt;

&lt;p&gt;You can also specify the tag as its source type, and then the automated builds will be triggered when new tags are created&lt;/p&gt;

&lt;p&gt;Click the &lt;strong&gt;&lt;em&gt;Create and Build&lt;/em&gt;&lt;/strong&gt; button in the right bottom of this page. Then after few minutes, you will see your images.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;docker hub automated builds results&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;test&quot;&gt;Test&lt;/h1&gt;
&lt;p&gt;The first time relatively takes more time, which really depends on the bandwidth and dependency size. In this example, both branches build images successfully. If your building failed, you can take a look at the detailed logs. for example:&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-g.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;take a look at the recent builds&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-12-15-docker-hub-automated-build-h.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;building logs&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now, let us create a merge request on &lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt; branch and merge this request on the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch. When you finished the merge request, the Docker Hub will automatically retry to build a new image on the &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; branch.&lt;/p&gt;

&lt;p&gt;Here, a simple synopsis of the leading steps in this article:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Add Dockerfile on Github or Bitbucket&lt;/li&gt;
  &lt;li&gt;Setup automatical build on Docker Hub&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Introduction</title>
   <link href="http://localhost:4000/docker/2020/12/14/docker-hub-introduction/"/>
   <updated>2020-12-14T08:01:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/14/docker-hub-introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Introduction&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this blog, I’m gotta show you how to use the docker hub. As the &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your images on docker hub&lt;/a&gt; has already explained its principal functionalities(take a look at &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your images on docker hub&lt;/a&gt; if you are not familair), and hence, I won’t explain it here again. This blog will explain other cool things about the docker hub for you. If you have any doubts or questions, please feel free to comments.&lt;/p&gt;

&lt;p&gt;The primary thing is to sign up for the &lt;a href=&quot;https://hub.docker.com/&quot;&gt;docker page&lt;/a&gt;. Finish all requirements and email verification, then when you have done, sign in your account and access your dashboard.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-08-14-docker-hub-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;As you can see from the above dashboard, the principal advantages of docker page include that provide plenty of images, store and retrieve images, secure your account, etc.&lt;/p&gt;

&lt;p&gt;When you create your repository, you can decide whether it’s private or public. A private repository means that only you can view it. Instead, a public repository means that anyone can view it. At present, the Docker hub is not completely free, and it provides two plan types, one is the free plan, the other one is the premium plan. The free plan only allows you to create only one private repository, and the premium doesn’ t  have the limitation on the numbers of creating private repositories.&lt;/p&gt;

&lt;p&gt;The Explore area provides you all public repositories, such as those public repositories that you created.  Note that the private repository won’t list in the search result.&lt;/p&gt;

&lt;p&gt;The Docker Hub also allows you to create an organization, which enables you to control who can create or view repositories as well as push or pull image changes.&lt;/p&gt;

&lt;p&gt;If you have any questions, you can take a look at the &lt;a href=&quot;https://docs.docker.com/docker-hub/&quot;&gt;documentation&lt;/a&gt;, or ask for help on &lt;a href=&quot;https://forums.docker.com/&quot;&gt;docker forums&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Hub Introduction</title>
   <link href="http://localhost:4000/docker/2020/12/14/docker-hub-introduction/"/>
   <updated>2020-12-14T08:01:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/12/14/docker-hub-introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;navi-link&quot;&gt;Docker Hub&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub Introduction&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this blog, I’m gotta show you how to use the docker hub. As the &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your images on docker hub&lt;/a&gt; has already explained its principal functionalities(take a look at &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your images on docker hub&lt;/a&gt; if you are not familair), and hence, I won’t explain it here again. This blog will explain other cool things about the docker hub for you. If you have any doubts or questions, please feel free to comments.&lt;/p&gt;

&lt;p&gt;The primary thing is to sign up for the &lt;a href=&quot;https://hub.docker.com/&quot;&gt;docker page&lt;/a&gt;. Finish all requirements and email verification, then when you have done, sign in your account and access your dashboard.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-08-14-docker-hub-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker dashboard&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;As you can see from the above dashboard, the principal advantages of docker page include that provide plenty of images, store and retrieve images, secure your account, etc.&lt;/p&gt;

&lt;p&gt;When you create your repository, you can decide whether it’s private or public. A private repository means that only you can view it. Instead, a public repository means that anyone can view it. At present, the Docker hub is not completely free, and it provides two plan types, one is the free plan, the other one is the premium plan. The free plan only allows you to create only one private repository, and the premium doesn’ t  have the limitation on the numbers of creating private repositories.&lt;/p&gt;

&lt;p&gt;The Explore area provides you all public repositories, such as those public repositories that you created.  Note that the private repository won’t list in the search result.&lt;/p&gt;

&lt;p&gt;The Docker Hub also allows you to create an organization, which enables you to control who can create or view repositories as well as push or pull image changes.&lt;/p&gt;

&lt;p&gt;If you have any questions, you can take a look at the &lt;a href=&quot;https://docs.docker.com/docker-hub/&quot;&gt;documentation&lt;/a&gt;, or ask for help on &lt;a href=&quot;https://forums.docker.com/&quot;&gt;docker forums&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Deploy with Docker Compose and Nginx basic authentification</title>
   <link href="http://localhost:4000/docker/2020/11/05/docker-compose-nginx-basic-authentification/"/>
   <updated>2020-11-05T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/11/05/docker-compose-nginx-basic-authentification</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Through the previous three articles, we had set up a registry server with basic authentification. However, it all depends on the Docker commands, which maybe seems a little tedious. Another disadvantage of only work with docker commands is that the docker isn’t that flexible for advanced authentification at present. Hence, I am going to introduce Ngnix for the next coming articles for much-advanced authentification.&lt;/p&gt;

&lt;p&gt;As I mentioned in the title, this article only illustrates the basic authentification, no advanced in here. I am going to use another way(Compose and Ngnix) to implements an authentification mechanism that is analogous to that of as we did in the previous three articles. So, this article max together all we learned in the preceding registry articles. If you have any problems during this article, don’t worry, you can follow the guild hint I marked to explore more details.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;Docker Installed&lt;/li&gt;
  &lt;li&gt;Docker Composed Installed&lt;/li&gt;
  &lt;li&gt;A domain and SSL certificate files&lt;/li&gt;
  &lt;li&gt;Nginx Installed&lt;/li&gt;
  &lt;li&gt;the htpasswd file&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;First, you have to have the Docker and Docker-Compose installed on your machine. Docker Compose is just a tool, which makes docker much more convenient to use. Take a look at the &lt;a href=&quot;https://docs.docker.com/compose/&quot;&gt;official document&lt;/a&gt; for more detailed information.&lt;/p&gt;

&lt;p&gt;A domain is also required, which is for generating certificate files for secure connection over https. As I mentioned in &lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;, https over IP connection is also possible, but it faces some revoking risks. Here, I highly recommend having a domain name. You can follow the &lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot;&gt;guide&lt;/a&gt; for generating your domain’s certificate files.&lt;/p&gt;

&lt;p&gt;Another required component is the Nginx, which we are going to use its basic authentification and traffic forwarding functionalities. So make sure you had Nginx installed on your machine.&lt;/p&gt;

&lt;p&gt;The htpasswd file stores the users and their passwords, then use this file in the Nginx or Docker Registry Image for achieving a basic authentication(Nginx authentication in this example). In the previous blog, I’ve shown how to generate a htpasswd file from a docker image, which will redirect the outputs to the user’s local machine. But it seems tedious if your image doesn’t have the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; unity available. Here, I’ll generate a htpasswd file on my local, as I am working on Debian, so I need to install the apache utils packages(the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; unity is in the &lt;code class=&quot;highlighter-rouge&quot;&gt;apache2-utils&lt;/code&gt; package for &lt;code class=&quot;highlighter-rouge&quot;&gt;Debian&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Ubuntu&lt;/code&gt;, or &lt;code class=&quot;highlighter-rouge&quot;&gt;httpd-tools&lt;/code&gt; package for &lt;code class=&quot;highlighter-rouge&quot;&gt;RHEL&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;CentOS&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;Oracle&lt;/code&gt; Linux).&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~
$ mkdir -p registry/auth &amp;amp;&amp;amp; cd registry/auth
$ apt-get update
$ apt-get install -y apache2-utils
$ htpasswd -c htpasswd user
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Follow the prompt for the password, and it will save the &lt;code class=&quot;highlighter-rouge&quot;&gt;user&lt;/code&gt; and its password in the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; file(with the &lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; flag to create a new file). If you want to create additional user-password pairs, then omit the &lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; flag because the file already exists.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
&lt;p&gt;If you are running Nginx out of the docker image. I highly don't recommend to use bcrypt, because Nginx doesn't support very well on bcrypt password. Since bcrypt is not supported within &lt;code&gt;auth_basic&lt;/code&gt; ATM, mysterious 500 errors can be found in nginx &lt;code&gt;error.log&lt;/code&gt;, (usually found at &lt;code&gt;/var/log/nginx/error.log&lt;/code&gt;). For more information, take a look at &lt;a href=&quot;https://stackoverflow.com/questions/31833583/nginx-gives-an-internal-server-error-500-after-i-have-configured-basic-auth&quot;&gt;Nginx gives an Internal Server Error 500 after I have configured basic auth&lt;/a&gt; &lt;/p&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;lets-start&quot;&gt;Let’s start&lt;/h1&gt;
&lt;p&gt;Start your registry with a Compose file. If you are unfamiliar with Docker Compose, take a look at &lt;a href=&quot;https://www.digitalocean.com/community/questions/ubuntu-ufw-firewall-not-working-at-all&quot;&gt;docker compose&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~ 
$ madir -p registry/data &amp;amp;&amp;amp; cd registry
$ touch docker-compose.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Open your &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; file, paste the following snippet into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;version: &quot;3.3&quot;
services:
        registry:
                restart: always
                image: registry:2.7
                ports:
                        - 5000:5000
                volumes:
                        - ./data:/var/lib/registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then Running your registry up through &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Now, you’ve got a registry running up. The next step is to set a traffic forwarding to &lt;a href=&quot;localhost:5000&quot;&gt;localhost:5000&lt;/a&gt; through the Nginx.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. Copy certificate and the htpasswd into under the nginx&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # copy htpasswd
$ cd ~/registry
$ cp -r auth /etc/nginx/conf.d
$ 
$ # copy certificate
$ mkdir -p /etc/nginx/conf.d/cert
$ cp /etc/letsencrypt/live/your.domain /etc/nginx/conf.d/cert
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let’s take a look at the file structure.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── conf.d
│   ├── auth
│   │   └── htpasswd
│   └── cert
│       ├── fullchain.pem
│       └── privkey.pem
├── nginx.conf
├── ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2. Deploy the configuration&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Open your nginx configuration file(&lt;em&gt;var/nginx/nginx.conf&lt;/em&gt;) and paste the following snippet into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;events {
    worker_connections  1024;
}
http {
  upstream docker-registry {
    server localhost:5000;
  }
  ## Set a variable to help us decide if we need to add the
  ## 'Docker-Distribution-Api-Version' header.
  ## The registry always sets this header.
  ## In the case of nginx performing auth, the header is unset
  ## since nginx is auth-ing before proxying.
  map $upstream_http_docker_distribution_api_version $docker_distribution_api_version {
    '' 'registry/2.0';
  }
  server {
    listen 443 ssl;
    server_name YOURDOMAIN;

    # SSL
    ssl_certificate /etc/nginx/conf.d/cert/fullchain.pem;
    ssl_certificate_key /etc/nginx/conf.d/cert/privkey.pem;

    # Recommendations from https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html
    ssl_protocols TLSv1.1 TLSv1.2;
    ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;

    # disable any limits to avoid HTTP 413 for large image uploads
    client_max_body_size 0;

    # required to avoid HTTP 411: see Issue #1486 (https://github.com/moby/moby/issues/1486)
    chunked_transfer_encoding on;

    location /v2/ {
      # Do not allow connections from docker 1.5 and earlier
      # docker pre-1.6.0 did not properly set the user agent on ping, catch &quot;Go *&quot; user agents
      if ($http_user_agent ~ &quot;^(docker\/1\.(3|4|5(?!\.[0-9]-dev))|Go ).*$&quot; ) {
        return 404;
      }

      # To add basic authentication to v2 use auth_basic setting.
      auth_basic &quot;Registry realm&quot;;
      auth_basic_user_file /etc/nginx/conf.d/auth/htpasswd;

      ## If $docker_distribution_api_version is empty, the header is not added.
      ## See the map directive above where this variable is defined.
      add_header 'Docker-Distribution-Api-Version' $docker_distribution_api_version always;

      proxy_pass                          http://docker-registry;
      proxy_set_header  Host              $http_host;   # required for docker client's sake
      proxy_set_header  X-Real-IP         $remote_addr; # pass on real client's IP
      proxy_set_header  X-Forwarded-For   $proxy_add_x_forwarded_for;
      proxy_set_header  X-Forwarded-Proto $scheme;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;YOURDOMAIN&lt;/code&gt; with your domain name. The &lt;code class=&quot;highlighter-rouge&quot;&gt;ssl_certificate&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;ssl_certificate_key&lt;/code&gt; specify your certificate file path and private key. And the &lt;code class=&quot;highlighter-rouge&quot;&gt;auth_basic_user_file&lt;/code&gt; specifies your authentication file path. &lt;code class=&quot;highlighter-rouge&quot;&gt;server localhost:5000&lt;/code&gt; represent that listen on IP address &lt;strong&gt;&lt;em&gt;localhost&lt;/em&gt;&lt;/strong&gt; and port &lt;strong&gt;&lt;em&gt;5000&lt;/em&gt;&lt;/strong&gt;, which should be your registry server address.&lt;/p&gt;

&lt;p&gt;Use the following snippet to test whether your configuration is correct.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nginx -t -c /etc/nginx/nginx.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to track the errors, open your error log. Error log locate at &lt;code class=&quot;highlighter-rouge&quot;&gt;var/log/nginx/error.log&lt;/code&gt; by default, and access log locate at &lt;code class=&quot;highlighter-rouge&quot;&gt;var/log/nginx/access.log&lt;/code&gt; by default.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ tail -f /var/log/nginx/error.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;3. Firewall block the registry’s port&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As we use an Nginx sit in front of our registry, and we also verify the user’s authority based on Nginx authentication mechanism. So, a critical issue is that the user may bypass the domain, directly access the IP and port address instead. As we don’t have any authentication protected over the registry, and hence it should be forbidden or redirect the IP traffic on the registry port(in this example, it is &lt;code class=&quot;highlighter-rouge&quot;&gt;5000&lt;/code&gt;). I am running this example on Debian, and I choose to use the &lt;a href=&quot;https://wiki.ubuntu.com/UncomplicatedFirewall&quot;&gt;UFW&lt;/a&gt; for achieving the firewall block on the 5000 port. As UFW and Docker have conflicts in &lt;a href=&quot;https://en.wikipedia.org/wiki/Iptables&quot;&gt;iptables&lt;/a&gt;, so UFW and Docker may not work well together. To make it work, we have to change some configurations on UFW or Docker demon. For more information, please follow the &lt;a href=&quot;https://www.digitalocean.com/community/questions/ubuntu-ufw-firewall-not-working-at-all&quot;&gt;Ubuntu - ufw firewall not working at all&lt;/a&gt; and &lt;a href=&quot;https://stackoverflow.com/questions/49549834/ufw-firewall-is-not-working-on-ubuntu-in-digitalocean/49563279#49563279&quot;&gt;UFW firewall is not working on Ubuntu in DigitalOcean&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Install ufw on debian or stop the ufw unity(if you’ve the ufw installed already).&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install ufw
$ sudo ufw disable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As UFW and Docker have conflicts in iptables, so UFW and Docker may not work well together. To make the ufw works well, you need add these lines at the end of &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/ufw/after.rules&lt;/code&gt;, or add &lt;code class=&quot;highlighter-rouge&quot;&gt;DOCKER_OPTS=&quot;--iptables=false&quot;&lt;/code&gt; on Docker deamon configuration file. For more information, look at the &lt;a href=&quot;https://stackoverflow.com/questions/49549834/ufw-firewall-is-not-working-on-ubuntu-in-digitalocean/49563279#49563279&quot;&gt;UFW firewall is not working on Ubuntu in DigitalOcean&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# BEGIN UFW AND DOCKER
*filter
:ufw-user-forward - [0:0]
:DOCKER-USER - [0:0]
-A DOCKER-USER -j RETURN -s 10.0.0.0/8
-A DOCKER-USER -j RETURN -s 172.16.0.0/12
-A DOCKER-USER -j RETURN -s 192.168.0.0/16

-A DOCKER-USER -p udp -m udp --sport 53 --dport 1024:65535 -j RETURN

-A DOCKER-USER -j ufw-user-forward

-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 192.168.0.0/16
-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 10.0.0.0/8
-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 172.16.0.0/12
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 192.168.0.0/16
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 10.0.0.0/8
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 172.16.0.0/12

-A DOCKER-USER -j RETURN
COMMIT
# END UFW AND DOCKER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set up a firewall, and block the port &lt;strong&gt;&lt;em&gt;5000&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ufw default deny incoming
$ sudo ufw default allow outgoing
$ # enable ssh(the 22, the default ssh port), 80, 443 and other port you want
$ sudo ufw allow 22/tcp
$ sudo ufw allow 80/tcp
$ sudo ufw allow 443/tcp
$ # block the port 5000, because we don't want client directly access the IP:5000 connect to our registry.
$ sudo ufw deny 5000/tcp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you finish your set up, then enable your ufw.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ufw enable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When all configurations set up correctly, then you can enjoy your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull hello-world
$ docker login yourdomain:port
$ docker tag hello-world yourdomain:port/hello-world
$ docker push yourdomain:port/hello-world
$ docker logout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;The whole set up seems a little complex, but I separate them in detailed steps. And I made detailed explanations of each step to make it simple. You should follow me step by step, and if you got errors, please debug them separately to locate the issues. 
I have summed them up in the following order.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Run your registry up on port 5000(or other port you like).&lt;/li&gt;
  &lt;li&gt;Install the Nginx software(You can use the Nginx image, then you don’t have to install Nginx software in your local machine.).&lt;/li&gt;
  &lt;li&gt;Deploy the Nginx configurations for reverse proxy, SSL, and basic authentication(You can tail the error log, if you have set up problems &lt;code class=&quot;highlighter-rouge&quot;&gt;tail -f /var/log/nginx/error.log&lt;/code&gt;).&lt;/li&gt;
  &lt;li&gt;Block the 5000 port to avoid abused access on IP.(I use ufw in this example, but you can choose whatever else firewall software you like.)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;if you have any questions or suggestions, please be free to leave comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Deploy with Docker Compose and Nginx basic authentification</title>
   <link href="http://localhost:4000/docker/2020/11/05/docker-compose-nginx-basic-authentification/"/>
   <updated>2020-11-05T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/11/05/docker-compose-nginx-basic-authentification</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Through the previous three articles, we had set up a registry server with basic authentification. However, it all depends on the Docker commands, which maybe seems a little tedious. Another disadvantage of only work with docker commands is that the docker isn’t that flexible for advanced authentification at present. Hence, I am going to introduce Ngnix for the next coming articles for much-advanced authentification.&lt;/p&gt;

&lt;p&gt;As I mentioned in the title, this article only illustrates the basic authentification, no advanced in here. I am going to use another way(Compose and Ngnix) to implements an authentification mechanism that is analogous to that of as we did in the previous three articles. So, this article max together all we learned in the preceding registry articles. If you have any problems during this article, don’t worry, you can follow the guild hint I marked to explore more details.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;Docker Installed&lt;/li&gt;
  &lt;li&gt;Docker Composed Installed&lt;/li&gt;
  &lt;li&gt;A domain and SSL certificate files&lt;/li&gt;
  &lt;li&gt;Nginx Installed&lt;/li&gt;
  &lt;li&gt;the htpasswd file&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;First, you have to have the Docker and Docker-Compose installed on your machine. Docker Compose is just a tool, which makes docker much more convenient to use. Take a look at the &lt;a href=&quot;https://docs.docker.com/compose/&quot;&gt;official document&lt;/a&gt; for more detailed information.&lt;/p&gt;

&lt;p&gt;A domain is also required, which is for generating certificate files for secure connection over https. As I mentioned in &lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;, https over IP connection is also possible, but it faces some revoking risks. Here, I highly recommend having a domain name. You can follow the &lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot;&gt;guide&lt;/a&gt; for generating your domain’s certificate files.&lt;/p&gt;

&lt;p&gt;Another required component is the Nginx, which we are going to use its basic authentification and traffic forwarding functionalities. So make sure you had Nginx installed on your machine.&lt;/p&gt;

&lt;p&gt;The htpasswd file stores the users and their passwords, then use this file in the Nginx or Docker Registry Image for achieving a basic authentication(Nginx authentication in this example). In the previous blog, I’ve shown how to generate a htpasswd file from a docker image, which will redirect the outputs to the user’s local machine. But it seems tedious if your image doesn’t have the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; unity available. Here, I’ll generate a htpasswd file on my local, as I am working on Debian, so I need to install the apache utils packages(the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; unity is in the &lt;code class=&quot;highlighter-rouge&quot;&gt;apache2-utils&lt;/code&gt; package for &lt;code class=&quot;highlighter-rouge&quot;&gt;Debian&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Ubuntu&lt;/code&gt;, or &lt;code class=&quot;highlighter-rouge&quot;&gt;httpd-tools&lt;/code&gt; package for &lt;code class=&quot;highlighter-rouge&quot;&gt;RHEL&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;CentOS&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;Oracle&lt;/code&gt; Linux).&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~
$ mkdir -p registry/auth &amp;amp;&amp;amp; cd registry/auth
$ apt-get update
$ apt-get install -y apache2-utils
$ htpasswd -c htpasswd user
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Follow the prompt for the password, and it will save the &lt;code class=&quot;highlighter-rouge&quot;&gt;user&lt;/code&gt; and its password in the &lt;code class=&quot;highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; file(with the &lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; flag to create a new file). If you want to create additional user-password pairs, then omit the &lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; flag because the file already exists.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt;
&lt;p&gt;If you are running Nginx out of the docker image. I highly don't recommend to use bcrypt, because Nginx doesn't support very well on bcrypt password. Since bcrypt is not supported within &lt;code&gt;auth_basic&lt;/code&gt; ATM, mysterious 500 errors can be found in nginx &lt;code&gt;error.log&lt;/code&gt;, (usually found at &lt;code&gt;/var/log/nginx/error.log&lt;/code&gt;). For more information, take a look at &lt;a href=&quot;https://stackoverflow.com/questions/31833583/nginx-gives-an-internal-server-error-500-after-i-have-configured-basic-auth&quot;&gt;Nginx gives an Internal Server Error 500 after I have configured basic auth&lt;/a&gt; &lt;/p&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;lets-start&quot;&gt;Let’s start&lt;/h1&gt;
&lt;p&gt;Start your registry with a Compose file. If you are unfamiliar with Docker Compose, take a look at &lt;a href=&quot;https://www.digitalocean.com/community/questions/ubuntu-ufw-firewall-not-working-at-all&quot;&gt;docker compose&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd ~ 
$ madir -p registry/data &amp;amp;&amp;amp; cd registry
$ touch docker-compose.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Open your &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; file, paste the following snippet into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;version: &quot;3.3&quot;
services:
        registry:
                restart: always
                image: registry:2.7
                ports:
                        - 5000:5000
                volumes:
                        - ./data:/var/lib/registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then Running your registry up through &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Now, you’ve got a registry running up. The next step is to set a traffic forwarding to &lt;a href=&quot;localhost:5000&quot;&gt;localhost:5000&lt;/a&gt; through the Nginx.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. Copy certificate and the htpasswd into under the nginx&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # copy htpasswd
$ cd ~/registry
$ cp -r auth /etc/nginx/conf.d
$ 
$ # copy certificate
$ mkdir -p /etc/nginx/conf.d/cert
$ cp /etc/letsencrypt/live/your.domain /etc/nginx/conf.d/cert
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let’s take a look at the file structure.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── conf.d
│   ├── auth
│   │   └── htpasswd
│   └── cert
│       ├── fullchain.pem
│       └── privkey.pem
├── nginx.conf
├── ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2. Deploy the configuration&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Open your nginx configuration file(&lt;em&gt;var/nginx/nginx.conf&lt;/em&gt;) and paste the following snippet into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;events {
    worker_connections  1024;
}
http {
  upstream docker-registry {
    server localhost:5000;
  }
  ## Set a variable to help us decide if we need to add the
  ## 'Docker-Distribution-Api-Version' header.
  ## The registry always sets this header.
  ## In the case of nginx performing auth, the header is unset
  ## since nginx is auth-ing before proxying.
  map $upstream_http_docker_distribution_api_version $docker_distribution_api_version {
    '' 'registry/2.0';
  }
  server {
    listen 443 ssl;
    server_name YOURDOMAIN;

    # SSL
    ssl_certificate /etc/nginx/conf.d/cert/fullchain.pem;
    ssl_certificate_key /etc/nginx/conf.d/cert/privkey.pem;

    # Recommendations from https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html
    ssl_protocols TLSv1.1 TLSv1.2;
    ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;

    # disable any limits to avoid HTTP 413 for large image uploads
    client_max_body_size 0;

    # required to avoid HTTP 411: see Issue #1486 (https://github.com/moby/moby/issues/1486)
    chunked_transfer_encoding on;

    location /v2/ {
      # Do not allow connections from docker 1.5 and earlier
      # docker pre-1.6.0 did not properly set the user agent on ping, catch &quot;Go *&quot; user agents
      if ($http_user_agent ~ &quot;^(docker\/1\.(3|4|5(?!\.[0-9]-dev))|Go ).*$&quot; ) {
        return 404;
      }

      # To add basic authentication to v2 use auth_basic setting.
      auth_basic &quot;Registry realm&quot;;
      auth_basic_user_file /etc/nginx/conf.d/auth/htpasswd;

      ## If $docker_distribution_api_version is empty, the header is not added.
      ## See the map directive above where this variable is defined.
      add_header 'Docker-Distribution-Api-Version' $docker_distribution_api_version always;

      proxy_pass                          http://docker-registry;
      proxy_set_header  Host              $http_host;   # required for docker client's sake
      proxy_set_header  X-Real-IP         $remote_addr; # pass on real client's IP
      proxy_set_header  X-Forwarded-For   $proxy_add_x_forwarded_for;
      proxy_set_header  X-Forwarded-Proto $scheme;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;YOURDOMAIN&lt;/code&gt; with your domain name. The &lt;code class=&quot;highlighter-rouge&quot;&gt;ssl_certificate&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;ssl_certificate_key&lt;/code&gt; specify your certificate file path and private key. And the &lt;code class=&quot;highlighter-rouge&quot;&gt;auth_basic_user_file&lt;/code&gt; specifies your authentication file path. &lt;code class=&quot;highlighter-rouge&quot;&gt;server localhost:5000&lt;/code&gt; represent that listen on IP address &lt;strong&gt;&lt;em&gt;localhost&lt;/em&gt;&lt;/strong&gt; and port &lt;strong&gt;&lt;em&gt;5000&lt;/em&gt;&lt;/strong&gt;, which should be your registry server address.&lt;/p&gt;

&lt;p&gt;Use the following snippet to test whether your configuration is correct.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ nginx -t -c /etc/nginx/nginx.config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to track the errors, open your error log. Error log locate at &lt;code class=&quot;highlighter-rouge&quot;&gt;var/log/nginx/error.log&lt;/code&gt; by default, and access log locate at &lt;code class=&quot;highlighter-rouge&quot;&gt;var/log/nginx/access.log&lt;/code&gt; by default.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ tail -f /var/log/nginx/error.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;3. Firewall block the registry’s port&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As we use an Nginx sit in front of our registry, and we also verify the user’s authority based on Nginx authentication mechanism. So, a critical issue is that the user may bypass the domain, directly access the IP and port address instead. As we don’t have any authentication protected over the registry, and hence it should be forbidden or redirect the IP traffic on the registry port(in this example, it is &lt;code class=&quot;highlighter-rouge&quot;&gt;5000&lt;/code&gt;). I am running this example on Debian, and I choose to use the &lt;a href=&quot;https://wiki.ubuntu.com/UncomplicatedFirewall&quot;&gt;UFW&lt;/a&gt; for achieving the firewall block on the 5000 port. As UFW and Docker have conflicts in &lt;a href=&quot;https://en.wikipedia.org/wiki/Iptables&quot;&gt;iptables&lt;/a&gt;, so UFW and Docker may not work well together. To make it work, we have to change some configurations on UFW or Docker demon. For more information, please follow the &lt;a href=&quot;https://www.digitalocean.com/community/questions/ubuntu-ufw-firewall-not-working-at-all&quot;&gt;Ubuntu - ufw firewall not working at all&lt;/a&gt; and &lt;a href=&quot;https://stackoverflow.com/questions/49549834/ufw-firewall-is-not-working-on-ubuntu-in-digitalocean/49563279#49563279&quot;&gt;UFW firewall is not working on Ubuntu in DigitalOcean&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Install ufw on debian or stop the ufw unity(if you’ve the ufw installed already).&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install ufw
$ sudo ufw disable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As UFW and Docker have conflicts in iptables, so UFW and Docker may not work well together. To make the ufw works well, you need add these lines at the end of &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/ufw/after.rules&lt;/code&gt;, or add &lt;code class=&quot;highlighter-rouge&quot;&gt;DOCKER_OPTS=&quot;--iptables=false&quot;&lt;/code&gt; on Docker deamon configuration file. For more information, look at the &lt;a href=&quot;https://stackoverflow.com/questions/49549834/ufw-firewall-is-not-working-on-ubuntu-in-digitalocean/49563279#49563279&quot;&gt;UFW firewall is not working on Ubuntu in DigitalOcean&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# BEGIN UFW AND DOCKER
*filter
:ufw-user-forward - [0:0]
:DOCKER-USER - [0:0]
-A DOCKER-USER -j RETURN -s 10.0.0.0/8
-A DOCKER-USER -j RETURN -s 172.16.0.0/12
-A DOCKER-USER -j RETURN -s 192.168.0.0/16

-A DOCKER-USER -p udp -m udp --sport 53 --dport 1024:65535 -j RETURN

-A DOCKER-USER -j ufw-user-forward

-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 192.168.0.0/16
-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 10.0.0.0/8
-A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 172.16.0.0/12
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 192.168.0.0/16
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 10.0.0.0/8
-A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 172.16.0.0/12

-A DOCKER-USER -j RETURN
COMMIT
# END UFW AND DOCKER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set up a firewall, and block the port &lt;strong&gt;&lt;em&gt;5000&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ufw default deny incoming
$ sudo ufw default allow outgoing
$ # enable ssh(the 22, the default ssh port), 80, 443 and other port you want
$ sudo ufw allow 22/tcp
$ sudo ufw allow 80/tcp
$ sudo ufw allow 443/tcp
$ # block the port 5000, because we don't want client directly access the IP:5000 connect to our registry.
$ sudo ufw deny 5000/tcp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you finish your set up, then enable your ufw.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ufw enable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When all configurations set up correctly, then you can enjoy your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull hello-world
$ docker login yourdomain:port
$ docker tag hello-world yourdomain:port/hello-world
$ docker push yourdomain:port/hello-world
$ docker logout
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;The whole set up seems a little complex, but I separate them in detailed steps. And I made detailed explanations of each step to make it simple. You should follow me step by step, and if you got errors, please debug them separately to locate the issues. 
I have summed them up in the following order.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Run your registry up on port 5000(or other port you like).&lt;/li&gt;
  &lt;li&gt;Install the Nginx software(You can use the Nginx image, then you don’t have to install Nginx software in your local machine.).&lt;/li&gt;
  &lt;li&gt;Deploy the Nginx configurations for reverse proxy, SSL, and basic authentication(You can tail the error log, if you have set up problems &lt;code class=&quot;highlighter-rouge&quot;&gt;tail -f /var/log/nginx/error.log&lt;/code&gt;).&lt;/li&gt;
  &lt;li&gt;Block the 5000 port to avoid abused access on IP.(I use ufw in this example, but you can choose whatever else firewall software you like.)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;if you have any questions or suggestions, please be free to leave comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Add User and Password Authentification</title>
   <link href="http://localhost:4000/docker/2020/09/30/add-user-and-password-authentification/"/>
   <updated>2020-09-30T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/30/add-user-and-password-authentification</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Add User and Password Authentification&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;At present, through the previous two articles, you have a public and SSL secured registry for against network sniff attack. However, this is not enough for private registries. Any private registries should have some kind of authentification and restrict access, and only authorized users can access the registry.  The authentification and restrict access mitigates the risk of abuse.&lt;/p&gt;

&lt;p&gt;This article leads you to achieve basic authentification most simply through htpasswd. You can distribute users and their passwords, and users must do authentification first before do any registry operation.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;An open and SSL protected registry is running up. If you don’t know how to set up, please review the previous two articles.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;lets-start&quot;&gt;Let’s start&lt;/h1&gt;
&lt;p&gt;It’s easy to set up a user and password authentification through the htpasswd module, which is the Apache’s constituent. 
There are two steps for setting up authentification, first is to generate your password file, and then apply your password file to your registry container.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Generate a password file
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir auth
$ docker run \
  --entrypoint htpasswd \
  registry:2.7.0 -Bbn youruser yourpassword &amp;gt; auth/htpasswd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;The above snippet created a user &lt;code class=&quot;highlighter-rouge&quot;&gt;youruser&lt;/code&gt; and password &lt;code class=&quot;highlighter-rouge&quot;&gt;yourpassword&lt;/code&gt; in the file &lt;code class=&quot;highlighter-rouge&quot;&gt;auth/htpasswd&lt;/code&gt; in the &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt; image.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; 
&lt;p&gt;
All docker args come before the docker image. Whose args are for &lt;code&gt;htpasswd&lt;/code&gt;, which is the &lt;code&gt;-Bbn&lt;/code&gt;. 
&lt;/p&gt;
&lt;p&gt;
The &lt;code&gt;-Bbn&lt;/code&gt; represents to use bcrypt, run in bash, and standard output. See the &lt;a href=&quot;https://httpd.apache.org/docs/2.4/programs/htpasswd.html&quot;&gt;htpasswd - Manage user files for basic authentication&lt;/a&gt; for more information.
&lt;/p&gt;
&lt;p&gt;
Don't use &lt;code&gt;registry:2.7&lt;/code&gt; for the password file generate, because &lt;code&gt;htpasswd&lt;/code&gt; doesn't exist in the &lt;code&gt;registry:2.7&lt;/code&gt; image. You should use &lt;code&gt;registry:2.0&lt;/code&gt;, &lt;code&gt;registry:2.7.0&lt;/code&gt;, or others instead.
&lt;/p&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Once you finished. It’ll create a htpasswd file in your local machine, view &lt;a href=&quot;https://stackoverflow.com/questions/64112838/what-does-bbn-means-in-docker/64112969#comment113561122_64112969&quot;&gt;here&lt;/a&gt; to explore more details about the working mechanism of the above snippet.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls auth
htpasswd
$ cat auth/htpasswd
youruser:$2y$05$EmtDysYM8i42jUWp6qXg1.nSENd/b.A2ytile0TVETWzTfP4N/mp6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Apply your password file to the registry container
You can use the following snippet to apply your password file on your &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7.0&lt;/code&gt; container.
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run -d \
  --restart=always \
  --name registry \
  -v &quot;$(pwd)&quot;/auth:/auth \
  -e &quot;REGISTRY_AUTH=htpasswd&quot; \
  -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \
  -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/registry.vigourwu.xyz/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/registry.vigourwu.xyz/privkey.pem \
  -p 5050:5000 \
  registry:2.7.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Now, finally. A password secured registry is running up.&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker login registry.vigourwu.xyz:5050
$ docker tag ubuntu registry.vigourwu.xyz:5050/ubuntu
$ docker push registry.vigourwu.xyz:5050/ubuntu
$ docker pull registry.vigourwu.xyz:5050/ubuntu
$ docker logout registry.vigourwu.xyz:5050/ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;At this point, you know how to set up a password secured registry.  I have mentioned all the details in the process. By the way, in the previous article &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;, we built up a public registry without SSL and password, it should only be used in the testing environment. However, now our registry secured over SSL and password fits for the production environment.&lt;/p&gt;

&lt;p&gt;If you have any questions, please feel free to comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Add User and Password Authentification</title>
   <link href="http://localhost:4000/docker/2020/09/30/add-user-and-password-authentification/"/>
   <updated>2020-09-30T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/30/add-user-and-password-authentification</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Add User and Password Authentification&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;At present, through the previous two articles, you have a public and SSL secured registry for against network sniff attack. However, this is not enough for private registries. Any private registries should have some kind of authentification and restrict access, and only authorized users can access the registry.  The authentification and restrict access mitigates the risk of abuse.&lt;/p&gt;

&lt;p&gt;This article leads you to achieve basic authentification most simply through htpasswd. You can distribute users and their passwords, and users must do authentification first before do any registry operation.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;An open and SSL protected registry is running up. If you don’t know how to set up, please review the previous two articles.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;lets-start&quot;&gt;Let’s start&lt;/h1&gt;
&lt;p&gt;It’s easy to set up a user and password authentification through the htpasswd module, which is the Apache’s constituent. 
There are two steps for setting up authentification, first is to generate your password file, and then apply your password file to your registry container.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Generate a password file
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir auth
$ docker run \
  --entrypoint htpasswd \
  registry:2.7.0 -Bbn youruser yourpassword &amp;gt; auth/htpasswd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;The above snippet created a user &lt;code class=&quot;highlighter-rouge&quot;&gt;youruser&lt;/code&gt; and password &lt;code class=&quot;highlighter-rouge&quot;&gt;yourpassword&lt;/code&gt; in the file &lt;code class=&quot;highlighter-rouge&quot;&gt;auth/htpasswd&lt;/code&gt; in the &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt; image.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; 
&lt;p&gt;
All docker args come before the docker image. Whose args are for &lt;code&gt;htpasswd&lt;/code&gt;, which is the &lt;code&gt;-Bbn&lt;/code&gt;. 
&lt;/p&gt;
&lt;p&gt;
The &lt;code&gt;-Bbn&lt;/code&gt; represents to use bcrypt, run in bash, and standard output. See the &lt;a href=&quot;https://httpd.apache.org/docs/2.4/programs/htpasswd.html&quot;&gt;htpasswd - Manage user files for basic authentication&lt;/a&gt; for more information.
&lt;/p&gt;
&lt;p&gt;
Don't use &lt;code&gt;registry:2.7&lt;/code&gt; for the password file generate, because &lt;code&gt;htpasswd&lt;/code&gt; doesn't exist in the &lt;code&gt;registry:2.7&lt;/code&gt; image. You should use &lt;code&gt;registry:2.0&lt;/code&gt;, &lt;code&gt;registry:2.7.0&lt;/code&gt;, or others instead.
&lt;/p&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Once you finished. It’ll create a htpasswd file in your local machine, view &lt;a href=&quot;https://stackoverflow.com/questions/64112838/what-does-bbn-means-in-docker/64112969#comment113561122_64112969&quot;&gt;here&lt;/a&gt; to explore more details about the working mechanism of the above snippet.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls auth
htpasswd
$ cat auth/htpasswd
youruser:$2y$05$EmtDysYM8i42jUWp6qXg1.nSENd/b.A2ytile0TVETWzTfP4N/mp6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Apply your password file to the registry container
You can use the following snippet to apply your password file on your &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7.0&lt;/code&gt; container.
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run -d \
  --restart=always \
  --name registry \
  -v &quot;$(pwd)&quot;/auth:/auth \
  -e &quot;REGISTRY_AUTH=htpasswd&quot; \
  -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \
  -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/registry.vigourwu.xyz/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/registry.vigourwu.xyz/privkey.pem \
  -p 5050:5000 \
  registry:2.7.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Now, finally. A password secured registry is running up.&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker login registry.vigourwu.xyz:5050
$ docker tag ubuntu registry.vigourwu.xyz:5050/ubuntu
$ docker push registry.vigourwu.xyz:5050/ubuntu
$ docker pull registry.vigourwu.xyz:5050/ubuntu
$ docker logout registry.vigourwu.xyz:5050/ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;At this point, you know how to set up a password secured registry.  I have mentioned all the details in the process. By the way, in the previous article &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;, we built up a public registry without SSL and password, it should only be used in the testing environment. However, now our registry secured over SSL and password fits for the production environment.&lt;/p&gt;

&lt;p&gt;If you have any questions, please feel free to comments.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Secure your registry with SSL certificate</title>
   <link href="http://localhost:4000/docker/2020/09/21/secure-your-registry-with-ssl/"/>
   <updated>2020-09-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/21/secure-your-registry-with-ssl</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous article, we do achieve access registry from other hosts, but it’s insecure. The data transform between server and client can be sniffed or modified by malicious hackers. So, In this article, I will show you the first step for securing is that use an SLL certificate for production.&lt;/p&gt;

&lt;h1 id=&quot;prerequisite&quot;&gt;Prerequisite&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A running Docker registry.&lt;/li&gt;
  &lt;li&gt;A domain name or subdomain name.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;get-certificate&quot;&gt;Get Certificate&lt;/h1&gt;
&lt;p&gt;There are a couple of ways that you can get a certificate. You can buy from the certification authority(CA) or obtain it from free websites(&lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt;, &lt;a href=&quot;https://www.sslforfree.com/&quot;&gt;SSL For Free&lt;/a&gt;…).&lt;/p&gt;

&lt;p&gt;Here, I generated a certificate for my domain from &lt;em&gt;Let’s Encrypt&lt;/em&gt; command shell. &lt;em&gt;Let’s Encrypt&lt;/em&gt; command shell is convenient for generating public certificates. With a few steps, you’ll get your certificate. Once you finish, you’ll have the following files under &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt/live/registry.vigourwu.xyz&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ pwd
/etc/letsencrypt/live/registry.vigourwu.xyz
$ ls
cert.pem  chain.pem  fullchain.pem  privkey.pem  README
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You’ll get five files as the above, open the &lt;code class=&quot;highlighter-rouge&quot;&gt;README&lt;/code&gt; file. And it’ll tell you each file’s details. Here, the &lt;code class=&quot;highlighter-rouge&quot;&gt;fullchain.pem&lt;/code&gt; is a certificate file, and &lt;code class=&quot;highlighter-rouge&quot;&gt;privkey.pem&lt;/code&gt; is a private key file,  and when you use them, you don’t need to change the file name, just use it directly.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; Generate an SSL certificate from an IP address is possible, but it's rarely used. Certificates attached to IP address faces revoking risk, and it also doesn't have any help for DNS cache. For more see &lt;a href=&quot;https://stackoverflow.com/questions/2043617/is-it-possible-to-have-ssl-certificate-for-ip-address-not-domain-name&quot;&gt;Is it possible to have ssl certificate for ip address not domain?&lt;/a&gt;.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;run-your-registry-up-with-ssl-certificate&quot;&gt;Run your registry up with SSL certificate&lt;/h1&gt;
&lt;p&gt;There are plenty of ways you can set your SSL certificate over your registry connection. You can use Ngnix, Composefile ect.&lt;/p&gt;

&lt;p&gt;In the following example, I’ll use the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run&lt;/code&gt; command with &lt;code class=&quot;highlighter-rouge&quot;&gt;REGISTRY_HTTP_TLS_CERTIFICATE&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;REGISTRY_HTTP_TLS_KEY&lt;/code&gt; variable to set up an SSL connection.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d \
  --restart=always \
  --name registry \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:port_container \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/your.domain/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/your.domain/privkey.pem \
  -p port_host:port_container \
  registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;your.domain&lt;/code&gt; with your domain, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;port_host&lt;/code&gt; with your host’s port, and &lt;code class=&quot;highlighter-rouge&quot;&gt;port_container&lt;/code&gt; with your container’s port. You can specify your mount path through &lt;code class=&quot;highlighter-rouge&quot;&gt;-v&lt;/code&gt; variable. In the above mount example, you should make sure your certificate is under the path &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt/live/your.domain&lt;/code&gt; in your hostmachine.&lt;/p&gt;

&lt;p&gt;The following is my whole code snippet.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d \
  --restart=always \
  --name registry \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/registry.vigourwu.xyz/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/registry.vigourwu.xyz/privkey.pem \
  -p 5050:5000 \
  registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once your registry is running up, you can access your registry from other hosts with a secure connection over SSL. In the &lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot;&gt;previous article&lt;/a&gt;, we’ve discussed how to add insecure connection to a docker daemon. Here, As you are using SSL protected, so it is a secure connection, and hence you don’t need to add the registry address on the client docker daemon in the insecure connection configuration.&lt;/p&gt;

&lt;p&gt;As you can see from the above, I mounted the path &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt&lt;/code&gt; in local machine to &lt;code class=&quot;highlighter-rouge&quot;&gt;/certs&lt;/code&gt; in the container. Don’t mount the path that includes dots, which may cause unexpected errors.&lt;/p&gt;

&lt;p&gt;The following command got failed on my machine.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run \
  --restart=always \
  --name 2registry \
  -v /etc/letsencrypt/live/registry.vigourwu.xyz:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/privkey.pem \
  -p 5051:5000 \
  registry:2.7
time=&quot;2020-09-28T05:49:36.509990307Z&quot; level=warning msg=&quot;No HTTP secret provided - generated random secret. This may cause problems with uploads if multiple registries are behind a load-balancer. To provide a shared secret, fill in http.secret in the configuration file or set the REGISTRY_HTTP_SECRET environment variable.&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.511286456Z&quot; level=info msg=&quot;redis not configured&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.510525597Z&quot; level=info msg=&quot;Starting upload purge in 12m0s&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.526651206Z&quot; level=info msg=&quot;using inmemory blob descriptor cache&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.527667014Z&quot; level=fatal msg=&quot;open /certs/fullchain.pem: no such file or directory&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is because that the docker isn’t very compatible with dots. Hope docker will fix this bug in the future. You can check whether your docker support dots. But I highly recommended that don’t use dots or any other special character in your mounted path.&lt;/p&gt;

&lt;p&gt;SSL Checker is a great tool for checking is if a website has an SSL certificate on. If you follow the above steps strictly, then you’ll see all green right symbols on the &lt;a href=&quot;https://www.sslshopper.com/ssl-checker.html&quot;&gt;SSL Checker&lt;/a&gt;(There should not be any break symbols). Just as the following image.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-09-21-secure-your-registry-with-ssl-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;registry.vigourwu.xyz:5050 protected with SSL&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Once your Docker registry is running up, you can access your registry with secure connection from other hosts as the following snippet:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull redis
$ docker tag redis registry.vigourwu.xyz:5050/redis
$ docker push registry.vigourwu.xyz:5050/redis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Secure your registry with SSL certificate</title>
   <link href="http://localhost:4000/docker/2020/09/21/secure-your-registry-with-ssl/"/>
   <updated>2020-09-21T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/21/secure-your-registry-with-ssl</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous article, we do achieve access registry from other hosts, but it’s insecure. The data transform between server and client can be sniffed or modified by malicious hackers. So, In this article, I will show you the first step for securing is that use an SLL certificate for production.&lt;/p&gt;

&lt;h1 id=&quot;prerequisite&quot;&gt;Prerequisite&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A running Docker registry.&lt;/li&gt;
  &lt;li&gt;A domain name or subdomain name.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;get-certificate&quot;&gt;Get Certificate&lt;/h1&gt;
&lt;p&gt;There are a couple of ways that you can get a certificate. You can buy from the certification authority(CA) or obtain it from free websites(&lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt;, &lt;a href=&quot;https://www.sslforfree.com/&quot;&gt;SSL For Free&lt;/a&gt;…).&lt;/p&gt;

&lt;p&gt;Here, I generated a certificate for my domain from &lt;em&gt;Let’s Encrypt&lt;/em&gt; command shell. &lt;em&gt;Let’s Encrypt&lt;/em&gt; command shell is convenient for generating public certificates. With a few steps, you’ll get your certificate. Once you finish, you’ll have the following files under &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt/live/registry.vigourwu.xyz&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ pwd
/etc/letsencrypt/live/registry.vigourwu.xyz
$ ls
cert.pem  chain.pem  fullchain.pem  privkey.pem  README
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You’ll get five files as the above, open the &lt;code class=&quot;highlighter-rouge&quot;&gt;README&lt;/code&gt; file. And it’ll tell you each file’s details. Here, the &lt;code class=&quot;highlighter-rouge&quot;&gt;fullchain.pem&lt;/code&gt; is a certificate file, and &lt;code class=&quot;highlighter-rouge&quot;&gt;privkey.pem&lt;/code&gt; is a private key file,  and when you use them, you don’t need to change the file name, just use it directly.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; Generate an SSL certificate from an IP address is possible, but it's rarely used. Certificates attached to IP address faces revoking risk, and it also doesn't have any help for DNS cache. For more see &lt;a href=&quot;https://stackoverflow.com/questions/2043617/is-it-possible-to-have-ssl-certificate-for-ip-address-not-domain-name&quot;&gt;Is it possible to have ssl certificate for ip address not domain?&lt;/a&gt;.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;run-your-registry-up-with-ssl-certificate&quot;&gt;Run your registry up with SSL certificate&lt;/h1&gt;
&lt;p&gt;There are plenty of ways you can set your SSL certificate over your registry connection. You can use Ngnix, Composefile ect.&lt;/p&gt;

&lt;p&gt;In the following example, I’ll use the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run&lt;/code&gt; command with &lt;code class=&quot;highlighter-rouge&quot;&gt;REGISTRY_HTTP_TLS_CERTIFICATE&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;REGISTRY_HTTP_TLS_KEY&lt;/code&gt; variable to set up an SSL connection.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d \
  --restart=always \
  --name registry \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:port_container \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/your.domain/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/your.domain/privkey.pem \
  -p port_host:port_container \
  registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;your.domain&lt;/code&gt; with your domain, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;port_host&lt;/code&gt; with your host’s port, and &lt;code class=&quot;highlighter-rouge&quot;&gt;port_container&lt;/code&gt; with your container’s port. You can specify your mount path through &lt;code class=&quot;highlighter-rouge&quot;&gt;-v&lt;/code&gt; variable. In the above mount example, you should make sure your certificate is under the path &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt/live/your.domain&lt;/code&gt; in your hostmachine.&lt;/p&gt;

&lt;p&gt;The following is my whole code snippet.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -d \
  --restart=always \
  --name registry \
  -v /etc/letsencrypt:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/live/registry.vigourwu.xyz/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/live/registry.vigourwu.xyz/privkey.pem \
  -p 5050:5000 \
  registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once your registry is running up, you can access your registry from other hosts with a secure connection over SSL. In the &lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot;&gt;previous article&lt;/a&gt;, we’ve discussed how to add insecure connection to a docker daemon. Here, As you are using SSL protected, so it is a secure connection, and hence you don’t need to add the registry address on the client docker daemon in the insecure connection configuration.&lt;/p&gt;

&lt;p&gt;As you can see from the above, I mounted the path &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/letsencrypt&lt;/code&gt; in local machine to &lt;code class=&quot;highlighter-rouge&quot;&gt;/certs&lt;/code&gt; in the container. Don’t mount the path that includes dots, which may cause unexpected errors.&lt;/p&gt;

&lt;p&gt;The following command got failed on my machine.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run \
  --restart=always \
  --name 2registry \
  -v /etc/letsencrypt/live/registry.vigourwu.xyz:/certs \
  -e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \
  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/fullchain.pem \
  -e REGISTRY_HTTP_TLS_KEY=/certs/privkey.pem \
  -p 5051:5000 \
  registry:2.7
time=&quot;2020-09-28T05:49:36.509990307Z&quot; level=warning msg=&quot;No HTTP secret provided - generated random secret. This may cause problems with uploads if multiple registries are behind a load-balancer. To provide a shared secret, fill in http.secret in the configuration file or set the REGISTRY_HTTP_SECRET environment variable.&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.511286456Z&quot; level=info msg=&quot;redis not configured&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.510525597Z&quot; level=info msg=&quot;Starting upload purge in 12m0s&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.526651206Z&quot; level=info msg=&quot;using inmemory blob descriptor cache&quot; go.version=go1.11.2 instance.id=5a8e4808-6c2c-4104-ac0b-34ae23778442 service=registry version=v2.7.1 
time=&quot;2020-09-28T05:49:36.527667014Z&quot; level=fatal msg=&quot;open /certs/fullchain.pem: no such file or directory&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is because that the docker isn’t very compatible with dots. Hope docker will fix this bug in the future. You can check whether your docker support dots. But I highly recommended that don’t use dots or any other special character in your mounted path.&lt;/p&gt;

&lt;p&gt;SSL Checker is a great tool for checking is if a website has an SSL certificate on. If you follow the above steps strictly, then you’ll see all green right symbols on the &lt;a href=&quot;https://www.sslshopper.com/ssl-checker.html&quot;&gt;SSL Checker&lt;/a&gt;(There should not be any break symbols). Just as the following image.&lt;/p&gt;
&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-09-21-secure-your-registry-with-ssl-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;registry.vigourwu.xyz:5050 protected with SSL&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Once your Docker registry is running up, you can access your registry with secure connection from other hosts as the following snippet:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull redis
$ docker tag redis registry.vigourwu.xyz:5050/redis
$ docker push registry.vigourwu.xyz:5050/redis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Set up a docker registry on debian 4.6</title>
   <link href="http://localhost:4000/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/"/>
   <updated>2020-09-10T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/10/set-up-a-private-docker-registry-on-debian</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;This article will lead you to set up a registry step by step. It is pretty easy to set a registry up with a public registry image in Docker Hub. At the end of this lesson, you may ask more questions, such as how to secure your registry, how to distribute roles. All those advanced fundamentals I will discuss in the next articles, this one is only focusing on how to running up a registry and manage its repositories.&lt;/p&gt;

&lt;h1 id=&quot;warm-up&quot;&gt;Warm up&lt;/h1&gt;
&lt;p&gt;This article uses Docker Hub &lt;code class=&quot;highlighter-rouge&quot;&gt;registry&lt;/code&gt; repository, which you can view its latest version on &lt;a href=&quot;https://hub.docker.com/_/registry&quot;&gt;Docker Hub&lt;/a&gt;. By the way, at present(the latest version is &lt;code class=&quot;highlighter-rouge&quot;&gt;2.7.1&lt;/code&gt;), the registry repository only available on the linux platform, and hence be sure you have the right OS. My machine is &lt;code class=&quot;highlighter-rouge&quot;&gt;Debian 4.9&lt;/code&gt; and illustrates with &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;deploy-a-registry-server&quot;&gt;Deploy a registry server&lt;/h1&gt;
&lt;p&gt;Use the following snippet to run a registry server up.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run -d -p 5005:5000 --restart always --name registry registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code pulls the &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt; image from the docker hub and runs it as a container, which explored port 5000 to match port 5005 of the host.  &lt;code class=&quot;highlighter-rouge&quot;&gt;--restart always&lt;/code&gt; instructs the container to restart always when unexpected stops occur.&lt;/p&gt;

&lt;p&gt;As the opposite of launch from the raw command, you can use a &lt;a href=&quot;https://docs.docker.com/compose/gettingstarted/&quot;&gt;compose&lt;/a&gt; file instead. Put the following snippet into your &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;registry:
  restart: always
  image: registry:2.7
  ports:
    - 5005:5000
  container_name: registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then start up your application in the background by running &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up -d&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Now, a registry container is successfully running on your device. You can view it with the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps&lt;/code&gt; command.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                    NAMES
b90413c663ae        registry:2.7            &quot;/entrypoint.sh /etc…&quot;   4 hours ago         Up 4 hours          0.0.0.0:5005-&amp;gt;5000/tcp   registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;pushpull-images&quot;&gt;Push/Pull Images&lt;/h1&gt;
&lt;p&gt;You can access your docker registry from either localhost or other address. The way that you access your registry is the same way that you do on the docker hub. If you are don’t remember, you can review &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share Your Image On Docker Hub&lt;/a&gt; for more syntax details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Access from localhost:&lt;/strong&gt;
First, let us access from the localhost. Here, take the example with an &lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu&lt;/code&gt; image.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # pull a ubuntu image from docker hub
$ docker pull unbuntu
Using default tag: latest
latest: Pulling from library/ubuntu
e6ca3592b144: Pull complete 
534a5505201d: Pull complete 
990916bd23bb: Pull complete 
Digest: sha256:cbcf86d7781dbb3a6aa2bcea25403f6b0b443e20b9959165cf52d2cc9608e4b9
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest
$ 
$ docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              4e2eef94cd6b        3 weeks ago         73.9MB
$ 
$ # tag your ubuntu image into the localhost:5005/my-ubuntu
$ docker tag ubuntu localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Push the &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:5005/my-ubuntu&lt;/code&gt; to your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker push localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pull your &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:5005/my-ubuntu&lt;/code&gt; image back from your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above illustrates how to access the registry from local. However, you probably meet requirements that access from other hosts.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Access from other hosts:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker tag ubuntu xxx.xxx.xxx.xxx:port/my-ubuntu
$ 
$ docker push xxx.xxx.xxx.xxx:port/my-ubuntu
$ 
$ docker pull xxx.xxx.xxx.xxx:port/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;xxx.xxx.xxx.xxx:port&lt;/code&gt; with your &lt;code class=&quot;highlighter-rouge&quot;&gt;IP&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;PORT&lt;/code&gt;. If you are the first time to push a image from a client to a registry, you may encounter the following error.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Get https://xxx.xxx.xxx.xxx:port/v2/: http: server gave HTTP response to HTTPS client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is because the docker daemon has forbidden insecure connection like this. You should configure your daemon properly, open your &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/docker/daemon.json&lt;/code&gt;(&lt;code class=&quot;highlighter-rouge&quot;&gt;settings-&amp;gt;daemon&lt;/code&gt; in Docker Desktop) file in the client, and put the following contents into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ 
  &quot;insecure-registries&quot;:[&quot;xxx.xxx.xxx.xxx:port&quot;] 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then restart your docker deamon.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl daemon-reload
$ systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;images-management-in-registry&quot;&gt;Images management in registry&lt;/h1&gt;
&lt;p&gt;Now, you have images stored in your registry server. According to the &lt;a href=&quot;https://docs.docker.com/registry/deploying/#storage-customization&quot;&gt;official document&lt;/a&gt;, the registry server uses a &lt;a href=&quot;https://docs.docker.com/storage/volumes/&quot;&gt;volume&lt;/a&gt; for storing by default.&lt;/p&gt;

&lt;p&gt;List all volumes out through the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker volume ls&lt;/code&gt; command.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker volume ls
DRIVER              VOLUME NAME
local               faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may see more than one volume, find the registry one. Once you find it, then inspect its details.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker volume inspect faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2
[
    {
        &quot;CreatedAt&quot;: &quot;2020-09-16T13:22:35+08:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: null,
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2/_data&quot;,
        &quot;Name&quot;: &quot;faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    }
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Get inside the mount point folder, and list stored images.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd /var/lib/docker/volumes/faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2/_data
$ ls docker/registry/v2/repositories/
my-ubuntu  ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Image and folders are one to one relations, and the folder name is the image’s name. In this example, you can see that I have two images stored in this registry, and they are &lt;code class=&quot;highlighter-rouge&quot;&gt;my-ubuntu&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu&lt;/code&gt;. Get inside the folder, you can find more details, such as &lt;code class=&quot;highlighter-rouge&quot;&gt;layers&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;revisions&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;tags&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If you want to delete an image from the registry, the only thing you need to do is that delete the corresponding folder.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls
my-ubuntu  ubuntu
$ rm -rf my-ubuntu
$ ls
ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above snippet removed the &lt;code class=&quot;highlighter-rouge&quot;&gt;my-ubuntu&lt;/code&gt; image from the docker registry.&lt;/p&gt;

&lt;p&gt;As the opposite to inspect your volume details for registry storage location, you can get into a registry container for storage information instead. They both have the same result. At the present, your container is already running up, so use the following command to get inside it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -it &amp;lt;mycontainer&amp;gt; /bin/sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note, a registry container doesn’t have &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; installed by default, so you should use the &lt;code class=&quot;highlighter-rouge&quot;&gt;sh&lt;/code&gt; instead.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                    NAMES
d09c04a74c93        registry:2.7            &quot;/entrypoint.sh /etc…&quot;   3 days ago          Up 3 days           0.0.0.0:5005-&amp;gt;5000/tcp   registry
$ 
$ docker exec -it d09c04a74c93 /bin/sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/registry&lt;/code&gt; path stores the repositories.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -it d09c04a74c93 /bin/sh
$ 
$ # Now, I am in the registry container.
$ cd /var/lib/registry
$ ls
docker
$ cd docker/registry/v2/repositories/
$ ls
ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to change the default storage location, you might use a bind mount instead. see &lt;a href=&quot;https://docs.docker.com/registry/deploying/#storage-customization&quot;&gt;Storage Customization&lt;/a&gt; for more details.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Congratulations! You have learned how to set up a basic docker registry and manage its repositories. As malicious hackers can easily leverage vulnerabilities on an open docker registry, so this is only recommended for the test environment.&lt;/p&gt;

&lt;p&gt;In the next, I will write more articles and leads you to secure the registry step by step. Please give me a thumber up, if this article helped you.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Set up a docker registry on debian 4.6</title>
   <link href="http://localhost:4000/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/"/>
   <updated>2020-09-10T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/09/10/set-up-a-private-docker-registry-on-debian</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;navi-link&quot;&gt;Docker private registry&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;This article will lead you to set up a registry step by step. It is pretty easy to set a registry up with a public registry image in Docker Hub. At the end of this lesson, you may ask more questions, such as how to secure your registry, how to distribute roles. All those advanced fundamentals I will discuss in the next articles, this one is only focusing on how to running up a registry and manage its repositories.&lt;/p&gt;

&lt;h1 id=&quot;warm-up&quot;&gt;Warm up&lt;/h1&gt;
&lt;p&gt;This article uses Docker Hub &lt;code class=&quot;highlighter-rouge&quot;&gt;registry&lt;/code&gt; repository, which you can view its latest version on &lt;a href=&quot;https://hub.docker.com/_/registry&quot;&gt;Docker Hub&lt;/a&gt;. By the way, at present(the latest version is &lt;code class=&quot;highlighter-rouge&quot;&gt;2.7.1&lt;/code&gt;), the registry repository only available on the linux platform, and hence be sure you have the right OS. My machine is &lt;code class=&quot;highlighter-rouge&quot;&gt;Debian 4.9&lt;/code&gt; and illustrates with &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;deploy-a-registry-server&quot;&gt;Deploy a registry server&lt;/h1&gt;
&lt;p&gt;Use the following snippet to run a registry server up.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker run -d -p 5005:5000 --restart always --name registry registry:2.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code pulls the &lt;code class=&quot;highlighter-rouge&quot;&gt;registry:2.7&lt;/code&gt; image from the docker hub and runs it as a container, which explored port 5000 to match port 5005 of the host.  &lt;code class=&quot;highlighter-rouge&quot;&gt;--restart always&lt;/code&gt; instructs the container to restart always when unexpected stops occur.&lt;/p&gt;

&lt;p&gt;As the opposite of launch from the raw command, you can use a &lt;a href=&quot;https://docs.docker.com/compose/gettingstarted/&quot;&gt;compose&lt;/a&gt; file instead. Put the following snippet into your &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;registry:
  restart: always
  image: registry:2.7
  ports:
    - 5005:5000
  container_name: registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then start up your application in the background by running &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up -d&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Now, a registry container is successfully running on your device. You can view it with the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps&lt;/code&gt; command.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                    NAMES
b90413c663ae        registry:2.7            &quot;/entrypoint.sh /etc…&quot;   4 hours ago         Up 4 hours          0.0.0.0:5005-&amp;gt;5000/tcp   registry
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;pushpull-images&quot;&gt;Push/Pull Images&lt;/h1&gt;
&lt;p&gt;You can access your docker registry from either localhost or other address. The way that you access your registry is the same way that you do on the docker hub. If you are don’t remember, you can review &lt;a href=&quot;https://voltwu.github.io/blog/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share Your Image On Docker Hub&lt;/a&gt; for more syntax details.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Access from localhost:&lt;/strong&gt;
First, let us access from the localhost. Here, take the example with an &lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu&lt;/code&gt; image.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # pull a ubuntu image from docker hub
$ docker pull unbuntu
Using default tag: latest
latest: Pulling from library/ubuntu
e6ca3592b144: Pull complete 
534a5505201d: Pull complete 
990916bd23bb: Pull complete 
Digest: sha256:cbcf86d7781dbb3a6aa2bcea25403f6b0b443e20b9959165cf52d2cc9608e4b9
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest
$ 
$ docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              4e2eef94cd6b        3 weeks ago         73.9MB
$ 
$ # tag your ubuntu image into the localhost:5005/my-ubuntu
$ docker tag ubuntu localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Push the &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:5005/my-ubuntu&lt;/code&gt; to your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker push localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pull your &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:5005/my-ubuntu&lt;/code&gt; image back from your registry.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker pull localhost:5005/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above illustrates how to access the registry from local. However, you probably meet requirements that access from other hosts.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Access from other hosts:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker tag ubuntu xxx.xxx.xxx.xxx:port/my-ubuntu
$ 
$ docker push xxx.xxx.xxx.xxx:port/my-ubuntu
$ 
$ docker pull xxx.xxx.xxx.xxx:port/my-ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Replace the &lt;code class=&quot;highlighter-rouge&quot;&gt;xxx.xxx.xxx.xxx:port&lt;/code&gt; with your &lt;code class=&quot;highlighter-rouge&quot;&gt;IP&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;PORT&lt;/code&gt;. If you are the first time to push a image from a client to a registry, you may encounter the following error.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Get https://xxx.xxx.xxx.xxx:port/v2/: http: server gave HTTP response to HTTPS client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is because the docker daemon has forbidden insecure connection like this. You should configure your daemon properly, open your &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/docker/daemon.json&lt;/code&gt;(&lt;code class=&quot;highlighter-rouge&quot;&gt;settings-&amp;gt;daemon&lt;/code&gt; in Docker Desktop) file in the client, and put the following contents into it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ 
  &quot;insecure-registries&quot;:[&quot;xxx.xxx.xxx.xxx:port&quot;] 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then restart your docker deamon.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ systemctl daemon-reload
$ systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;images-management-in-registry&quot;&gt;Images management in registry&lt;/h1&gt;
&lt;p&gt;Now, you have images stored in your registry server. According to the &lt;a href=&quot;https://docs.docker.com/registry/deploying/#storage-customization&quot;&gt;official document&lt;/a&gt;, the registry server uses a &lt;a href=&quot;https://docs.docker.com/storage/volumes/&quot;&gt;volume&lt;/a&gt; for storing by default.&lt;/p&gt;

&lt;p&gt;List all volumes out through the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker volume ls&lt;/code&gt; command.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker volume ls
DRIVER              VOLUME NAME
local               faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may see more than one volume, find the registry one. Once you find it, then inspect its details.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker volume inspect faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2
[
    {
        &quot;CreatedAt&quot;: &quot;2020-09-16T13:22:35+08:00&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: null,
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2/_data&quot;,
        &quot;Name&quot;: &quot;faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    }
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Get inside the mount point folder, and list stored images.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd /var/lib/docker/volumes/faaf949a2ad2f8ffdef13662ac749c2736fe13be53f11e94fb6779f10f656fd2/_data
$ ls docker/registry/v2/repositories/
my-ubuntu  ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Image and folders are one to one relations, and the folder name is the image’s name. In this example, you can see that I have two images stored in this registry, and they are &lt;code class=&quot;highlighter-rouge&quot;&gt;my-ubuntu&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu&lt;/code&gt;. Get inside the folder, you can find more details, such as &lt;code class=&quot;highlighter-rouge&quot;&gt;layers&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;revisions&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;tags&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If you want to delete an image from the registry, the only thing you need to do is that delete the corresponding folder.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ls
my-ubuntu  ubuntu
$ rm -rf my-ubuntu
$ ls
ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above snippet removed the &lt;code class=&quot;highlighter-rouge&quot;&gt;my-ubuntu&lt;/code&gt; image from the docker registry.&lt;/p&gt;

&lt;p&gt;As the opposite to inspect your volume details for registry storage location, you can get into a registry container for storage information instead. They both have the same result. At the present, your container is already running up, so use the following command to get inside it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -it &amp;lt;mycontainer&amp;gt; /bin/sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note, a registry container doesn’t have &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; installed by default, so you should use the &lt;code class=&quot;highlighter-rouge&quot;&gt;sh&lt;/code&gt; instead.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker ps
CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                    NAMES
d09c04a74c93        registry:2.7            &quot;/entrypoint.sh /etc…&quot;   3 days ago          Up 3 days           0.0.0.0:5005-&amp;gt;5000/tcp   registry
$ 
$ docker exec -it d09c04a74c93 /bin/sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/lib/registry&lt;/code&gt; path stores the repositories.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -it d09c04a74c93 /bin/sh
$ 
$ # Now, I am in the registry container.
$ cd /var/lib/registry
$ ls
docker
$ cd docker/registry/v2/repositories/
$ ls
ubuntu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you want to change the default storage location, you might use a bind mount instead. see &lt;a href=&quot;https://docs.docker.com/registry/deploying/#storage-customization&quot;&gt;Storage Customization&lt;/a&gt; for more details.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Congratulations! You have learned how to set up a basic docker registry and manage its repositories. As malicious hackers can easily leverage vulnerabilities on an open docker registry, so this is only recommended for the test environment.&lt;/p&gt;

&lt;p&gt;In the next, I will write more articles and leads you to secure the registry step by step. Please give me a thumber up, if this article helped you.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker private registry</title>
   <link href="http://localhost:4000/docker/2020/08/14/docker-private-registry/"/>
   <updated>2020-08-14T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/14/docker-private-registry</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker private registry&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Docker hub indeed allows you to create private repositories, but the repositories amounts are limited unless you upgrade to a premium.&lt;/p&gt;

&lt;p&gt;As a curious programmer, you may want to build a private, unlimited registry instead of using the docker hub. You can even secure your docker registry, as well as distribute roles. This tutorial is designed from scratch to advance level, so I do hope this tutorial can help you. If you learned anything new, please give me a thumber up.&lt;/p&gt;

&lt;p&gt;Let us get started now!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot; class=&quot;item-link&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot; class=&quot;item-link&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot; class=&quot;item-link&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot; class=&quot;item-link&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/30/add-user-and-password-authentification/&quot; class=&quot;item-link&quot;&gt;Add User and Password Authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/30/add-user-and-password-authentification/&quot; class=&quot;item-link&quot;&gt;Add User and Password Authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/11/05/docker-compose-nginx-basic-authentification/&quot; class=&quot;item-link&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/11/05/docker-compose-nginx-basic-authentification/&quot; class=&quot;item-link&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker private registry</title>
   <link href="http://localhost:4000/docker/2020/08/14/docker-private-registry/"/>
   <updated>2020-08-14T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/14/docker-private-registry</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker private registry&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Docker hub indeed allows you to create private repositories, but the repositories amounts are limited unless you upgrade to a premium.&lt;/p&gt;

&lt;p&gt;As a curious programmer, you may want to build a private, unlimited registry instead of using the docker hub. You can even secure your docker registry, as well as distribute roles. This tutorial is designed from scratch to advance level, so I do hope this tutorial can help you. If you learned anything new, please give me a thumber up.&lt;/p&gt;

&lt;p&gt;Let us get started now!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot; class=&quot;item-link&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/10/set-up-a-private-docker-registry-on-debian/&quot; class=&quot;item-link&quot;&gt;Set up a docker registry on debian 4.6&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot; class=&quot;item-link&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/21/secure-your-registry-with-ssl/&quot; class=&quot;item-link&quot;&gt;Secure your registry with SSL certificate&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/30/add-user-and-password-authentification/&quot; class=&quot;item-link&quot;&gt;Add User and Password Authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/09/30/add-user-and-password-authentification/&quot; class=&quot;item-link&quot;&gt;Add User and Password Authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/11/05/docker-compose-nginx-basic-authentification/&quot; class=&quot;item-link&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/11/05/docker-compose-nginx-basic-authentification/&quot; class=&quot;item-link&quot;&gt;Deploy with Docker Compose and Nginx basic authentification&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker Hub</title>
   <link href="http://localhost:4000/docker/2020/08/14/docker-hub/"/>
   <updated>2020-08-14T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/14/docker-hub</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Docker Hub is a free and web hosted repository by Docker. And it is very convenient to find public images and host your images. In this tutorial, I am going to dive into Docker Hub and analyze all its functionalities, which include Basic Usage, Automated build, Automated test, and Webhooks. This tutorial aimed to follow the latest Docker Hub features,  and hence this tutorial will be updated from time to time.&lt;/p&gt;

&lt;p&gt;Now, Let’s explore together!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/14/docker-hub-introduction/&quot; class=&quot;item-link&quot;&gt;Docker Hub Introduction&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/14/docker-hub-introduction/&quot; class=&quot;item-link&quot;&gt;Docker Hub Introduction&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/15/docker-hub-automated-build/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/15/docker-hub-automated-build/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/16/docker-hub-automated-test/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/16/docker-hub-automated-test/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/20/docker-hub-webhooks/&quot; class=&quot;item-link&quot;&gt;Docker Hub Webhooks&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/20/docker-hub-webhooks/&quot; class=&quot;item-link&quot;&gt;Docker Hub Webhooks&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker Hub</title>
   <link href="http://localhost:4000/docker/2020/08/14/docker-hub/"/>
   <updated>2020-08-14T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/14/docker-hub</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;navi-link&quot;&gt;Docker Registry&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Hub&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Docker Hub is a free and web hosted repository by Docker. And it is very convenient to find public images and host your images. In this tutorial, I am going to dive into Docker Hub and analyze all its functionalities, which include Basic Usage, Automated build, Automated test, and Webhooks. This tutorial aimed to follow the latest Docker Hub features,  and hence this tutorial will be updated from time to time.&lt;/p&gt;

&lt;p&gt;Now, Let’s explore together!
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/14/docker-hub-introduction/&quot; class=&quot;item-link&quot;&gt;Docker Hub Introduction&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/14/docker-hub-introduction/&quot; class=&quot;item-link&quot;&gt;Docker Hub Introduction&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/15/docker-hub-automated-build/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/15/docker-hub-automated-build/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Builds&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/16/docker-hub-automated-test/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/16/docker-hub-automated-test/&quot; class=&quot;item-link&quot;&gt;Docker Hub Automated Tests&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/20/docker-hub-webhooks/&quot; class=&quot;item-link&quot;&gt;Docker Hub Webhooks&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
            &lt;li&gt;&lt;a href=&quot;/docker/2020/12/20/docker-hub-webhooks/&quot; class=&quot;item-link&quot;&gt;Docker Hub Webhooks&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker Registry</title>
   <link href="http://localhost:4000/docker/2020/08/13/docker-registry/"/>
   <updated>2020-08-13T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/13/docker-registry</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Registry&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;According to the preceding articles, you have known that what is docker registry and their responsibilities. If you don’t, please take a review look at &lt;a href=&quot;/docker/2020/07/08/getting-started/&quot;&gt;Docker Introduction&lt;/a&gt; and &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your Images on docker hub&lt;/a&gt;. Docker registry is a place where you can store images, and as well you can retrieve them back from there. The registry has two types, &lt;code class=&quot;highlighter-rouge&quot;&gt;public&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;private&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;public&lt;/code&gt; doesn’t need any authorizations, and hence anyone can use it. On the opposite, the &lt;code class=&quot;highlighter-rouge&quot;&gt;private&lt;/code&gt; one does need certification authorizations, and hence only authorized users can use it.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;item-link&quot;&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;item-link&quot;&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;item-link&quot;&gt;Docker private registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;item-link&quot;&gt;Docker private registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;item-link&quot;&gt;Using Nexus Repository Manager(NXRM) as your docker repository&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;item-link&quot;&gt;Using Nexus Repository Manager(NXRM) as your docker repository&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Registry</title>
   <link href="http://localhost:4000/docker/2020/08/13/docker-registry/"/>
   <updated>2020-08-13T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/13/docker-registry</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker Registry&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;According to the preceding articles, you have known that what is docker registry and their responsibilities. If you don’t, please take a review look at &lt;a href=&quot;/docker/2020/07/08/getting-started/&quot;&gt;Docker Introduction&lt;/a&gt; and &lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot;&gt;Share your Images on docker hub&lt;/a&gt;. Docker registry is a place where you can store images, and as well you can retrieve them back from there. The registry has two types, &lt;code class=&quot;highlighter-rouge&quot;&gt;public&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;private&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;public&lt;/code&gt; doesn’t need any authorizations, and hence anyone can use it. On the opposite, the &lt;code class=&quot;highlighter-rouge&quot;&gt;private&lt;/code&gt; one does need certification authorizations, and hence only authorized users can use it.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;item-link&quot;&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-hub/&quot; class=&quot;item-link&quot;&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;item-link&quot;&gt;Docker private registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/14/docker-private-registry/&quot; class=&quot;item-link&quot;&gt;Docker private registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;item-link&quot;&gt;Using Nexus Repository Manager(NXRM) as your docker repository&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2021/01/21/using-nexus-as-your-docker-repository/&quot; class=&quot;item-link&quot;&gt;Using Nexus Repository Manager(NXRM) as your docker repository&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Manage labels on docker(container and image)</title>
   <link href="http://localhost:4000/docker/2020/08/11/manage-labels-on-docker/"/>
   <updated>2020-08-11T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/11/manage-labels-on-docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;In this episode, I’ll show you how to add labels on Images and Containers, and filtering them with label tags. When you finished the preceding articles, you may encounter problems that it’s too hard to manage enormous containers and images.  Hence, you probably desire to classes those objects(such as containers, images, volumes, and networks) into different types, just for you can found them quickly when you need them.&lt;/p&gt;

&lt;p&gt;Here is the label tag. You can put different labels on different objects. For example, you have two containers, one for the testing and one for production purposes. In this scenario, you can label them to different tags, for example, one marked as “test” and the other marked as “production”.&lt;/p&gt;

&lt;h1 id=&quot;add-labels&quot;&gt;Add labels&lt;/h1&gt;
&lt;p&gt;You can add labels on either creating or on existing objects.&lt;/p&gt;

&lt;p&gt;First, let’s look at how to add labels on images. Add the following snippet to your Dockerfile.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ee3a9b80b8239323ed4602c4943ae8a1.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;After you edit and save successfully, then rebuild your docker image.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ebaf3d689b4171d73f19cf9444b01338.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;If you want to view your added labels, use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/83f43863a22a6d9dcfd06ba07764f443.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Labels also can legitimately be applied to Containers. You can use the following code to attach labels to your containers.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/bb03c15e0ebd5aeea0d2659f4f43c10f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The directive &lt;code class=&quot;highlighter-rouge&quot;&gt;-l&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;-label&lt;/code&gt; are the same meanings. To add multiple labels, repeat the label flag (&lt;code class=&quot;highlighter-rouge&quot;&gt;-l&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;--label&lt;/code&gt;). Such as:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7b6ef83f82d5881433f2c39a976ea83f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;View your added labels on containers, use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/79ffef93b5c167ef9135147e3d605908.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;filter-by-labels&quot;&gt;Filter by labels&lt;/h1&gt;

&lt;p&gt;When you have applied labels on images and containers, you maybe want filtering with those labels. 
The &lt;code class=&quot;highlighter-rouge&quot;&gt;--filtering&lt;/code&gt; flag can help you archive this purpose. 
For example, the following snippet only shows dangling images:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/c2b4e25bfabb087a589e954e7d4b4e70.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;It also permitted to filter custom labels, with format “label=value”.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/2238cc6a7ce876047c6c8d9e1e0ba377.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;You can do the samething on containers also, check the following snippet:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7d29fb9dfdf651bd09d8a2957523f0ea.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;If you add a directive &lt;code class=&quot;highlighter-rouge&quot;&gt;-a&lt;/code&gt; on the end, then it filter in all containers, including stopped containers.&lt;/p&gt;

&lt;h1 id=&quot;update-labels&quot;&gt;Update labels&lt;/h1&gt;
&lt;p&gt;It’s easy to update labels on Images. You only need to change the Dockerfile contents, edit the &lt;code class=&quot;highlighter-rouge&quot;&gt;LABEL&lt;/code&gt; value, and then rebuild your image.&lt;/p&gt;

&lt;p&gt;However, it’s a little doozy to update labels on containers. It is because of that changing the settings or code running inside a container involves deleting and restarting the container. And the labels are inside the containers, So, if you want to update your container labels, need to delete or stop the running containers that you want to update labels, and then start a new one with new labels.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Manage labels on docker(container and image)</title>
   <link href="http://localhost:4000/docker/2020/08/11/manage-labels-on-docker/"/>
   <updated>2020-08-11T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/08/11/manage-labels-on-docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;In this episode, I’ll show you how to add labels on Images and Containers, and filtering them with label tags. When you finished the preceding articles, you may encounter problems that it’s too hard to manage enormous containers and images.  Hence, you probably desire to classes those objects(such as containers, images, volumes, and networks) into different types, just for you can found them quickly when you need them.&lt;/p&gt;

&lt;p&gt;Here is the label tag. You can put different labels on different objects. For example, you have two containers, one for the testing and one for production purposes. In this scenario, you can label them to different tags, for example, one marked as “test” and the other marked as “production”.&lt;/p&gt;

&lt;h1 id=&quot;add-labels&quot;&gt;Add labels&lt;/h1&gt;
&lt;p&gt;You can add labels on either creating or on existing objects.&lt;/p&gt;

&lt;p&gt;First, let’s look at how to add labels on images. Add the following snippet to your Dockerfile.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ee3a9b80b8239323ed4602c4943ae8a1.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;After you edit and save successfully, then rebuild your docker image.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ebaf3d689b4171d73f19cf9444b01338.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;If you want to view your added labels, use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/83f43863a22a6d9dcfd06ba07764f443.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Labels also can legitimately be applied to Containers. You can use the following code to attach labels to your containers.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/bb03c15e0ebd5aeea0d2659f4f43c10f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The directive &lt;code class=&quot;highlighter-rouge&quot;&gt;-l&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;-label&lt;/code&gt; are the same meanings. To add multiple labels, repeat the label flag (&lt;code class=&quot;highlighter-rouge&quot;&gt;-l&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;--label&lt;/code&gt;). Such as:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7b6ef83f82d5881433f2c39a976ea83f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;View your added labels on containers, use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/79ffef93b5c167ef9135147e3d605908.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;filter-by-labels&quot;&gt;Filter by labels&lt;/h1&gt;

&lt;p&gt;When you have applied labels on images and containers, you maybe want filtering with those labels. 
The &lt;code class=&quot;highlighter-rouge&quot;&gt;--filtering&lt;/code&gt; flag can help you archive this purpose. 
For example, the following snippet only shows dangling images:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/c2b4e25bfabb087a589e954e7d4b4e70.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;It also permitted to filter custom labels, with format “label=value”.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/2238cc6a7ce876047c6c8d9e1e0ba377.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;You can do the samething on containers also, check the following snippet:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7d29fb9dfdf651bd09d8a2957523f0ea.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;If you add a directive &lt;code class=&quot;highlighter-rouge&quot;&gt;-a&lt;/code&gt; on the end, then it filter in all containers, including stopped containers.&lt;/p&gt;

&lt;h1 id=&quot;update-labels&quot;&gt;Update labels&lt;/h1&gt;
&lt;p&gt;It’s easy to update labels on Images. You only need to change the Dockerfile contents, edit the &lt;code class=&quot;highlighter-rouge&quot;&gt;LABEL&lt;/code&gt; value, and then rebuild your image.&lt;/p&gt;

&lt;p&gt;However, it’s a little doozy to update labels on containers. It is because of that changing the settings or code running inside a container involves deleting and restarting the container. And the labels are inside the containers, So, if you want to update your container labels, need to delete or stop the running containers that you want to update labels, and then start a new one with new labels.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Dockerize an ASP.NET Core application</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/"/>
   <updated>2020-07-20T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;You may have known how to deploy an asp net core application through the preceding &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot;&gt;two articles&lt;/a&gt;. However, if you don’t know, then you can follow this post tutorial to dockerize your application step by step.&lt;/p&gt;

&lt;p&gt;Docker has become massively popular, and it’s also pretty easy to use. It’s similar to dockerize a web application as a console application, except the running commands. However, it exists many ways to host your app(the &lt;a href=&quot;https://en.wikipedia.org/wiki/Load_balancing_(computing)&quot;&gt;load balance&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Microservices&quot;&gt;microservices&lt;/a&gt;). This blog arming to make the process as simple as possible, and would not dive into advance(&lt;a href=&quot;https://en.wikipedia.org/wiki/Load_balancing_(computing)&quot;&gt;load balance&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Microservices&quot;&gt;microservices&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The first essence you need is the image, and the second is to run your image as a container. There list three common ways to get your application image.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Get your image copy(&lt;code class=&quot;highlighter-rouge&quot;&gt;docker save&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;docker load&lt;/code&gt; command) from memory, if you are developing in Docker Container(note: switch to the &lt;code class=&quot;highlighter-rouge&quot;&gt;release&lt;/code&gt; mode).&lt;/li&gt;
  &lt;li&gt;Build from a Dockerfile.&lt;/li&gt;
  &lt;li&gt;Retrieve from a registry.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This tutorial examples building an image from a Dockerfile.
&lt;script src=&quot;https://gist.github.com/voltwu/fdd6adfbaade634338ddf87de63c0f90.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;View the Dockerfile contents.
&lt;script src=&quot;https://gist.github.com/voltwu/1069943b7f15f2939c6a4abde1909cf3.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Build your image.
&lt;script src=&quot;https://gist.github.com/voltwu/51299201e7e8038ae29ee5162c444b70.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;After you build your image up successfully, then you can use the following snippet to run your image as a container.
&lt;script src=&quot;https://gist.github.com/voltwu/9c14adf1dd3697930dd310faee56e8fa.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;I hope this helped you, if you have any questions, please be free to comment.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Dockerize an ASP.NET Core application</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/"/>
   <updated>2020-07-20T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;You may have known how to deploy an asp net core application through the preceding &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot;&gt;two articles&lt;/a&gt;. However, if you don’t know, then you can follow this post tutorial to dockerize your application step by step.&lt;/p&gt;

&lt;p&gt;Docker has become massively popular, and it’s also pretty easy to use. It’s similar to dockerize a web application as a console application, except the running commands. However, it exists many ways to host your app(the &lt;a href=&quot;https://en.wikipedia.org/wiki/Load_balancing_(computing)&quot;&gt;load balance&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Microservices&quot;&gt;microservices&lt;/a&gt;). This blog arming to make the process as simple as possible, and would not dive into advance(&lt;a href=&quot;https://en.wikipedia.org/wiki/Load_balancing_(computing)&quot;&gt;load balance&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Microservices&quot;&gt;microservices&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The first essence you need is the image, and the second is to run your image as a container. There list three common ways to get your application image.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Get your image copy(&lt;code class=&quot;highlighter-rouge&quot;&gt;docker save&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;docker load&lt;/code&gt; command) from memory, if you are developing in Docker Container(note: switch to the &lt;code class=&quot;highlighter-rouge&quot;&gt;release&lt;/code&gt; mode).&lt;/li&gt;
  &lt;li&gt;Build from a Dockerfile.&lt;/li&gt;
  &lt;li&gt;Retrieve from a registry.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This tutorial examples building an image from a Dockerfile.
&lt;script src=&quot;https://gist.github.com/voltwu/fdd6adfbaade634338ddf87de63c0f90.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;View the Dockerfile contents.
&lt;script src=&quot;https://gist.github.com/voltwu/1069943b7f15f2939c6a4abde1909cf3.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Build your image.
&lt;script src=&quot;https://gist.github.com/voltwu/51299201e7e8038ae29ee5162c444b70.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;After you build your image up successfully, then you can use the following snippet to run your image as a container.
&lt;script src=&quot;https://gist.github.com/voltwu/9c14adf1dd3697930dd310faee56e8fa.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;I hope this helped you, if you have any questions, please be free to comment.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Enable Docker Support On Visual Studio</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/"/>
   <updated>2020-07-20T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;It is significant that knowing how to use Visual Studio Docker Tools for dotnet developers. You’ve learned how to deploy your dotnet core apps in docker in the preceding article. Let’s reveal the docker tools on Visual Studio editor before we dive into further. This blog aims to illustrate those docker tools, but wouldn’t get into the details.&lt;/p&gt;

&lt;p&gt;For now, the latest version of the visual studio is &lt;strong&gt;2019&lt;/strong&gt;, which has supported two principal features of docker(&lt;strong&gt;Docker Support&lt;/strong&gt; and &lt;strong&gt;Orchestrator Support&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot;&gt;section1&lt;/a&gt;, we build our app through CIL(using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet&lt;/code&gt; command) and then publish it as well as in the CIL environment(using &lt;code class=&quot;highlighter-rouge&quot;&gt;docker&lt;/code&gt; command). Visual Studio 2019 assembled those features in UI, and hence we can finish these steps through Visual Studio, instead of CIL.&lt;/p&gt;

&lt;p&gt;You can add Docker support on either a new project or an existing project.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding Docker support on a creating project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding Docker Support on an existing project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;If you select &lt;strong&gt;Docker Support&lt;/strong&gt;, then Visual Studio will generate a Dockerfile under your project. You can use the Dockerfile to build and manage your images and containers, as the &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot;&gt;previous article&lt;/a&gt; did.&lt;/p&gt;

&lt;p&gt;If you want to compose a multi-container solution, then select the &lt;strong&gt;Container Orchestrator Support&lt;/strong&gt; option, which enables you to debug and run a group of containers at the same time. Visual Studio will create a new project when you clicked the &lt;strong&gt;Container Orchestrator Support&lt;/strong&gt; option. That is because orchestrators are tools to manage, scale, and maintain containerized applications, so Visual Studio made a third isolated project to finish this management.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding a Docker Compose support on an existing project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;You can add multiple projects into a single docker-compose. When you add a new project into a docker-compose, then the docker-compose will reference that project’s Dockerfile into the &lt;em&gt;docker-compose.yml&lt;/em&gt; file. When you launch the docker-compose, all the related Dockerfile will be launched at the same time.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Enable Docker Support On Visual Studio</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/"/>
   <updated>2020-07-20T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;It is significant that knowing how to use Visual Studio Docker Tools for dotnet developers. You’ve learned how to deploy your dotnet core apps in docker in the preceding article. Let’s reveal the docker tools on Visual Studio editor before we dive into further. This blog aims to illustrate those docker tools, but wouldn’t get into the details.&lt;/p&gt;

&lt;p&gt;For now, the latest version of the visual studio is &lt;strong&gt;2019&lt;/strong&gt;, which has supported two principal features of docker(&lt;strong&gt;Docker Support&lt;/strong&gt; and &lt;strong&gt;Orchestrator Support&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot;&gt;section1&lt;/a&gt;, we build our app through CIL(using &lt;code class=&quot;highlighter-rouge&quot;&gt;dotnet&lt;/code&gt; command) and then publish it as well as in the CIL environment(using &lt;code class=&quot;highlighter-rouge&quot;&gt;docker&lt;/code&gt; command). Visual Studio 2019 assembled those features in UI, and hence we can finish these steps through Visual Studio, instead of CIL.&lt;/p&gt;

&lt;p&gt;You can add Docker support on either a new project or an existing project.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding Docker support on a creating project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding Docker Support on an existing project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;If you select &lt;strong&gt;Docker Support&lt;/strong&gt;, then Visual Studio will generate a Dockerfile under your project. You can use the Dockerfile to build and manage your images and containers, as the &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot;&gt;previous article&lt;/a&gt; did.&lt;/p&gt;

&lt;p&gt;If you want to compose a multi-container solution, then select the &lt;strong&gt;Container Orchestrator Support&lt;/strong&gt; option, which enables you to debug and run a group of containers at the same time. Visual Studio will create a new project when you clicked the &lt;strong&gt;Container Orchestrator Support&lt;/strong&gt; option. That is because orchestrators are tools to manage, scale, and maintain containerized applications, so Visual Studio made a third isolated project to finish this management.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-20-enable-docker-support-on-visual-studio-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Adding a Docker Compose support on an existing project(from &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/overview?view=vs-2019&quot;&gt;microsoft doc&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;You can add multiple projects into a single docker-compose. When you add a new project into a docker-compose, then the docker-compose will reference that project’s Dockerfile into the &lt;em&gt;docker-compose.yml&lt;/em&gt; file. When you launch the docker-compose, all the related Dockerfile will be launched at the same time.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Warm-up: Build a .net core console app</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Docker is a container technique, which is lightweight and convenient, and it has become a massively popular technology. What are you waiting for, let’s explore it together!&lt;/p&gt;

&lt;p&gt;This article will show you a simple, which you can learn how to build a .net Core Console application in Docker step by step.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Familiar with &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Familiar with &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/&quot;&gt;.NET CORE&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;build-and-publish-a-console-app&quot;&gt;Build and Publish a console App&lt;/h1&gt;
&lt;p&gt;You can choose different editors, like VSCode, Visual Studio, etc. This article builds an App through the command-line interface. Make sure you have &lt;a href=&quot;https://dotnet.microsoft.com/download&quot;&gt;.NET CORE SDK&lt;/a&gt; installed first.&lt;/p&gt;

&lt;p&gt;Use the following snippet to create a .NET Core app.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/a496e1bfdbb9846f3ddd33bbc0e43e7e.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Get into &lt;code class=&quot;highlighter-rouge&quot;&gt;MyApp&lt;/code&gt; folder, then run your App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/b8fee310d708a007670c09b5c06267b3.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Publish your App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/8483789cb18d6a88316753dd86f8132f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Get into your released folder, then run your &lt;code class=&quot;highlighter-rouge&quot;&gt;.dll&lt;/code&gt; file up.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e295ec25e55561cb3e96f2e82406be36.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;containerize&quot;&gt;Containerize&lt;/h1&gt;
&lt;p&gt;Create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; with the following snippet to containerize your released App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/2e02f788d87882253defd5082b22c8e3.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Put the above Dockerfile under &lt;code class=&quot;highlighter-rouge&quot;&gt;MyApp&lt;/code&gt; directory.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/a83a39a91085fb9f7d029fe07a8a4ba5.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Build an image.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/4aefedf217a630eb0a00267378497bc2.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Run your image as container.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7d22860f02f5abbbd261a4cbd3a3d3f4.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Now, your container is running up successfully. If you want to extend more, check the &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The above process only containerized your released App. As the Docker is a container, so you can do the same thing as you are in a real operating system. You can build, publish, release your App in a single Docker container. Even though you can do multi-steps in a single docker container, however, it is not recommended. It will be hard to manage and track stages when doing too many steps in a single docker container. You can take advantage of the multi-stage feature, which is much more flexible and convenient.&lt;/p&gt;

&lt;p&gt;The following Dockerfile illustrate a multi-stage example in a single Dockerfile.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/96f5c2edbfb2f6f28a39450b9e7e046f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above Dockerfile comes from Visual Studio Docker Tools, and the above Dockerfile related to &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; features, which was introduced in docker 17.05. Check these articles &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/container-build?view=vs-2019&quot;&gt;How Visual Studio builds containerized apps&lt;/a&gt;, and &lt;a href=&quot;https://docs.docker.com/develop/develop-images/multistage-build/&quot;&gt;Use multi-stage builds&lt;/a&gt; to learn more about Docker and Visual Studio.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/4237a9db898dca0d1aa5756d7d69a40c.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt; to specify the Dockerfile explicitly.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Through this tutorial, you’ve learned how to deploy NET CORE Console in Docker. Take a look review.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Docker is a container, which provides all the necessary packages you need. You can configure your App to be built, run, release in a single Dockerfile(use the &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; feature).&lt;/li&gt;
  &lt;li&gt;Visual Studio Docker Support Tools takes the advantages of the Docker’s &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; features.&lt;/li&gt;
  &lt;li&gt;If you want to learn more about Docker, see &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker Tutorial&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Warm-up: Build a .net core console app</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Docker is a container technique, which is lightweight and convenient, and it has become a massively popular technology. What are you waiting for, let’s explore it together!&lt;/p&gt;

&lt;p&gt;This article will show you a simple, which you can learn how to build a .net Core Console application in Docker step by step.&lt;/p&gt;

&lt;h1 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Familiar with &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Familiar with &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/&quot;&gt;.NET CORE&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;build-and-publish-a-console-app&quot;&gt;Build and Publish a console App&lt;/h1&gt;
&lt;p&gt;You can choose different editors, like VSCode, Visual Studio, etc. This article builds an App through the command-line interface. Make sure you have &lt;a href=&quot;https://dotnet.microsoft.com/download&quot;&gt;.NET CORE SDK&lt;/a&gt; installed first.&lt;/p&gt;

&lt;p&gt;Use the following snippet to create a .NET Core app.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/a496e1bfdbb9846f3ddd33bbc0e43e7e.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Get into &lt;code class=&quot;highlighter-rouge&quot;&gt;MyApp&lt;/code&gt; folder, then run your App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/b8fee310d708a007670c09b5c06267b3.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Publish your App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/8483789cb18d6a88316753dd86f8132f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Get into your released folder, then run your &lt;code class=&quot;highlighter-rouge&quot;&gt;.dll&lt;/code&gt; file up.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e295ec25e55561cb3e96f2e82406be36.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;containerize&quot;&gt;Containerize&lt;/h1&gt;
&lt;p&gt;Create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt; with the following snippet to containerize your released App.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/2e02f788d87882253defd5082b22c8e3.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Put the above Dockerfile under &lt;code class=&quot;highlighter-rouge&quot;&gt;MyApp&lt;/code&gt; directory.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/a83a39a91085fb9f7d029fe07a8a4ba5.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Build an image.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/4aefedf217a630eb0a00267378497bc2.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Run your image as container.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/7d22860f02f5abbbd261a4cbd3a3d3f4.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Now, your container is running up successfully. If you want to extend more, check the &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The above process only containerized your released App. As the Docker is a container, so you can do the same thing as you are in a real operating system. You can build, publish, release your App in a single Docker container. Even though you can do multi-steps in a single docker container, however, it is not recommended. It will be hard to manage and track stages when doing too many steps in a single docker container. You can take advantage of the multi-stage feature, which is much more flexible and convenient.&lt;/p&gt;

&lt;p&gt;The following Dockerfile illustrate a multi-stage example in a single Dockerfile.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/96f5c2edbfb2f6f28a39450b9e7e046f.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above Dockerfile comes from Visual Studio Docker Tools, and the above Dockerfile related to &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; features, which was introduced in docker 17.05. Check these articles &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/containers/container-build?view=vs-2019&quot;&gt;How Visual Studio builds containerized apps&lt;/a&gt;, and &lt;a href=&quot;https://docs.docker.com/develop/develop-images/multistage-build/&quot;&gt;Use multi-stage builds&lt;/a&gt; to learn more about Docker and Visual Studio.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/4237a9db898dca0d1aa5756d7d69a40c.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt; to specify the Dockerfile explicitly.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Through this tutorial, you’ve learned how to deploy NET CORE Console in Docker. Take a look review.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Docker is a container, which provides all the necessary packages you need. You can configure your App to be built, run, release in a single Dockerfile(use the &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; feature).&lt;/li&gt;
  &lt;li&gt;Visual Studio Docker Support Tools takes the advantages of the Docker’s &lt;code class=&quot;highlighter-rouge&quot;&gt;multistage&lt;/code&gt; features.&lt;/li&gt;
  &lt;li&gt;If you want to learn more about Docker, see &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot;&gt;Docker Tutorial&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Host</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/host/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/host</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Host&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;item-link&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;item-link&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;item-link&quot;&gt;ASP.NET Web Deployment: Command Line Deployment&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;item-link&quot;&gt;ASP.NET Web Deployment: Command Line Deployment&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Host</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/host/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/host</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Host&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;item-link&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/docker/&quot; class=&quot;item-link&quot;&gt;Docker&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;item-link&quot;&gt;ASP.NET Web Deployment: Command Line Deployment&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/01/05/asp-net-core-web-deployment-command-line-deployment/&quot; class=&quot;item-link&quot;&gt;ASP.NET Web Deployment: Command Line Deployment&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/docker/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot; class=&quot;item-link&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot; class=&quot;item-link&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/&quot; class=&quot;item-link&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/&quot; class=&quot;item-link&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/&quot; class=&quot;item-link&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/&quot; class=&quot;item-link&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/07/13/docker/"/>
   <updated>2020-07-13T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/07/13/docker</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;navi-link&quot;&gt;Host&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot; class=&quot;item-link&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/warm-up-build-asp-net-core-console-docker-app/&quot; class=&quot;item-link&quot;&gt;Warm-up: Build a .net core console app&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/&quot; class=&quot;item-link&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/enable-docker-support-on-visual-studio/&quot; class=&quot;item-link&quot;&gt;Enable Docker Support On Visual Studio&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/&quot; class=&quot;item-link&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/20/dockerize-asp-net-core-application/&quot; class=&quot;item-link&quot;&gt;Dockerize an ASP.NET Core application&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Share your Images on Docker Hub</title>
   <link href="http://localhost:4000/docker/2020/07/08/share-your-image-on-docker-hub/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/share-your-image-on-docker-hub</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;You have created a containerized application. This article will show you how to share your images on the Docker Hub step by step. Note all images on Docker Hub are public except private.&lt;/p&gt;

&lt;h1 id=&quot;sign-up-docker-hub-page&quot;&gt;Sign up Docker Hub Page&lt;/h1&gt;

&lt;p&gt;Go the &lt;a href=&quot;https://hub.docker.com/signup&quot;&gt;Docker Hub Sign Up page&lt;/a&gt;, then type your &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Docker ID&amp;gt;&lt;/code&gt; and finish other requirements.&lt;/p&gt;

&lt;h1 id=&quot;create-a-repository&quot;&gt;Create a repository&lt;/h1&gt;

&lt;p&gt;Click the create repository button, enter a name.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; You can choose your repository whether is a public repository. A public repository can be used by anyone. If you want to secret your repository, then you can make your repository private. 
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;tag-your-image&quot;&gt;Tag your image&lt;/h1&gt;

&lt;p&gt;Tag your image, before you push your image into the remote repository. Your tag name should be like this &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/&amp;lt;Repository Name&amp;gt;:&amp;lt;tag&amp;gt;&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/17499f229bd70d729c53aa1377904050.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;docker tag&lt;/code&gt; is basically to create an alias from another image. The above code will create a new alias &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:1.0&lt;/code&gt; of the &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:1.0&lt;/code&gt; image. After this, you will have two names &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:1.0&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:1.0&lt;/code&gt;. You can run &lt;code class=&quot;highlighter-rouge&quot;&gt;docker image ls&lt;/code&gt; to list all your images.
You can omit your &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; part, if you do that, your &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; will be the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; by default.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/c131228083bff4e08615dc1f44409212.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above code will create a new image named as &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:latest&lt;/code&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; value is &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt;. The following code is the same meaning:
&lt;script src=&quot;https://gist.github.com/voltwu/5106ef5cd7a26924762bd71e9f54f504.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h1 id=&quot;push-your-image-to-the-repository&quot;&gt;Push your image to the repository&lt;/h1&gt;

&lt;p&gt;You have to log in at command line first. Type the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker login&lt;/code&gt; command to log in, or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker logout&lt;/code&gt; to log out. After you login successfully, then you can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker push &amp;lt;Your Docker ID&amp;gt;/&amp;lt;repository&amp;gt;:tag&lt;/code&gt; to push your images to the remote repository.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ebfb60a854dc387770b9f4af75216330.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;if you are in the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; tag, you can omit it.
&lt;script src=&quot;https://gist.github.com/voltwu/4ddaeb699e057a441c980c6ad627f3ba.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h1 id=&quot;pull-your-image-back&quot;&gt;Pull your image back&lt;/h1&gt;

&lt;p&gt;Now your Image is on Docker Hub available. You can pull your image back in many ways eg. &lt;code class=&quot;highlighter-rouge&quot;&gt;FROM&lt;/code&gt; in a Dockerfile, or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker pull&lt;/code&gt; in the command line environment. The following snippet shows you the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker pull&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e08eecf9ac43b4fed44033fa6bcfedfc.js&quot;&gt;&lt;/script&gt;

</content>
 </entry>
 
 <entry>
   <title>Share your Images on Docker Hub</title>
   <link href="http://localhost:4000/docker/2020/07/08/share-your-image-on-docker-hub/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/share-your-image-on-docker-hub</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;You have created a containerized application. This article will show you how to share your images on the Docker Hub step by step. Note all images on Docker Hub are public except private.&lt;/p&gt;

&lt;h1 id=&quot;sign-up-docker-hub-page&quot;&gt;Sign up Docker Hub Page&lt;/h1&gt;

&lt;p&gt;Go the &lt;a href=&quot;https://hub.docker.com/signup&quot;&gt;Docker Hub Sign Up page&lt;/a&gt;, then type your &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Docker ID&amp;gt;&lt;/code&gt; and finish other requirements.&lt;/p&gt;

&lt;h1 id=&quot;create-a-repository&quot;&gt;Create a repository&lt;/h1&gt;

&lt;p&gt;Click the create repository button, enter a name.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
&lt;b&gt;NOTE:&lt;/b&gt; You can choose your repository whether is a public repository. A public repository can be used by anyone. If you want to secret your repository, then you can make your repository private. 
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;tag-your-image&quot;&gt;Tag your image&lt;/h1&gt;

&lt;p&gt;Tag your image, before you push your image into the remote repository. Your tag name should be like this &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/&amp;lt;Repository Name&amp;gt;:&amp;lt;tag&amp;gt;&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/17499f229bd70d729c53aa1377904050.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;docker tag&lt;/code&gt; is basically to create an alias from another image. The above code will create a new alias &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:1.0&lt;/code&gt; of the &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:1.0&lt;/code&gt; image. After this, you will have two names &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:1.0&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:1.0&lt;/code&gt;. You can run &lt;code class=&quot;highlighter-rouge&quot;&gt;docker image ls&lt;/code&gt; to list all your images.
You can omit your &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; part, if you do that, your &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; will be the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; by default.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/c131228083bff4e08615dc1f44409212.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above code will create a new image named as &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;Your Docker ID&amp;gt;/tweet_app:latest&lt;/code&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt; value is &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt;. The following code is the same meaning:
&lt;script src=&quot;https://gist.github.com/voltwu/5106ef5cd7a26924762bd71e9f54f504.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h1 id=&quot;push-your-image-to-the-repository&quot;&gt;Push your image to the repository&lt;/h1&gt;

&lt;p&gt;You have to log in at command line first. Type the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker login&lt;/code&gt; command to log in, or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker logout&lt;/code&gt; to log out. After you login successfully, then you can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker push &amp;lt;Your Docker ID&amp;gt;/&amp;lt;repository&amp;gt;:tag&lt;/code&gt; to push your images to the remote repository.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/ebfb60a854dc387770b9f4af75216330.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;if you are in the &lt;code class=&quot;highlighter-rouge&quot;&gt;latest&lt;/code&gt; tag, you can omit it.
&lt;script src=&quot;https://gist.github.com/voltwu/4ddaeb699e057a441c980c6ad627f3ba.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h1 id=&quot;pull-your-image-back&quot;&gt;Pull your image back&lt;/h1&gt;

&lt;p&gt;Now your Image is on Docker Hub available. You can pull your image back in many ways eg. &lt;code class=&quot;highlighter-rouge&quot;&gt;FROM&lt;/code&gt; in a Dockerfile, or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker pull&lt;/code&gt; in the command line environment. The following snippet shows you the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker pull&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e08eecf9ac43b4fed44033fa6bcfedfc.js&quot;&gt;&lt;/script&gt;

</content>
 </entry>
 
 <entry>
   <title>Manage your Images, Containers</title>
   <link href="http://localhost:4000/docker/2020/07/08/manage-your-images-containers/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/manage-your-images-containers</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Manage your Image, Container&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;After you build and run your image successfully, then you need to manage them. Docker provides a full, complete manage command that fits for you. This article divides into three main parts.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Image management.&lt;/li&gt;
  &lt;li&gt;Container management.&lt;/li&gt;
  &lt;li&gt;Interaction.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This blog continues from the previous episode, if you are unfamiliar, take a review look at &lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image&quot;&gt;build and run your image&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;image-management&quot;&gt;Image Management&lt;/h1&gt;
&lt;p&gt;It’s important to manage your Images in Docker. Docker provides a set of built-in commands that assistant your management on Images. The following contents list the almost highly touched commands during Images management. You can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker image --help&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker --help&lt;/code&gt; to explore more information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List images&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image ls
docker images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove an image&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image rm &amp;lt;myimage&amp;gt;
docker rmi &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove an image by force&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image --force rm &amp;lt;myimage&amp;gt;
docker rmi --force &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Show an image history&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image history &amp;lt;myimage&amp;gt;
docker history &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;copy an image from another Image&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image tag &amp;lt;source_image&amp;gt; &amp;lt;new_image&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove unused images&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Pull an image or a repository from a gegistry&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image pull &amp;lt;image_registry&amp;gt;
docker pull &amp;lt;image_registry&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Push an image or a repository to a registry&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image push &amp;lt;myimage&amp;gt;
docker push &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Load an image from a tar archive or STDIN&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image load -i &amp;lt;tarfile&amp;gt;
docker load -i &amp;lt;tarfile&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Save one or more images to a tar arhchive(stream to STDOUT by default)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image save -o &amp;lt;output_tar_file&amp;gt;
docker save -o &amp;lt;output_tar_file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/873862bb48acfb48e87455a7419f5e5f.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;container-management&quot;&gt;Container Management&lt;/h1&gt;
&lt;p&gt;You’ve known how to manage your Images in the command line, where you can also manage your container. Here, I am going to show you the basic commands that you may need. You can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker container --help&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker --help&lt;/code&gt; to explore more information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List all running containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container ls
docker ps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all running and stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container ls -a
docker ps -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker ps --filter &quot;status=exited&quot;
docker ps -f &quot;status=exited&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Stop one or more running containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container stop &amp;lt;mycontainer&amp;gt;
docker stop &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Start one or more stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container start &amp;lt;mycontainer&amp;gt;
docker start &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove a container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container rm &amp;lt;mycontainer&amp;gt;
docker rm &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Remove a container by force&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container rm --force &amp;lt;mycontainer&amp;gt;
docker rm --force &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Remove all stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Copy files/folders between a container and the local filesystem&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH
docker cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The former copies the container to the host, and the later copies the host to the container.&lt;/p&gt;

&lt;h1 id=&quot;interaction&quot;&gt;Interaction&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;Attach local standard input, output, and error streams to a running container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker attach &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Get inside a container’s filesystem on a running container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker exec -it &amp;lt;mycontainer&amp;gt; bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Get inside an image’s filesystem&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -it --entrypoint /bin/bash &amp;lt;imageid&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; both can let you connect to your container, but the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; isn’t really the same thing as &lt;code class=&quot;highlighter-rouge&quot;&gt;SSH&lt;/code&gt;.  For example, if your container is running a webserver, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; will probably connect you to the &lt;em&gt;stdout&lt;/em&gt; of the webserver process.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; command can let you get inside a running container, it didn’t like the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; will let you get inside the really private filesystem. The  &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run -it --entrypoint /bin/bash &amp;lt;imageid&amp;gt;&lt;/code&gt; base on an image, so you can inspect an image’s filesystem, without running it as a container first. If you want to exit the interactive window, input the &lt;code class=&quot;highlighter-rouge&quot;&gt;exit&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;If you execute the above &lt;code class=&quot;highlighter-rouge&quot;&gt;bin/bash&lt;/code&gt; command, you may encounter a crash error. Just as the fallowing:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-CMD&quot;&gt;$ # try to get inside on a container
$ docker exec -it &amp;lt;mycontainer&amp;gt; bash
rpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused &quot;exec: \&quot;bash\&quot;: executable file not found in $PATH&quot;
$ 
$ # try to get inside on an image
$ docker run -it --entrypoint /bin/bash &amp;lt;myimage&amp;gt;
Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused &quot;exec: \&quot;/bin/bash\&quot;: stat /bin/bash: no such file or directory&quot;: unknown.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You have these errors because your container/image doesn’t have a &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; command installed. However, there are still have other solutions for these problems, if your &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; hasn’t installed, you should use &lt;code class=&quot;highlighter-rouge&quot;&gt;/bin/sh&lt;/code&gt; instead.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # try to get inside on a container
$ docker exec -it &amp;lt;mycontainer&amp;gt; /bin/sh
$ 
$ # try to get inside on an image
$ docker run -it --entrypoint /bin/sh &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or more visualization, you can view your containers filesystem without really get inside it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -ti &amp;lt;mycontainer&amp;gt; ls /etc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Manage your Images, Containers</title>
   <link href="http://localhost:4000/docker/2020/07/08/manage-your-images-containers/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/manage-your-images-containers</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Manage your Image, Container&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;After you build and run your image successfully, then you need to manage them. Docker provides a full, complete manage command that fits for you. This article divides into three main parts.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Image management.&lt;/li&gt;
  &lt;li&gt;Container management.&lt;/li&gt;
  &lt;li&gt;Interaction.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This blog continues from the previous episode, if you are unfamiliar, take a review look at &lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image&quot;&gt;build and run your image&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;image-management&quot;&gt;Image Management&lt;/h1&gt;
&lt;p&gt;It’s important to manage your Images in Docker. Docker provides a set of built-in commands that assistant your management on Images. The following contents list the almost highly touched commands during Images management. You can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker image --help&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker --help&lt;/code&gt; to explore more information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List images&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image ls
docker images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove an image&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image rm &amp;lt;myimage&amp;gt;
docker rmi &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove an image by force&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image --force rm &amp;lt;myimage&amp;gt;
docker rmi --force &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Show an image history&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image history &amp;lt;myimage&amp;gt;
docker history &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;copy an image from another Image&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image tag &amp;lt;source_image&amp;gt; &amp;lt;new_image&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove unused images&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Pull an image or a repository from a gegistry&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image pull &amp;lt;image_registry&amp;gt;
docker pull &amp;lt;image_registry&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Push an image or a repository to a registry&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image push &amp;lt;myimage&amp;gt;
docker push &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Load an image from a tar archive or STDIN&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image load -i &amp;lt;tarfile&amp;gt;
docker load -i &amp;lt;tarfile&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Save one or more images to a tar arhchive(stream to STDOUT by default)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker image save -o &amp;lt;output_tar_file&amp;gt;
docker save -o &amp;lt;output_tar_file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/873862bb48acfb48e87455a7419f5e5f.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;container-management&quot;&gt;Container Management&lt;/h1&gt;
&lt;p&gt;You’ve known how to manage your Images in the command line, where you can also manage your container. Here, I am going to show you the basic commands that you may need. You can run the &lt;code class=&quot;highlighter-rouge&quot;&gt;docker container --help&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker --help&lt;/code&gt; to explore more information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List all running containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container ls
docker ps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all running and stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container ls -a
docker ps -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker ps --filter &quot;status=exited&quot;
docker ps -f &quot;status=exited&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Stop one or more running containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container stop &amp;lt;mycontainer&amp;gt;
docker stop &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Start one or more stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container start &amp;lt;mycontainer&amp;gt;
docker start &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Remove a container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container rm &amp;lt;mycontainer&amp;gt;
docker rm &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Remove a container by force&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container rm --force &amp;lt;mycontainer&amp;gt;
docker rm --force &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Remove all stopped containers&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker container prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Copy files/folders between a container and the local filesystem&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH
docker cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The former copies the container to the host, and the later copies the host to the container.&lt;/p&gt;

&lt;h1 id=&quot;interaction&quot;&gt;Interaction&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;Attach local standard input, output, and error streams to a running container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker attach &amp;lt;mycontainer&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Get inside a container’s filesystem on a running container&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker exec -it &amp;lt;mycontainer&amp;gt; bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Get inside an image’s filesystem&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -it --entrypoint /bin/bash &amp;lt;imageid&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; both can let you connect to your container, but the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; isn’t really the same thing as &lt;code class=&quot;highlighter-rouge&quot;&gt;SSH&lt;/code&gt;.  For example, if your container is running a webserver, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt; will probably connect you to the &lt;em&gt;stdout&lt;/em&gt; of the webserver process.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; command can let you get inside a running container, it didn’t like the &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Attach&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Docker Exec&lt;/code&gt; will let you get inside the really private filesystem. The  &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run -it --entrypoint /bin/bash &amp;lt;imageid&amp;gt;&lt;/code&gt; base on an image, so you can inspect an image’s filesystem, without running it as a container first. If you want to exit the interactive window, input the &lt;code class=&quot;highlighter-rouge&quot;&gt;exit&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;If you execute the above &lt;code class=&quot;highlighter-rouge&quot;&gt;bin/bash&lt;/code&gt; command, you may encounter a crash error. Just as the fallowing:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-CMD&quot;&gt;$ # try to get inside on a container
$ docker exec -it &amp;lt;mycontainer&amp;gt; bash
rpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused &quot;exec: \&quot;bash\&quot;: executable file not found in $PATH&quot;
$ 
$ # try to get inside on an image
$ docker run -it --entrypoint /bin/bash &amp;lt;myimage&amp;gt;
Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused &quot;exec: \&quot;/bin/bash\&quot;: stat /bin/bash: no such file or directory&quot;: unknown.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You have these errors because your container/image doesn’t have a &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; command installed. However, there are still have other solutions for these problems, if your &lt;code class=&quot;highlighter-rouge&quot;&gt;bash&lt;/code&gt; hasn’t installed, you should use &lt;code class=&quot;highlighter-rouge&quot;&gt;/bin/sh&lt;/code&gt; instead.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ # try to get inside on a container
$ docker exec -it &amp;lt;mycontainer&amp;gt; /bin/sh
$ 
$ # try to get inside on an image
$ docker run -it --entrypoint /bin/sh &amp;lt;myimage&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or more visualization, you can view your containers filesystem without really get inside it.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ docker exec -ti &amp;lt;mycontainer&amp;gt; ls /etc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Deploy Your First Docker App</title>
   <link href="http://localhost:4000/docker/2020/07/08/deploy-your-first-docker-app/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/deploy-your-first-docker-app</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image/&quot; class=&quot;item-link&quot;&gt;Build and run your image&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image/&quot; class=&quot;item-link&quot;&gt;Build and run your image&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/manage-your-images-containers/&quot; class=&quot;item-link&quot;&gt;Manage your Images, Containers&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/manage-your-images-containers/&quot; class=&quot;item-link&quot;&gt;Manage your Images, Containers&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot; class=&quot;item-link&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot; class=&quot;item-link&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Deploy Your First Docker App</title>
   <link href="http://localhost:4000/docker/2020/07/08/deploy-your-first-docker-app/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/deploy-your-first-docker-app</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image/&quot; class=&quot;item-link&quot;&gt;Build and run your image&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/build-and-run-your-image/&quot; class=&quot;item-link&quot;&gt;Build and run your image&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/manage-your-images-containers/&quot; class=&quot;item-link&quot;&gt;Manage your Images, Containers&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/manage-your-images-containers/&quot; class=&quot;item-link&quot;&gt;Manage your Images, Containers&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot; class=&quot;item-link&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/share-your-image-on-docker-hub/&quot; class=&quot;item-link&quot;&gt;Share your Images on Docker Hub&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Build and run your image</title>
   <link href="http://localhost:4000/docker/2020/07/08/build-and-run-your-image/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/build-and-run-your-image</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Build and run your image&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;introduction&quot;&gt;Introduction&lt;/h1&gt;

&lt;p&gt;Docker is a container technique. You can run Iof, IOS, Android, and OS, etc. In this episode, I am going to dive into containerizing a web application. You can clone this project’s source code on Github. This source code is simple, only contains a few HTML static files and a Dockerfile.&lt;/p&gt;

&lt;p&gt;The most basic way to containerizing an App is the following steps:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Build your image with a docker file&lt;/li&gt;
  &lt;li&gt;Run your image as a container&lt;/li&gt;
  &lt;li&gt;Share your image&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This article will explain to you almost everything you need to know while building your images.&lt;/p&gt;

&lt;p&gt;You can clone this project’s source code down with git command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/d0e2509259153461551d0988ade35a2d.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;dockerfile&quot;&gt;Dockerfile&lt;/h1&gt;
&lt;p&gt;In most of the cases, different containers(windows, Linux) need to match different Dockerfiles. So if you have an app that needs to deploy on both Windows container and Linux container, then you may need to write different Dockerfiles for Windows and Linux.&lt;/p&gt;

&lt;p&gt;As the project’s Dockerfile is for Linux Container, so let’s analyze the file first.&lt;/p&gt;
&lt;h2 id=&quot;linux&quot;&gt;Linux&lt;/h2&gt;

&lt;p&gt;The Dockerfile in the Linux_tweet_app looks like this:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/b4e2322fe24c4b25ac8de7259443c0f7.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;From the pre-exising &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx:latest&lt;/code&gt; image. This is an official image, for more information check &lt;a href=&quot;https://hub.docker.com/_/nginx&quot;&gt;Docker Hub Nginx&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY&lt;/code&gt; command is to copy from the &lt;strong&gt;host file&lt;/strong&gt; to the &lt;strong&gt;docker container&lt;/strong&gt;. The command pattern is &lt;code class=&quot;highlighter-rouge&quot;&gt;host_file container_file&lt;/code&gt;. The above command copied the &lt;code class=&quot;highlighter-rouge&quot;&gt;index.html&lt;/code&gt; file and the &lt;code class=&quot;highlighter-rouge&quot;&gt;linux.png&lt;/code&gt; file into a docker container and put them under the &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/share/nginx/&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPOSE&lt;/code&gt; command instructs the docker to listen on specific ports. &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPOSE 80 443&lt;/code&gt; makes Docker container listen on 80, 443 port.&lt;/p&gt;

&lt;p&gt;The last &lt;code class=&quot;highlighter-rouge&quot;&gt;CMD&lt;/code&gt; command specifies the run command within the container.&lt;/p&gt;

&lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;
&lt;p&gt;Linux and Windows are two completely different operating systems, and hence you can’t use the above Dockerfile.&lt;/p&gt;

&lt;p&gt;By the way, &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx&lt;/code&gt; also doesn’t have an image for windows in &lt;a href=&quot;https://hub.docker.com/_/nginx&quot;&gt;Docker Hub&lt;/a&gt; now, and thus it will be a little complicated of working &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx&lt;/code&gt; in Windows container.&lt;/p&gt;

&lt;p&gt;Replace the above Dockerfile with the following contents:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e87572144c229e3dcaaa90e953fa8cee.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above Dockerfile did 4 steps as bellow.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Use Windows image to build a Windows instance.&lt;/li&gt;
  &lt;li&gt;Set up an Nginx server inside Windows container.&lt;/li&gt;
  &lt;li&gt;Copy everything you need to the Windows container, and put them under the Nginx.&lt;/li&gt;
  &lt;li&gt;Specify the running command.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The semantic is almost the same as the Linux’s, except that Nginx doesn’t have a Windows image now.  The syntax is different, you need to note the &lt;code class=&quot;highlighter-rouge&quot;&gt;file path&lt;/code&gt;, and using &lt;code class=&quot;highlighter-rouge&quot;&gt;PowerShell&lt;/code&gt; in windows container. For more information about PowerShell command, see &lt;a href=&quot;https://docs.microsoft.com/en-us/powershell/scripting/how-to-use-docs?view=powershell-7&quot;&gt;PowerShell&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;build-your-image&quot;&gt;Build your Image&lt;/h1&gt;
&lt;p&gt;You can get an image from either building a Dockerfile, or pulling from a registry. A Dockerfile produces an image, which consists of a set of layers.&lt;/p&gt;

&lt;p&gt;The following quote explains the mechanism and advantages of the &lt;a href=&quot;https://en.wikipedia.org/wiki/UnionFS&quot;&gt;Union File System&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
Each image consists of a series of layers. Docker makes use of union file systems to combine these layers into a single image. Union file systems allow files and directories of separate file systems, known as branches, to be transparently overlaid, forming a single coherent file system.
&lt;/p&gt;
&lt;p&gt;
Each instruction in a Dockerfile creates a layer in the image. When you change the Dockerfile and rebuild the image, only those layers which have changed are rebuilt. This is part of what makes images so lightweight, small, and fast, when compared to other virtualization technologies.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Make sure you are in the folder that contains the Dockerfile, Use the following command to build your image:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/f4b8bb5a94634f03b067dd9a336fdc0b.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--tag&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;-t&lt;/code&gt; specifies that a name and optionally a tag in the &lt;code class=&quot;highlighter-rouge&quot;&gt;name:tag&lt;/code&gt; format. dot ‘.’ specifies the path is the current directory.&lt;/p&gt;

&lt;p&gt;As the above mentioned that building an image depends on a Dockerfile, So what is the path rule of Dockerfile. You can specify the Dockerfile path explicitly or use the default path. Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;--file&lt;/code&gt; to specify the name of the Dockerfile, the default is &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH/Dockerfile&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/de8f75ac7c30a50d2f095301e0d9b4c7.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;run-your-image-as-a-container&quot;&gt;Run your Image as a Container&lt;/h1&gt;
&lt;p&gt;You can run your image as a container. Use the following command to start a container.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/6ff4be245372ded7983c2cc56bf59af6.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above code will start a container with the image &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:2.0&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--publish&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;-p&lt;/code&gt;: Publish a container’s port(s) to the host. The &lt;code class=&quot;highlighter-rouge&quot;&gt;--publish 8080:80&lt;/code&gt; asks Docker to forward traffic incoming on the host’s port 8080 to the container’s port 80. If you don’t forward the traffic explicitly, then the firewall will prevent all network traffic from reaching your container.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--detach&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt;: Run container in background and print container ID&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--name&lt;/code&gt;: Assign a name to the container&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Visit your application on a browser at &lt;a href=&quot;http://localhost:8080&quot;&gt;localhost:8080&lt;/a&gt;. You will see your container is running well. If you want to delete your container,  you can use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/054a475620bf24bb7d96149c5f617384.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Or use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;--force&lt;/code&gt; to force the removal of a running container, without stopping the container first.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/9df3c4262ec00e2210d1d5c1426a7048.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;You’ve studied how to build and run your image, take a review look:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;When you write your Dockerfile, always start with the &lt;code class=&quot;highlighter-rouge&quot;&gt;FROM&lt;/code&gt; command, follow it with the steps to build up your private filesystem, and conclude with any metadata specifications. You can learn more directives on the &lt;a href=&quot;https://docs.docker.com/engine/reference/builder/&quot;&gt;Dockerfile reference&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Each Instructions in the Dockerfile will create a layer in the image. If you changed Dockerfile, and rebuild the image. Docker only rebuilds those layers that changed.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;--public&lt;/code&gt; command will forward traffic incoming from the host’s port to the container’s port.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Build and run your image</title>
   <link href="http://localhost:4000/docker/2020/07/08/build-and-run-your-image/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/build-and-run-your-image</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;navi-link&quot;&gt;Deploy Your first Docker App&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Build and run your image&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;introduction&quot;&gt;Introduction&lt;/h1&gt;

&lt;p&gt;Docker is a container technique. You can run Iof, IOS, Android, and OS, etc. In this episode, I am going to dive into containerizing a web application. You can clone this project’s source code on Github. This source code is simple, only contains a few HTML static files and a Dockerfile.&lt;/p&gt;

&lt;p&gt;The most basic way to containerizing an App is the following steps:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Build your image with a docker file&lt;/li&gt;
  &lt;li&gt;Run your image as a container&lt;/li&gt;
  &lt;li&gt;Share your image&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This article will explain to you almost everything you need to know while building your images.&lt;/p&gt;

&lt;p&gt;You can clone this project’s source code down with git command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/d0e2509259153461551d0988ade35a2d.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;dockerfile&quot;&gt;Dockerfile&lt;/h1&gt;
&lt;p&gt;In most of the cases, different containers(windows, Linux) need to match different Dockerfiles. So if you have an app that needs to deploy on both Windows container and Linux container, then you may need to write different Dockerfiles for Windows and Linux.&lt;/p&gt;

&lt;p&gt;As the project’s Dockerfile is for Linux Container, so let’s analyze the file first.&lt;/p&gt;
&lt;h2 id=&quot;linux&quot;&gt;Linux&lt;/h2&gt;

&lt;p&gt;The Dockerfile in the Linux_tweet_app looks like this:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/b4e2322fe24c4b25ac8de7259443c0f7.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;From the pre-exising &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx:latest&lt;/code&gt; image. This is an official image, for more information check &lt;a href=&quot;https://hub.docker.com/_/nginx&quot;&gt;Docker Hub Nginx&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This &lt;code class=&quot;highlighter-rouge&quot;&gt;COPY&lt;/code&gt; command is to copy from the &lt;strong&gt;host file&lt;/strong&gt; to the &lt;strong&gt;docker container&lt;/strong&gt;. The command pattern is &lt;code class=&quot;highlighter-rouge&quot;&gt;host_file container_file&lt;/code&gt;. The above command copied the &lt;code class=&quot;highlighter-rouge&quot;&gt;index.html&lt;/code&gt; file and the &lt;code class=&quot;highlighter-rouge&quot;&gt;linux.png&lt;/code&gt; file into a docker container and put them under the &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/share/nginx/&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPOSE&lt;/code&gt; command instructs the docker to listen on specific ports. &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPOSE 80 443&lt;/code&gt; makes Docker container listen on 80, 443 port.&lt;/p&gt;

&lt;p&gt;The last &lt;code class=&quot;highlighter-rouge&quot;&gt;CMD&lt;/code&gt; command specifies the run command within the container.&lt;/p&gt;

&lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;
&lt;p&gt;Linux and Windows are two completely different operating systems, and hence you can’t use the above Dockerfile.&lt;/p&gt;

&lt;p&gt;By the way, &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx&lt;/code&gt; also doesn’t have an image for windows in &lt;a href=&quot;https://hub.docker.com/_/nginx&quot;&gt;Docker Hub&lt;/a&gt; now, and thus it will be a little complicated of working &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx&lt;/code&gt; in Windows container.&lt;/p&gt;

&lt;p&gt;Replace the above Dockerfile with the following contents:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/e87572144c229e3dcaaa90e953fa8cee.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above Dockerfile did 4 steps as bellow.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Use Windows image to build a Windows instance.&lt;/li&gt;
  &lt;li&gt;Set up an Nginx server inside Windows container.&lt;/li&gt;
  &lt;li&gt;Copy everything you need to the Windows container, and put them under the Nginx.&lt;/li&gt;
  &lt;li&gt;Specify the running command.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The semantic is almost the same as the Linux’s, except that Nginx doesn’t have a Windows image now.  The syntax is different, you need to note the &lt;code class=&quot;highlighter-rouge&quot;&gt;file path&lt;/code&gt;, and using &lt;code class=&quot;highlighter-rouge&quot;&gt;PowerShell&lt;/code&gt; in windows container. For more information about PowerShell command, see &lt;a href=&quot;https://docs.microsoft.com/en-us/powershell/scripting/how-to-use-docs?view=powershell-7&quot;&gt;PowerShell&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;build-your-image&quot;&gt;Build your Image&lt;/h1&gt;
&lt;p&gt;You can get an image from either building a Dockerfile, or pulling from a registry. A Dockerfile produces an image, which consists of a set of layers.&lt;/p&gt;

&lt;p&gt;The following quote explains the mechanism and advantages of the &lt;a href=&quot;https://en.wikipedia.org/wiki/UnionFS&quot;&gt;Union File System&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote class=&quot;quote&quot;&gt;
&lt;p&gt;
Each image consists of a series of layers. Docker makes use of union file systems to combine these layers into a single image. Union file systems allow files and directories of separate file systems, known as branches, to be transparently overlaid, forming a single coherent file system.
&lt;/p&gt;
&lt;p&gt;
Each instruction in a Dockerfile creates a layer in the image. When you change the Dockerfile and rebuild the image, only those layers which have changed are rebuilt. This is part of what makes images so lightweight, small, and fast, when compared to other virtualization technologies.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Make sure you are in the folder that contains the Dockerfile, Use the following command to build your image:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/f4b8bb5a94634f03b067dd9a336fdc0b.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--tag&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;-t&lt;/code&gt; specifies that a name and optionally a tag in the &lt;code class=&quot;highlighter-rouge&quot;&gt;name:tag&lt;/code&gt; format. dot ‘.’ specifies the path is the current directory.&lt;/p&gt;

&lt;p&gt;As the above mentioned that building an image depends on a Dockerfile, So what is the path rule of Dockerfile. You can specify the Dockerfile path explicitly or use the default path. Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;--file&lt;/code&gt; to specify the name of the Dockerfile, the default is &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH/Dockerfile&lt;/code&gt;.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/de8f75ac7c30a50d2f095301e0d9b4c7.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;run-your-image-as-a-container&quot;&gt;Run your Image as a Container&lt;/h1&gt;
&lt;p&gt;You can run your image as a container. Use the following command to start a container.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/6ff4be245372ded7983c2cc56bf59af6.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;The above code will start a container with the image &lt;code class=&quot;highlighter-rouge&quot;&gt;tweet_app:2.0&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--publish&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;-p&lt;/code&gt;: Publish a container’s port(s) to the host. The &lt;code class=&quot;highlighter-rouge&quot;&gt;--publish 8080:80&lt;/code&gt; asks Docker to forward traffic incoming on the host’s port 8080 to the container’s port 80. If you don’t forward the traffic explicitly, then the firewall will prevent all network traffic from reaching your container.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--detach&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt;: Run container in background and print container ID&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--name&lt;/code&gt;: Assign a name to the container&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Visit your application on a browser at &lt;a href=&quot;http://localhost:8080&quot;&gt;localhost:8080&lt;/a&gt;. You will see your container is running well. If you want to delete your container,  you can use the following command.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/054a475620bf24bb7d96149c5f617384.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Or use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-f&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;--force&lt;/code&gt; to force the removal of a running container, without stopping the container first.&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/voltwu/9df3c4262ec00e2210d1d5c1426a7048.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;You’ve studied how to build and run your image, take a review look:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;When you write your Dockerfile, always start with the &lt;code class=&quot;highlighter-rouge&quot;&gt;FROM&lt;/code&gt; command, follow it with the steps to build up your private filesystem, and conclude with any metadata specifications. You can learn more directives on the &lt;a href=&quot;https://docs.docker.com/engine/reference/builder/&quot;&gt;Dockerfile reference&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Each Instructions in the Dockerfile will create a layer in the image. If you changed Dockerfile, and rebuild the image. Docker only rebuilds those layers that changed.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;--public&lt;/code&gt; command will forward traffic incoming from the host’s port to the container’s port.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>Getting Started</title>
   <link href="http://localhost:4000/docker/2020/07/08/getting-started/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/getting-started</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Getting Started&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;u&gt;Docker is a container technique, which has much lower overhead than VM&lt;/u&gt;. Docker contains a lot of advantages lightweight, convenience, quickness, and portable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.docker.com/&quot;&gt;Docker Inc&lt;/a&gt; lunched the docker project during 2011. Docker debuted to the public in 2013, release it as an &lt;a href=&quot;https://github.com/docker&quot;&gt;open-source&lt;/a&gt; project in May in the same year. In release 0.9, Docker writes its components by &lt;a href=&quot;https://en.wikipedia.org/wiki/Go_(programming_language)&quot;&gt;go&lt;/a&gt; language, instead of using the previous &lt;a href=&quot;https://en.wikipedia.org/wiki/LXC&quot;&gt;LXC&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Docker can package your application and dependency into a container, which is an isolated environment from others. Containers are lightweight and didn’t require an extra load of a hypervisor. You can launch multiple apps simultaneously in a container (&lt;strong&gt;Don’t recommend to run multiple apps in a single docker container, run them each in separate containers instead&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;Containers are running on top of &lt;strong&gt;Docker Engine&lt;/strong&gt;, which is a &lt;strong&gt;&lt;em&gt;client-server&lt;/em&gt;&lt;/strong&gt; infrastructure application that mainly involves &lt;strong&gt;CLI&lt;/strong&gt;, &lt;strong&gt;Rest API&lt;/strong&gt;, and &lt;strong&gt;Docker daemon&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Docker daemon&lt;/strong&gt;: A &lt;strong&gt;&lt;em&gt;server-side&lt;/em&gt;&lt;/strong&gt; technology, which is a type of a long-running program, manages underlying data, such as containers, apps, volumes, networks.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Rest API&lt;/strong&gt;: A set of interfaces, which defined between &lt;strong&gt;&lt;em&gt;client-side&lt;/em&gt;&lt;/strong&gt; and server-side, as a communication purpose.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;CLI(aka. &lt;em&gt;Command Line Interface&lt;/em&gt;)&lt;/strong&gt;: A client-side technology, which used to interact with users in a &lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Command-line_interface&quot;&gt;command-line window&lt;/a&gt;&lt;/em&gt;. CLI transfer commendations that users inputted into a &lt;strong&gt;Rest API&lt;/strong&gt; format then send those APIs to the server(&lt;strong&gt;Docker daemon&lt;/strong&gt;).&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker Engine, come from &lt;a href=&quot;https://docs.docker.com/get-started/overview/#the-docker-daemon&quot;&gt;docker.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Docker CLI doesn’t manage containers and other underlying resources directly. Docker CLI is only available to send REST APIs to the server. Those APIs instructs Docker Daemon to manage the underlying sources on the server-side. In most of the cases,  Docker Deamon and CLI installed in the same host. You can install Docker Deamon in a remote server, install CLI in local clients, configure clients related to the target docker daemon server.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Multiple CLI clients related to one Daemon server&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Docker Image&lt;/strong&gt; is a read-only template with instructions for creating a docker container. &lt;strong&gt;Docker container&lt;/strong&gt; is a runnable instance of a docker Image. On the other hand, a Docker Image can exist without docker containers, whereas, a docker container depends on docker images and use them to build up a run-time environment. So their relationship is that &lt;u&gt;a docker container is an instance of a docker image&lt;/u&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Docker registry&lt;/strong&gt; store docker images. &lt;em&gt;Docker Hub&lt;/em&gt; is a public registry that anyone can use, and Docker Engine looks for docker images on Docker Hub by default. You can even configure to run your own registry.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-c.svg&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker architecture, come from &lt;a href=&quot;https://docs.docker.com/get-started/overview/#docker-architecture&quot;&gt;docker.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Getting Started</title>
   <link href="http://localhost:4000/docker/2020/07/08/getting-started/"/>
   <updated>2020-07-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/getting-started</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/docker/2020/07/08/docker-tutorial/&quot; class=&quot;navi-link&quot;&gt;Docker&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Getting Started&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;u&gt;Docker is a container technique, which has much lower overhead than VM&lt;/u&gt;. Docker contains a lot of advantages lightweight, convenience, quickness, and portable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.docker.com/&quot;&gt;Docker Inc&lt;/a&gt; lunched the docker project during 2011. Docker debuted to the public in 2013, release it as an &lt;a href=&quot;https://github.com/docker&quot;&gt;open-source&lt;/a&gt; project in May in the same year. In release 0.9, Docker writes its components by &lt;a href=&quot;https://en.wikipedia.org/wiki/Go_(programming_language)&quot;&gt;go&lt;/a&gt; language, instead of using the previous &lt;a href=&quot;https://en.wikipedia.org/wiki/LXC&quot;&gt;LXC&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Docker can package your application and dependency into a container, which is an isolated environment from others. Containers are lightweight and didn’t require an extra load of a hypervisor. You can launch multiple apps simultaneously in a container (&lt;strong&gt;Don’t recommend to run multiple apps in a single docker container, run them each in separate containers instead&lt;/strong&gt;).&lt;/p&gt;

&lt;p&gt;Containers are running on top of &lt;strong&gt;Docker Engine&lt;/strong&gt;, which is a &lt;strong&gt;&lt;em&gt;client-server&lt;/em&gt;&lt;/strong&gt; infrastructure application that mainly involves &lt;strong&gt;CLI&lt;/strong&gt;, &lt;strong&gt;Rest API&lt;/strong&gt;, and &lt;strong&gt;Docker daemon&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Docker daemon&lt;/strong&gt;: A &lt;strong&gt;&lt;em&gt;server-side&lt;/em&gt;&lt;/strong&gt; technology, which is a type of a long-running program, manages underlying data, such as containers, apps, volumes, networks.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Rest API&lt;/strong&gt;: A set of interfaces, which defined between &lt;strong&gt;&lt;em&gt;client-side&lt;/em&gt;&lt;/strong&gt; and server-side, as a communication purpose.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;CLI(aka. &lt;em&gt;Command Line Interface&lt;/em&gt;)&lt;/strong&gt;: A client-side technology, which used to interact with users in a &lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Command-line_interface&quot;&gt;command-line window&lt;/a&gt;&lt;/em&gt;. CLI transfer commendations that users inputted into a &lt;strong&gt;Rest API&lt;/strong&gt; format then send those APIs to the server(&lt;strong&gt;Docker daemon&lt;/strong&gt;).&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker Engine, come from &lt;a href=&quot;https://docs.docker.com/get-started/overview/#the-docker-daemon&quot;&gt;docker.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Docker CLI doesn’t manage containers and other underlying resources directly. Docker CLI is only available to send REST APIs to the server. Those APIs instructs Docker Daemon to manage the underlying sources on the server-side. In most of the cases,  Docker Deamon and CLI installed in the same host. You can install Docker Deamon in a remote server, install CLI in local clients, configure clients related to the target docker daemon server.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Multiple CLI clients related to one Daemon server&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Docker Image&lt;/strong&gt; is a read-only template with instructions for creating a docker container. &lt;strong&gt;Docker container&lt;/strong&gt; is a runnable instance of a docker Image. On the other hand, a Docker Image can exist without docker containers, whereas, a docker container depends on docker images and use them to build up a run-time environment. So their relationship is that &lt;u&gt;a docker container is an instance of a docker image&lt;/u&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Docker registry&lt;/strong&gt; store docker images. &lt;em&gt;Docker Hub&lt;/em&gt; is a public registry that anyone can use, and Docker Engine looks for docker images on Docker Hub by default. You can even configure to run your own registry.&lt;/p&gt;

&lt;div class=&quot;imgcenter&quot;&gt;
  &lt;p&gt;&lt;img src=&quot;/public/img/2020-07-08-getting-started-c.svg&quot; alt=&quot;Alt&quot; /&gt;&lt;em&gt;Docker architecture, come from &lt;a href=&quot;https://docs.docker.com/get-started/overview/#docker-architecture&quot;&gt;docker.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Docker Tutorial</title>
   <link href="http://localhost:4000/docker/2020/07/08/docker-tutorial/"/>
   <updated>2020-07-08T09:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/docker-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Let’s take a brief look at the docker container.&lt;/p&gt;

&lt;p&gt;Docker is similar to Virtual Machines. Both of them can emulate operating system environments. But, instead of a full operating system on Virtual Machines, the docker is only a set of processes that running on a shared OS kernel.&lt;/p&gt;

&lt;p&gt;Docker is a container technique, which is lightweight and has a lower overhead than VM. By contrast, VM(eg.&lt;a href=&quot;https://www.vmware.com/&quot;&gt;VMware&lt;/a&gt; and &lt;a href=&quot;https://www.linux-kvm.org/page/Main_Page&quot;&gt;KVM&lt;/a&gt;) is a full virtual operating system that runs depends on virtual hardware, VM needs to emulate hardware and transfer users’ operation between the host and virtual machine. So VM commonly has a higher overhead than containers.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/getting-started/&quot; class=&quot;item-link&quot;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/getting-started/&quot; class=&quot;item-link&quot;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;item-link&quot;&gt;Deploy Your First Docker App&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;item-link&quot;&gt;Deploy Your First Docker App&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/11/manage-labels-on-docker/&quot; class=&quot;item-link&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/11/manage-labels-on-docker/&quot; class=&quot;item-link&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;item-link&quot;&gt;Docker Registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;item-link&quot;&gt;Docker Registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/12/22/docker-orchestration/&quot; class=&quot;item-link&quot;&gt;Docker Orchestration&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/12/22/docker-orchestration/&quot; class=&quot;item-link&quot;&gt;Docker Orchestration&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker Tutorial</title>
   <link href="http://localhost:4000/docker/2020/07/08/docker-tutorial/"/>
   <updated>2020-07-08T09:03:01+08:00</updated>
   <id>http://localhost:4000/docker/2020/07/08/docker-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Docker&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;Let’s take a brief look at the docker container.&lt;/p&gt;

&lt;p&gt;Docker is similar to Virtual Machines. Both of them can emulate operating system environments. But, instead of a full operating system on Virtual Machines, the docker is only a set of processes that running on a shared OS kernel.&lt;/p&gt;

&lt;p&gt;Docker is a container technique, which is lightweight and has a lower overhead than VM. By contrast, VM(eg.&lt;a href=&quot;https://www.vmware.com/&quot;&gt;VMware&lt;/a&gt; and &lt;a href=&quot;https://www.linux-kvm.org/page/Main_Page&quot;&gt;KVM&lt;/a&gt;) is a full virtual operating system that runs depends on virtual hardware, VM needs to emulate hardware and transfer users’ operation between the host and virtual machine. So VM commonly has a higher overhead than containers.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/getting-started/&quot; class=&quot;item-link&quot;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/getting-started/&quot; class=&quot;item-link&quot;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;item-link&quot;&gt;Deploy Your First Docker App&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/07/08/deploy-your-first-docker-app/&quot; class=&quot;item-link&quot;&gt;Deploy Your First Docker App&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/11/manage-labels-on-docker/&quot; class=&quot;item-link&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/11/manage-labels-on-docker/&quot; class=&quot;item-link&quot;&gt;Manage labels on docker(container and image)&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;item-link&quot;&gt;Docker Registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/08/13/docker-registry/&quot; class=&quot;item-link&quot;&gt;Docker Registry&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/12/22/docker-orchestration/&quot; class=&quot;item-link&quot;&gt;Docker Orchestration&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/docker/2020/12/22/docker-orchestration/&quot; class=&quot;item-link&quot;&gt;Docker Orchestration&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Logging</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/29/Logging/"/>
   <updated>2020-06-29T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/29/Logging</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Logging&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Have you met the problem that you want to log some information in the console prompt? If you try to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.WrirteLine&lt;/code&gt; method, the output window prompt may not appear. That’s because if a process doesn’t have a related console, then the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Error&lt;/code&gt; and the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Out&lt;/code&gt; are backed by the &lt;code class=&quot;highlighter-rouge&quot;&gt;Stream.Null&lt;/code&gt;, so you wouldn’t see anything output.&lt;/p&gt;

&lt;p&gt;You can switch to a non-IIS profile to make the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.WrirteLine&lt;/code&gt; method works. For more detailed information, &lt;a href=&quot;https://stackoverflow.com/questions/9614218/how-to-use-console-writeline-in-asp-net-c-during-debug/9614249&quot;&gt;look here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this article, I will discuss other ways of achieving it more artistic. This blog mainly divided into three parts. Each part represents a specific scenario, which you may log information.&lt;/p&gt;

&lt;h1 id=&quot;aspnet-core-web&quot;&gt;ASP.NET CORE Web&lt;/h1&gt;
&lt;p&gt;It’s easy to log information in the &lt;strong&gt;&lt;em&gt;ASP.NET CORE web application&lt;/em&gt;&lt;/strong&gt; because of the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; is a built-in service. The IoC container will contain it automatically as the project start.&lt;/p&gt;

&lt;p&gt;You can inject it via the constructor injection or the action injection. The following code injected an &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance via the constructor injection.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Microsoft.Extensions.Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;index action invoked.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;net-core-console-application&quot;&gt;.NET CORE Console Application&lt;/h1&gt;

&lt;p&gt;It’s a bit complicated to log in console application. As it’s a console application, so it’s doesn’t a built-in service as the preceding presented. So we need to implement our own &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance.&lt;/p&gt;

&lt;p&gt;It’s important to acknowledge the structure before we manually built it. I will roughly introduce its components. Three interfaces are mainly involved are the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Their relationship shows the following diagram.
&lt;img src=&quot;/public/img/2020-06-29-Logging-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt; depends on &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerProvider&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt; creates an &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance.&lt;/p&gt;

&lt;p&gt;Install &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.Logging&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.Logging.Console&lt;/code&gt; packages.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Install-Package Microsoft.Extensions.Logging
PM&amp;gt; Install-Package Microsoft.Extensions.Logging.Console
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then run the following code to implement logging in &lt;strong&gt;&lt;em&gt;.NET CORE Console&lt;/em&gt;&lt;/strong&gt; application.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ILoggerFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loggerFactory&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LoggerFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConsoleLoggerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//or&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//ILoggerFactory loggerFactory = new LoggerFactory().AddConsole();&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loggerFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CreateLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Program&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This is log message.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;unittest-app&quot;&gt;UnitTest App&lt;/h1&gt;

&lt;p&gt;It’s slightly different about logging between the &lt;strong&gt;XUnit&lt;/strong&gt; project and the &lt;strong&gt;NUnit&lt;/strong&gt; project. The &lt;strong&gt;XUnit&lt;/strong&gt; project doesn’t support the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Writeline&lt;/code&gt; method, however, the &lt;strong&gt;NUnit&lt;/strong&gt; project does.&lt;/p&gt;

&lt;p&gt;So, if you are running on an &lt;strong&gt;NUnit&lt;/strong&gt; project, you can directly use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Writeline&lt;/code&gt; method. If you are running on an &lt;strong&gt;XUnit&lt;/strong&gt; project, you should use the &lt;code class=&quot;highlighter-rouge&quot;&gt;ITestOutputHelper&lt;/code&gt; instead.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;XUnit Project&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UnitTest1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ITestOutputHelper&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;UnitTest1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ITestOutputHelper&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;From ITestOutputHelper&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;UNnit Project&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tests&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetUp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;From Console WriteLine&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open an additional output for the result.
&lt;img src=&quot;/public/img/2020-06-29-Logging-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-06-29-Logging-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Logging</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/29/Logging/"/>
   <updated>2020-06-29T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/29/Logging</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Logging&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Have you met the problem that you want to log some information in the console prompt? If you try to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.WrirteLine&lt;/code&gt; method, the output window prompt may not appear. That’s because if a process doesn’t have a related console, then the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Error&lt;/code&gt; and the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Out&lt;/code&gt; are backed by the &lt;code class=&quot;highlighter-rouge&quot;&gt;Stream.Null&lt;/code&gt;, so you wouldn’t see anything output.&lt;/p&gt;

&lt;p&gt;You can switch to a non-IIS profile to make the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.WrirteLine&lt;/code&gt; method works. For more detailed information, &lt;a href=&quot;https://stackoverflow.com/questions/9614218/how-to-use-console-writeline-in-asp-net-c-during-debug/9614249&quot;&gt;look here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this article, I will discuss other ways of achieving it more artistic. This blog mainly divided into three parts. Each part represents a specific scenario, which you may log information.&lt;/p&gt;

&lt;h1 id=&quot;aspnet-core-web&quot;&gt;ASP.NET CORE Web&lt;/h1&gt;
&lt;p&gt;It’s easy to log information in the &lt;strong&gt;&lt;em&gt;ASP.NET CORE web application&lt;/em&gt;&lt;/strong&gt; because of the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; is a built-in service. The IoC container will contain it automatically as the project start.&lt;/p&gt;

&lt;p&gt;You can inject it via the constructor injection or the action injection. The following code injected an &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance via the constructor injection.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Microsoft.Extensions.Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;index action invoked.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;net-core-console-application&quot;&gt;.NET CORE Console Application&lt;/h1&gt;

&lt;p&gt;It’s a bit complicated to log in console application. As it’s a console application, so it’s doesn’t a built-in service as the preceding presented. So we need to implement our own &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance.&lt;/p&gt;

&lt;p&gt;It’s important to acknowledge the structure before we manually built it. I will roughly introduce its components. Three interfaces are mainly involved are the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Their relationship shows the following diagram.
&lt;img src=&quot;/public/img/2020-06-29-Logging-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt; depends on &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerProvider&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;ILoggerFactory&lt;/code&gt; creates an &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&lt;/code&gt; instance.&lt;/p&gt;

&lt;p&gt;Install &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.Logging&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.Logging.Console&lt;/code&gt; packages.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Install-Package Microsoft.Extensions.Logging
PM&amp;gt; Install-Package Microsoft.Extensions.Logging.Console
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then run the following code to implement logging in &lt;strong&gt;&lt;em&gt;.NET CORE Console&lt;/em&gt;&lt;/strong&gt; application.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ILoggerFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loggerFactory&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LoggerFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConsoleLoggerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//or&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//ILoggerFactory loggerFactory = new LoggerFactory().AddConsole();&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loggerFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CreateLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Program&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This is log message.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;unittest-app&quot;&gt;UnitTest App&lt;/h1&gt;

&lt;p&gt;It’s slightly different about logging between the &lt;strong&gt;XUnit&lt;/strong&gt; project and the &lt;strong&gt;NUnit&lt;/strong&gt; project. The &lt;strong&gt;XUnit&lt;/strong&gt; project doesn’t support the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Writeline&lt;/code&gt; method, however, the &lt;strong&gt;NUnit&lt;/strong&gt; project does.&lt;/p&gt;

&lt;p&gt;So, if you are running on an &lt;strong&gt;NUnit&lt;/strong&gt; project, you can directly use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Writeline&lt;/code&gt; method. If you are running on an &lt;strong&gt;XUnit&lt;/strong&gt; project, you should use the &lt;code class=&quot;highlighter-rouge&quot;&gt;ITestOutputHelper&lt;/code&gt; instead.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;XUnit Project&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UnitTest1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ITestOutputHelper&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;UnitTest1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ITestOutputHelper&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;From ITestOutputHelper&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;UNnit Project&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tests&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetUp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Test1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;From Console WriteLine&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open an additional output for the result.
&lt;img src=&quot;/public/img/2020-06-29-Logging-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-06-29-Logging-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Response Compression</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/24/response-compression/"/>
   <updated>2020-06-24T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/24/response-compression</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Response Compression&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Asp.Net Core provides a response compression middleware, which used to reduce response size to improve responsiveness.&lt;/p&gt;

&lt;p&gt;Use response middleware when you are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Unable to use the &lt;a href=&quot;https://www.iis.net/overview/reliability/dynamiccachingandcompression&quot;&gt;IIS Dynamic Compression module&lt;/a&gt;, &lt;a href=&quot;https://httpd.apache.org/docs/current/mod/mod_deflate.html&quot;&gt;Apache mod_deflate module&lt;/a&gt;, or &lt;a href=&quot;https://docs.nginx.com/nginx/admin-guide/web-server/compression/&quot;&gt;Nginx Compression and Decompression&lt;/a&gt; because of those have a built-in response compression support.&lt;/li&gt;
  &lt;li&gt;Response size smaller than about 150-1000 bytes(depending on the file’s content and the efficiency of compression). The overhead of compressing small files may produce a compressed file larger than the uncompressed file about 150-1000 bytes.&lt;/li&gt;
  &lt;li&gt;Compress MIME types not belong to the default compression MIME types, like image/svg+xml.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The following code shows how to use response compression middleware in the &lt;strong&gt;&lt;em&gt;Startup&lt;/em&gt;&lt;/strong&gt; file&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;UseResponseCompression&lt;/code&gt; method to achieve response compression. As our previous article mentioned, the execution sequence is critical. So, the &lt;code class=&quot;highlighter-rouge&quot;&gt;app.UseResponseCompression&lt;/code&gt; must be called before any middleware that compresses responses.&lt;/p&gt;

&lt;p&gt;In most cases, a website contains a &lt;strong&gt;static file serving short-circuiting&lt;/strong&gt; middleware and an endpoint middleware. We need to be careful that the position of response compression should be before any of them. Like the following code illustrates:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseStaticFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseRouting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseEndpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoints&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;endpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MapRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can specify a response compression service by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;AddResponseCompression&lt;/code&gt; extension method in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt;, which accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&amp;lt;ResponseCompressionOptions&amp;gt;&lt;/code&gt; parameter.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Providers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BrotliCompressionProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Providers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GzipCompressionProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ResponseCompressionDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/jpeg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/font-woff2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/svg+xml&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableForHttps&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;BrotliCompressionProvider&lt;/code&gt; is for &lt;strong&gt;Brotli&lt;/strong&gt; encoding, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;GzipCompressionProvider&lt;/code&gt; is for &lt;strong&gt;Gzip&lt;/strong&gt; encoding. You can even provide your custom compression provider, which needs to implement the &lt;code class=&quot;highlighter-rouge&quot;&gt;ICompressionProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It’s not all MIMEs are supported for default response compression.  The following table illustrates a default set of MIME types for compression.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;MIME&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/javascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/json&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/xml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/css&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/json&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/xml&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We can note that the above list mimes don’t contain image related MIME types. We can replace or append with the Response Compression Middleware options to make it support our custom MIME types. Note that wildcard MIME types, such as &lt;code class=&quot;highlighter-rouge&quot;&gt;text/*&lt;/code&gt; aren’t supported.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Concat our custom MIME types to the default mime&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ResponseCompressionDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/jpeg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/font-woff2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/svg+xml&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//wildcard MIME types aren't supported&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// options.MimeTypes =&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//     ResponseCompressionDefaults.MimeTypes.Concat(&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//         new[] { &quot;image/*&quot; });&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;By default, the compression doesn’t support the Https connection. If you want to the response over HTTPS connection should be compression, then assign with &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; value.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableForHttps&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks for reading this, I hope this article can help you deal with your problems. Happy Dragon Boat Festive.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Response Compression</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/24/response-compression/"/>
   <updated>2020-06-24T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/24/response-compression</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;navi-link&quot;&gt;Performance&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Response Compression&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Asp.Net Core provides a response compression middleware, which used to reduce response size to improve responsiveness.&lt;/p&gt;

&lt;p&gt;Use response middleware when you are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Unable to use the &lt;a href=&quot;https://www.iis.net/overview/reliability/dynamiccachingandcompression&quot;&gt;IIS Dynamic Compression module&lt;/a&gt;, &lt;a href=&quot;https://httpd.apache.org/docs/current/mod/mod_deflate.html&quot;&gt;Apache mod_deflate module&lt;/a&gt;, or &lt;a href=&quot;https://docs.nginx.com/nginx/admin-guide/web-server/compression/&quot;&gt;Nginx Compression and Decompression&lt;/a&gt; because of those have a built-in response compression support.&lt;/li&gt;
  &lt;li&gt;Response size smaller than about 150-1000 bytes(depending on the file’s content and the efficiency of compression). The overhead of compressing small files may produce a compressed file larger than the uncompressed file about 150-1000 bytes.&lt;/li&gt;
  &lt;li&gt;Compress MIME types not belong to the default compression MIME types, like image/svg+xml.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The following code shows how to use response compression middleware in the &lt;strong&gt;&lt;em&gt;Startup&lt;/em&gt;&lt;/strong&gt; file&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Use the &lt;code class=&quot;highlighter-rouge&quot;&gt;UseResponseCompression&lt;/code&gt; method to achieve response compression. As our previous article mentioned, the execution sequence is critical. So, the &lt;code class=&quot;highlighter-rouge&quot;&gt;app.UseResponseCompression&lt;/code&gt; must be called before any middleware that compresses responses.&lt;/p&gt;

&lt;p&gt;In most cases, a website contains a &lt;strong&gt;static file serving short-circuiting&lt;/strong&gt; middleware and an endpoint middleware. We need to be careful that the position of response compression should be before any of them. Like the following code illustrates:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseStaticFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseRouting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseEndpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoints&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;endpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MapRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can specify a response compression service by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;AddResponseCompression&lt;/code&gt; extension method in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt;, which accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&amp;lt;ResponseCompressionOptions&amp;gt;&lt;/code&gt; parameter.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddResponseCompression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Providers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BrotliCompressionProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Providers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GzipCompressionProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ResponseCompressionDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/jpeg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/font-woff2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/svg+xml&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableForHttps&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;BrotliCompressionProvider&lt;/code&gt; is for &lt;strong&gt;Brotli&lt;/strong&gt; encoding, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;GzipCompressionProvider&lt;/code&gt; is for &lt;strong&gt;Gzip&lt;/strong&gt; encoding. You can even provide your custom compression provider, which needs to implement the &lt;code class=&quot;highlighter-rouge&quot;&gt;ICompressionProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It’s not all MIMEs are supported for default response compression.  The following table illustrates a default set of MIME types for compression.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;MIME&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/javascript&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/json&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;application/xml&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/css&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/html&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/json&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/plain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;text/xml&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We can note that the above list mimes don’t contain image related MIME types. We can replace or append with the Response Compression Middleware options to make it support our custom MIME types. Note that wildcard MIME types, such as &lt;code class=&quot;highlighter-rouge&quot;&gt;text/*&lt;/code&gt; aren’t supported.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Concat our custom MIME types to the default mime&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ResponseCompressionDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MimeTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/jpeg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/font-woff2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;image/svg+xml&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//wildcard MIME types aren't supported&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// options.MimeTypes =&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//     ResponseCompressionDefaults.MimeTypes.Concat(&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//         new[] { &quot;image/*&quot; });&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;By default, the compression doesn’t support the Https connection. If you want to the response over HTTPS connection should be compression, then assign with &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; value.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnableForHttps&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks for reading this, I hope this article can help you deal with your problems. Happy Dragon Boat Festive.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Performance</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/24/performance/"/>
   <updated>2020-06-24T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/24/performance</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Performance&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/response-compression/&quot; class=&quot;item-link&quot;&gt;Response Compression&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/response-compression/&quot; class=&quot;item-link&quot;&gt;Response Compression&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/02/26/cache-static-resources/&quot; class=&quot;item-link&quot;&gt;Caching Static Resources&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/02/26/cache-static-resources/&quot; class=&quot;item-link&quot;&gt;Caching Static Resources&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Performance</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/24/performance/"/>
   <updated>2020-06-24T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/24/performance</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Performance&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/response-compression/&quot; class=&quot;item-link&quot;&gt;Response Compression&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/response-compression/&quot; class=&quot;item-link&quot;&gt;Response Compression&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/02/26/cache-static-resources/&quot; class=&quot;item-link&quot;&gt;Caching Static Resources&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2021/02/26/cache-static-resources/&quot; class=&quot;item-link&quot;&gt;Caching Static Resources&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Policy Based Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/18/policy-based-authorization/"/>
   <updated>2020-06-18T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/18/policy-based-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;policy based authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Underneath the previous cover, we mentioned &lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/#policy-based-role-checks&quot;&gt;role-based authorization&lt;/a&gt;. You may hear another term, which is known as &lt;strong&gt;&lt;em&gt;claim-based authorization&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;You can found this project’s source code repository in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;Authentication&amp;amp;Authorization&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;claim-based-authorization-example&quot;&gt;Claim-based Authorization Example&lt;/h1&gt;

&lt;p&gt;The principle of &lt;strong&gt;&lt;em&gt;claim-based authorization&lt;/em&gt;&lt;/strong&gt; is that to check whether has target claims.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add a policy, which will require an Email claim type existing.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;emailRequire&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RequireClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the policy against a controller or an action.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[authorize(Policy = &quot;emailRequire&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailRequireController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example illustrates a simple role-based authorization, which involves another knowledge spot of this article, &lt;strong&gt;Policy-Based Authorization&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;There have three primary interfaces(&lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt;&lt;/strong&gt;, &lt;strong&gt;IAuthorizationHandler&lt;/strong&gt;, &lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt;&lt;/strong&gt;), those are the foundation of the policy-based authorization.&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationservice&quot;&gt;IAuthorizationService&lt;/h1&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt;’s main responsibility is to check policy-based permission for a user.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Microsoft.AspNetCore.Authorization&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     Checks policy based permissions for a user&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IAuthorizationService&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Checks if a user meets a specific set of &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     requirements for the specified resource&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Parameters:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   user:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The user to evaluate the requirements against.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   resource:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     An optional resource the policy should be &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     checked with. If a resource is not&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     required for policy evaluation you may &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     pass null as the value.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   requirements:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The requirements to evaluate.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Returns:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     A flag indicating whether authorization &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     has succeeded. This value is true when&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     the user fulfills the policy; otherwise false.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Remarks:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Resource is an optional parameter and &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     may be null. Please ensure that you check&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     it is not null before acting upon it.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;n&quot;&gt;IEnumerable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Checks if a user meets a specific authorization policy&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Parameters:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   user:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The user to check the policy against.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   resource:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     An optional resource the policy &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     should be checked with. If a resource is not&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     required for policy evaluation &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     you may pass null as the value.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   policyName:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The name of the policy to check against a specific context.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Returns:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     A flag indicating whether authorization&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     has succeeded. Returns a flag indicating&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     whether the user, and optional resource has&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     fulfilled the policy. true when the&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     policy has been fulfilled; otherwise false.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Remarks:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Resource is an optional parameter and may&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     be null. Please ensure that you check&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     it is not null before acting upon it.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policyName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt; has two methods, and one of them requires a set of &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt;, we will talk this interface later.&lt;/p&gt;

&lt;p&gt;The following code import from &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/security/authorization/policies?view=aspnetcore-3.1&quot;&gt;official website&lt;/a&gt;, and it shows the simplified (and annotated with comments) default implementation of the authorization service:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
             &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;IEnumerable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Create a tracking context from the authorization inputs.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_contextFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// By default this returns an &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// IEnumerable&amp;lt;IAuthorizationHandlers&amp;gt; from DI.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handlers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_handlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetHandlersAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Invoke all handlers.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HandleAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Check the context, by default success is when all &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// requirements have been met.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_evaluator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can have the following inclusion that handlers will be used to authorize requirements in authorization service.
&lt;img src=&quot;/public/img/2020-06-18-policy-based-authorization-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationrequirement&quot;&gt;IAuthorizationRequirement&lt;/h1&gt;
&lt;p&gt;A policy can use requirements to evaluate a user’s principle. A custom requirement class needs to realize from the &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt; interface.  In our “emailsPolicy” policy, we build an &lt;code class=&quot;highlighter-rouge&quot;&gt;EmailsRequirement&lt;/code&gt; class, which can be implemented as the following code.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EmailsRequirement&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;EmailsRequirement&lt;/code&gt; class has s single constructor, which accepts an array of emails, like Gmail, Outlook, etc…&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationhandler&quot;&gt;IAuthorizationHandler&lt;/h1&gt;
&lt;p&gt;The &lt;strong&gt;&lt;em&gt;RequireHandler&lt;/em&gt;&lt;/strong&gt; response to authorize the preceding defined authorization requirement. The &lt;strong&gt;&lt;em&gt;RequireHandler&lt;/em&gt;&lt;/strong&gt; needs to implement the &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationHandler?view=aspnetcore-3.1&quot;&gt;IAuthorizationHandler&lt;/a&gt;, whose main responsibility is to authorize is if requirements are met.&lt;/p&gt;

&lt;p&gt;We don’t need to derive our class from the &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt;, because it’s a little complicated. Usually, we use another class &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandler&amp;lt;T&amp;gt;&lt;/code&gt; instead, which is typically a one to one relationship, and it derived from &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt;. If you want to authorize multiple requirements, please directly implements from &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt; interface.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EmailsRequireHandler&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AuthorizationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HandleRequirementAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AuthorizationHandlerContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;EmailsRequirement&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userAllClaims&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//check is if  userAllClaims contains all requirement items.&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;containsAll&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userAllClaims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;containsAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Succeed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CompletedTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Regardless of implements from &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandler&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthorizationHandler&lt;/code&gt;, both &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandlerContext&lt;/code&gt; will be injected in via constructor dependency injection.&lt;/p&gt;

&lt;p&gt;If requirements are met, then invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;success()&lt;/code&gt; method to represent authorize success. If you don’t invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;success()&lt;/code&gt; method, or invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;fail()&lt;/code&gt; method, then it represents authorization failed.&lt;/p&gt;

&lt;p&gt;Note:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;If a handler calls &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Succeed&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Fail&lt;/code&gt;, all other handlers are still called. This allows requirements to produce side effects, such as logging, which takes place even if another handler has successfully validated or failed a requirement. When set to &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeHandlersAfterFailure&lt;/code&gt; property (available in ASP.NET Core 1.1 and later) short-circuits the execution of handlers when &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Fail&lt;/code&gt; is called. &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeHandlersAfterFailure&lt;/code&gt; defaults to &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;, in which case all handlers are called.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;handler-registration&quot;&gt;Handler registration&lt;/h1&gt;
&lt;p&gt;Handlers are registered in the services collection during configuration. we can register our above example as the following code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//database configuration&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=CookieAuthDatabase;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//authentication&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//authorization&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;emailsPolicy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gmail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Outlook&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;QQ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//register our EmailsRequireHandler&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddSingleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EmailsRequireHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code illustrates a simple code that illustrates how to use authorization generally. This repository &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization/&quot;&gt;Authentication&amp;amp;Authorization security level example&lt;/a&gt; also includes another project, which is more useful and convenient. In that project, you can specify a security level, which will be used to compare with the source security level. If a user’s security reaches the target level, then it authorizes success, otherwise, authorizes fail.&lt;/p&gt;

&lt;p&gt;Thanks for reading, if you have any questions, please be free to leave comments at bellow.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Policy Based Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/18/policy-based-authorization/"/>
   <updated>2020-06-18T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/18/policy-based-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;policy based authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Underneath the previous cover, we mentioned &lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/#policy-based-role-checks&quot;&gt;role-based authorization&lt;/a&gt;. You may hear another term, which is known as &lt;strong&gt;&lt;em&gt;claim-based authorization&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;You can found this project’s source code repository in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;Authentication&amp;amp;Authorization&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;claim-based-authorization-example&quot;&gt;Claim-based Authorization Example&lt;/h1&gt;

&lt;p&gt;The principle of &lt;strong&gt;&lt;em&gt;claim-based authorization&lt;/em&gt;&lt;/strong&gt; is that to check whether has target claims.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add a policy, which will require an Email claim type existing.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;emailRequire&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RequireClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add the policy against a controller or an action.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[authorize(Policy = &quot;emailRequire&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailRequireController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example illustrates a simple role-based authorization, which involves another knowledge spot of this article, &lt;strong&gt;Policy-Based Authorization&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;There have three primary interfaces(&lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt;&lt;/strong&gt;, &lt;strong&gt;IAuthorizationHandler&lt;/strong&gt;, &lt;strong&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt;&lt;/strong&gt;), those are the foundation of the policy-based authorization.&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationservice&quot;&gt;IAuthorizationService&lt;/h1&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt;’s main responsibility is to check policy-based permission for a user.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Microsoft.AspNetCore.Authorization&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     Checks policy based permissions for a user&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IAuthorizationService&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Checks if a user meets a specific set of &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     requirements for the specified resource&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Parameters:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   user:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The user to evaluate the requirements against.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   resource:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     An optional resource the policy should be &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     checked with. If a resource is not&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     required for policy evaluation you may &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     pass null as the value.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   requirements:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The requirements to evaluate.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Returns:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     A flag indicating whether authorization &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     has succeeded. This value is true when&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     the user fulfills the policy; otherwise false.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Remarks:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Resource is an optional parameter and &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     may be null. Please ensure that you check&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     it is not null before acting upon it.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;n&quot;&gt;IEnumerable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Summary:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Checks if a user meets a specific authorization policy&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Parameters:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   user:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The user to check the policy against.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   resource:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     An optional resource the policy &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     should be checked with. If a resource is not&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     required for policy evaluation &lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     you may pass null as the value.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//   policyName:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     The name of the policy to check against a specific context.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Returns:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     A flag indicating whether authorization&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     has succeeded. Returns a flag indicating&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     whether the user, and optional resource has&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     fulfilled the policy. true when the&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     policy has been fulfilled; otherwise false.&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Remarks:&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     Resource is an optional parameter and may&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     be null. Please ensure that you check&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//     it is not null before acting upon it.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
          &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policyName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.iauthorizationservice?view=aspnetcore-3.1&quot;&gt;IAuthorizationService&lt;/a&gt; has two methods, and one of them requires a set of &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt;, we will talk this interface later.&lt;/p&gt;

&lt;p&gt;The following code import from &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/security/authorization/policies?view=aspnetcore-3.1&quot;&gt;official website&lt;/a&gt;, and it shows the simplified (and annotated with comments) default implementation of the authorization service:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthorizationResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AuthorizeAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
             &lt;span class=&quot;kt&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;IEnumerable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Create a tracking context from the authorization inputs.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_contextFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// By default this returns an &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// IEnumerable&amp;lt;IAuthorizationHandlers&amp;gt; from DI.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handlers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_handlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetHandlersAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Invoke all handlers.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handlers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HandleAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Check the context, by default success is when all &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// requirements have been met.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_evaluator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can have the following inclusion that handlers will be used to authorize requirements in authorization service.
&lt;img src=&quot;/public/img/2020-06-18-policy-based-authorization-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationrequirement&quot;&gt;IAuthorizationRequirement&lt;/h1&gt;
&lt;p&gt;A policy can use requirements to evaluate a user’s principle. A custom requirement class needs to realize from the &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationRequirement?view=aspnetcore-3.1&quot;&gt;IAuthorizationRequirement&lt;/a&gt; interface.  In our “emailsPolicy” policy, we build an &lt;code class=&quot;highlighter-rouge&quot;&gt;EmailsRequirement&lt;/code&gt; class, which can be implemented as the following code.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EmailsRequirement&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IAuthorizationRequirement&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;EmailsRequirement&lt;/code&gt; class has s single constructor, which accepts an array of emails, like Gmail, Outlook, etc…&lt;/p&gt;

&lt;h1 id=&quot;iauthorizationhandler&quot;&gt;IAuthorizationHandler&lt;/h1&gt;
&lt;p&gt;The &lt;strong&gt;&lt;em&gt;RequireHandler&lt;/em&gt;&lt;/strong&gt; response to authorize the preceding defined authorization requirement. The &lt;strong&gt;&lt;em&gt;RequireHandler&lt;/em&gt;&lt;/strong&gt; needs to implement the &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authorization.IAuthorizationHandler?view=aspnetcore-3.1&quot;&gt;IAuthorizationHandler&lt;/a&gt;, whose main responsibility is to authorize is if requirements are met.&lt;/p&gt;

&lt;p&gt;We don’t need to derive our class from the &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt;, because it’s a little complicated. Usually, we use another class &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandler&amp;lt;T&amp;gt;&lt;/code&gt; instead, which is typically a one to one relationship, and it derived from &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt;. If you want to authorize multiple requirements, please directly implements from &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthroizationHandler&lt;/code&gt; interface.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EmailsRequireHandler&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AuthorizationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HandleRequirementAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;AuthorizationHandlerContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;EmailsRequirement&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userAllClaims&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//check is if  userAllClaims contains all requirement items.&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;containsAll&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userAllClaims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;containsAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Succeed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CompletedTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Regardless of implements from &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandler&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;IAuthorizationHandler&lt;/code&gt;, both &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizationHandlerContext&lt;/code&gt; will be injected in via constructor dependency injection.&lt;/p&gt;

&lt;p&gt;If requirements are met, then invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;success()&lt;/code&gt; method to represent authorize success. If you don’t invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;success()&lt;/code&gt; method, or invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;fail()&lt;/code&gt; method, then it represents authorization failed.&lt;/p&gt;

&lt;p&gt;Note:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;If a handler calls &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Succeed&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Fail&lt;/code&gt;, all other handlers are still called. This allows requirements to produce side effects, such as logging, which takes place even if another handler has successfully validated or failed a requirement. When set to &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeHandlersAfterFailure&lt;/code&gt; property (available in ASP.NET Core 1.1 and later) short-circuits the execution of handlers when &lt;code class=&quot;highlighter-rouge&quot;&gt;context.Fail&lt;/code&gt; is called. &lt;code class=&quot;highlighter-rouge&quot;&gt;InvokeHandlersAfterFailure&lt;/code&gt; defaults to &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;, in which case all handlers are called.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;handler-registration&quot;&gt;Handler registration&lt;/h1&gt;
&lt;p&gt;Handlers are registered in the services collection during configuration. we can register our above example as the following code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//database configuration&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; 
      &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=CookieAuthDatabase;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//authentication&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//authorization&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;emailsPolicy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;policyBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;EmailsRequirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gmail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Outlook&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;QQ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//register our EmailsRequireHandler&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddSingleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IAuthorizationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EmailsRequireHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code illustrates a simple code that illustrates how to use authorization generally. This repository &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization/&quot;&gt;Authentication&amp;amp;Authorization security level example&lt;/a&gt; also includes another project, which is more useful and convenient. In that project, you can specify a security level, which will be used to compare with the source security level. If a user’s security reaches the target level, then it authorizes success, otherwise, authorizes fail.&lt;/p&gt;

&lt;p&gt;Thanks for reading, if you have any questions, please be free to leave comments at bellow.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Role Based Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/15/role-based-authorization/"/>
   <updated>2020-06-15T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/15/role-based-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;role based authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;When users register on your website, you may want to distribute their different roles. For example, the user Ellen has comedian and citizen roles, and user LiWenliang has a whistleblower role. Different Roles have different permissions. In this article, I will show you how to implements a role-based authorization step by step.&lt;/p&gt;

&lt;h1 id=&quot;adding-roles&quot;&gt;Adding Roles&lt;/h1&gt;

&lt;p&gt;Multiple ways can achieve adding roles for a user. You can add it through a claim or an identity.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Role&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or add roles by &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt;(if you are using &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot;&gt;identity authorization&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;):&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//if the role doesn't exist,create it&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_roleManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RoleExistsAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_roleManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IdentityRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//add the role to the current user&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddToRoleAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;_roleManager&lt;/code&gt; is an instance of the type &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&amp;lt;IdentityRole&amp;gt;&lt;/code&gt;, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;_userManager&lt;/code&gt; is an instance of the type &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&amp;lt;IdentityUser&amp;gt;&lt;/code&gt;. Both instances inject via &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot;&gt;Constructor injection&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManger&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&lt;/code&gt; are under in the &lt;em&gt;Microsoft.AspNetCore.Identity&lt;/em&gt; namespace, so you needs to install the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.AspNetCore.Identity.EntityFrameworkCore&lt;/code&gt; package, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&lt;/code&gt; will automatically map actions into the database by Entity Framework Core.&lt;/p&gt;

&lt;h1 id=&quot;checking-roles&quot;&gt;Checking Roles&lt;/h1&gt;

&lt;p&gt;You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;authorize&lt;/code&gt; attribute with the &lt;code class=&quot;highlighter-rouge&quot;&gt;role&lt;/code&gt; parameter to authority a user’s roles. You can embed them against actions or controllers.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SecretAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecretController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can specify multiple roles as a comma separated list:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin,guest&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecretController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This controller would be only accessible by users who are members of the &lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt; role or the &lt;code class=&quot;highlighter-rouge&quot;&gt;guest&lt;/code&gt; role.&lt;/p&gt;

&lt;p&gt;If you apply multiple attributes then an accessing user must be a member of all the roles specified; the following sample requires that a user must be a member of both the &lt;code class=&quot;highlighter-rouge&quot;&gt;citizen&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;president&lt;/code&gt; role.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;citizen&quot;)]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;president&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WhiteHouseController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also lock down a controller but allow anonymous, unauthenticated access to individual actions.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Role = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Action1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowAnonymous&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Action2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;policy-based-role-checks&quot;&gt;Policy based role checks&lt;/h1&gt;
&lt;p&gt;Role requirements can also be expressed using the new Policy syntax, where a developer registers a policy at &lt;code class=&quot;highlighter-rouge&quot;&gt;startup&lt;/code&gt; as part of the &lt;code class=&quot;highlighter-rouge&quot;&gt;Authorization&lt;/code&gt; service configuration. This normally occurs in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices()&lt;/code&gt; in your &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup.cs&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RequireAdministratorRole&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;policy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RequireRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Administrator&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Policies are applied using the &lt;code class=&quot;highlighter-rouge&quot;&gt;Policy&lt;/code&gt; property on the &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizeAttribute&lt;/code&gt; attribute:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Policy = &quot;RequireAdministratorRole&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Secret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;getting-roles&quot;&gt;Getting Roles&lt;/h1&gt;
&lt;p&gt;You can use the following method to retrieve out all roles of a user.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//get a ClaimsPrincipal instance&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//all roles that user belongs to&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;roles&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Role&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//check is if user has a specify role&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsInRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are working on &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot;&gt;identity authorization&lt;/a&gt;, then check the following code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetUserAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;IList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;roles&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetRolesAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//.. more operations&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can found this project’s respository in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authentication and authroization&lt;/a&gt; github respository.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Role Based Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/15/role-based-authorization/"/>
   <updated>2020-06-15T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/15/role-based-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;role based authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;When users register on your website, you may want to distribute their different roles. For example, the user Ellen has comedian and citizen roles, and user LiWenliang has a whistleblower role. Different Roles have different permissions. In this article, I will show you how to implements a role-based authorization step by step.&lt;/p&gt;

&lt;h1 id=&quot;adding-roles&quot;&gt;Adding Roles&lt;/h1&gt;

&lt;p&gt;Multiple ways can achieve adding roles for a user. You can add it through a claim or an identity.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Role&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or add roles by &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt;(if you are using &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot;&gt;identity authorization&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;):&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//if the role doesn't exist,create it&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_roleManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RoleExistsAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_roleManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IdentityRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//add the role to the current user&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddToRoleAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;_roleManager&lt;/code&gt; is an instance of the type &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&amp;lt;IdentityRole&amp;gt;&lt;/code&gt;, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;_userManager&lt;/code&gt; is an instance of the type &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&amp;lt;IdentityUser&amp;gt;&lt;/code&gt;. Both instances inject via &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot;&gt;Constructor injection&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManger&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&lt;/code&gt; are under in the &lt;em&gt;Microsoft.AspNetCore.Identity&lt;/em&gt; namespace, so you needs to install the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.AspNetCore.Identity.EntityFrameworkCore&lt;/code&gt; package, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;RoleManager&lt;/code&gt; will automatically map actions into the database by Entity Framework Core.&lt;/p&gt;

&lt;h1 id=&quot;checking-roles&quot;&gt;Checking Roles&lt;/h1&gt;

&lt;p&gt;You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;authorize&lt;/code&gt; attribute with the &lt;code class=&quot;highlighter-rouge&quot;&gt;role&lt;/code&gt; parameter to authority a user’s roles. You can embed them against actions or controllers.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SecretAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecretController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can specify multiple roles as a comma separated list:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;admin,guest&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecretController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This controller would be only accessible by users who are members of the &lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt; role or the &lt;code class=&quot;highlighter-rouge&quot;&gt;guest&lt;/code&gt; role.&lt;/p&gt;

&lt;p&gt;If you apply multiple attributes then an accessing user must be a member of all the roles specified; the following sample requires that a user must be a member of both the &lt;code class=&quot;highlighter-rouge&quot;&gt;citizen&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;president&lt;/code&gt; role.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;citizen&quot;)]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[Authorize(Roles = &quot;president&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WhiteHouseController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also lock down a controller but allow anonymous, unauthenticated access to individual actions.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Role = &quot;admin&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Action1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowAnonymous&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Action2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;policy-based-role-checks&quot;&gt;Policy based role checks&lt;/h1&gt;
&lt;p&gt;Role requirements can also be expressed using the new Policy syntax, where a developer registers a policy at &lt;code class=&quot;highlighter-rouge&quot;&gt;startup&lt;/code&gt; as part of the &lt;code class=&quot;highlighter-rouge&quot;&gt;Authorization&lt;/code&gt; service configuration. This normally occurs in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices()&lt;/code&gt; in your &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup.cs&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorPages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddPolicy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RequireAdministratorRole&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;policy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;policy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RequireRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Administrator&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Policies are applied using the &lt;code class=&quot;highlighter-rouge&quot;&gt;Policy&lt;/code&gt; property on the &lt;code class=&quot;highlighter-rouge&quot;&gt;AuthorizeAttribute&lt;/code&gt; attribute:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize(Policy = &quot;RequireAdministratorRole&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Secret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;getting-roles&quot;&gt;Getting Roles&lt;/h1&gt;
&lt;p&gt;You can use the following method to retrieve out all roles of a user.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//get a ClaimsPrincipal instance&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//all roles that user belongs to&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;roles&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Role&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//check is if user has a specify role&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsInRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are working on &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot;&gt;identity authorization&lt;/a&gt;, then check the following code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetUserAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;IList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;roles&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetRolesAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//.. more operations&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can found this project’s respository in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authentication and authroization&lt;/a&gt; github respository.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Asp.Net Core Identity</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/"/>
   <updated>2020-06-09T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/09/aspnetcore-identity</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core identity&lt;/a&gt;
&lt;/div&gt;

&lt;!--navigation bar--&gt;
&lt;p&gt;The &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;previous article&lt;/a&gt; discussed how to use claim implements authentication, authentication basics, and its strength and weakness. &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; is another alternative way to implements authentication. Before this article start, let’s take a look at what’s is &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ASP.NET Core Identity:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;Is an API that supports user interface (UI) login functionality.&lt;/li&gt;
    &lt;li&gt;Manages users, passwords, profile data, roles, claims, tokens, email confirmation, and more.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;According to the above explanation, &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; is a little bit of a difference with &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;claims&lt;/a&gt;. We need to provides additional components that &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; needs, for example, the database.&lt;/p&gt;

&lt;p&gt;You can found this project’s source code in Github &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authentication&amp;amp;authorization&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;deploy-settings&quot;&gt;Deploy Settings&lt;/h1&gt;
&lt;p&gt;As &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; requires a database setting, I use the SQL server database. And because I use Entity Framework Core, so it doesn’t need me to create a database manually. Following is my database connection configuration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=IdentityAuthentication;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you are unfamiliar with the entity framework core, take a look at &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot;&gt;ef core&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The typical pattern is to call all the &lt;code class=&quot;highlighter-rouge&quot;&gt;Add{Service}&lt;/code&gt; methods, and then call all the &lt;code class=&quot;highlighter-rouge&quot;&gt;services.Configure{Service}&lt;/code&gt; methods.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=IdentityAuthentication;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IdentityRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// user settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowedUserNameCharacters&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._@+ &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireUniqueEmail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;//lock out settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DefaultLockoutTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromMinutes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxFailedAccessAttempts&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowedForNewUsers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// Password settings.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireDigit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireLowercase&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireNonAlphanumeric&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireUppercase&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequiredLength&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequiredUniqueChars&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddEntityFrameworkStores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDefaultTokenProviders&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureApplicationCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Cookie settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Expiration&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorRuntimeCompilation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above configuration specifies various authentication configurations, and it is similar to the previous &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/#deploy-authentication-settings&quot;&gt;claim example&lt;/a&gt;. In this example, I use &lt;code class=&quot;highlighter-rouge&quot;&gt;AddIdentity()&lt;/code&gt; rather than &lt;code class=&quot;highlighter-rouge&quot;&gt;AddAuthentication()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-06-09-aspnetcore-identity-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Even though the implementation is different, however, their implementation thoughts are the same. Another thing to note is the &lt;code class=&quot;highlighter-rouge&quot;&gt;AddEntityFrameworkStores&amp;lt;T&amp;gt;()&lt;/code&gt; method, so we need to install and import the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.AspNetCore.Identity.EntityFrameworkCore&lt;/code&gt; package.&lt;/p&gt;

&lt;h1 id=&quot;log-in&quot;&gt;LOG IN&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FindByNameAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//sign in&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signResult&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;PasswordSignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userinfo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;_userManager&lt;/code&gt; is a &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt; type, which manages user information. If you take a look at the previous &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/#log-in&quot;&gt;claim authentication login part&lt;/a&gt;, you will find out that this login method is much simpler.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager.FindByNameAsync&lt;/code&gt; method will query the database, which we provided before, to check is if the user exists. Identity does a lot of work under the code, so it’s much easier for us to focus on business logic concentratedly.&lt;/p&gt;

&lt;h1 id=&quot;log-out&quot;&gt;LOG OUT&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignOutAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Log out is quite easy, you only need to invoke &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOutAsync()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOut()&lt;/code&gt; on &lt;code class=&quot;highlighter-rouge&quot;&gt;_signInManager&lt;/code&gt;, which is a &lt;code class=&quot;highlighter-rouge&quot;&gt;SignInManager&lt;/code&gt; instance.&lt;/p&gt;
&lt;h1 id=&quot;register&quot;&gt;REGISTER&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Registerup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;UserName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;PasswordSignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userinfo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Register a new user is also very easy. As the Identity Authentication will do most of the work, so we only need to create an &lt;code class=&quot;highlighter-rouge&quot;&gt;IdentityUser&lt;/code&gt; instance, then invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateAsync()&lt;/code&gt; method, and pass in our user and password.&lt;/p&gt;

&lt;h1 id=&quot;test-identity&quot;&gt;Test Identity&lt;/h1&gt;
&lt;p&gt;The default web project templates allow anonymous access to the home pages. To test &lt;code class=&quot;highlighter-rouge&quot;&gt;authorization&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;identity&lt;/code&gt;, add &lt;code class=&quot;highlighter-rouge&quot;&gt;[Authorize]&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Userinfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You also can retrieve the user information back as the following methods.&lt;/p&gt;
&lt;div class=&quot;language-cs highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;@using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;@inject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UserManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userManager&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetUserAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;information&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;@if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NormalizedUserName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NormalizedEmail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PasswordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;authentication&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;preceding article&lt;/a&gt; and this article, we have studied how to use identity authentication and &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;claim authentication&lt;/a&gt;. Identity authentication provides a complete function, which includes database operation, user management, etc.. so you don’t need to operate SQL operations by yourself. However, &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;Claim authentication&lt;/a&gt; &lt;strong&gt;&lt;em&gt;doesn’t&lt;/em&gt;&lt;/strong&gt; provide SQL operations, so you have to implement SQL operations by yourself manually.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Asp.Net Core Identity</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/"/>
   <updated>2020-06-09T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/09/aspnetcore-identity</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core identity&lt;/a&gt;
&lt;/div&gt;

&lt;!--navigation bar--&gt;
&lt;p&gt;The &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;previous article&lt;/a&gt; discussed how to use claim implements authentication, authentication basics, and its strength and weakness. &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; is another alternative way to implements authentication. Before this article start, let’s take a look at what’s is &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ASP.NET Core Identity:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;Is an API that supports user interface (UI) login functionality.&lt;/li&gt;
    &lt;li&gt;Manages users, passwords, profile data, roles, claims, tokens, email confirmation, and more.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;According to the above explanation, &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; is a little bit of a difference with &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;claims&lt;/a&gt;. We need to provides additional components that &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; needs, for example, the database.&lt;/p&gt;

&lt;p&gt;You can found this project’s source code in Github &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authentication&amp;amp;authorization&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;deploy-settings&quot;&gt;Deploy Settings&lt;/h1&gt;
&lt;p&gt;As &lt;strong&gt;&lt;em&gt;ASP.NET CORE IDENTITY&lt;/em&gt;&lt;/strong&gt; requires a database setting, I use the SQL server database. And because I use Entity Framework Core, so it doesn’t need me to create a database manually. Following is my database connection configuration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=IdentityAuthentication;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you are unfamiliar with the entity framework core, take a look at &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot;&gt;ef core&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The typical pattern is to call all the &lt;code class=&quot;highlighter-rouge&quot;&gt;Add{Service}&lt;/code&gt; methods, and then call all the &lt;code class=&quot;highlighter-rouge&quot;&gt;services.Configure{Service}&lt;/code&gt; methods.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=IdentityAuthentication;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IdentityRole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// user settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowedUserNameCharacters&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._@+ &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireUniqueEmail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;//lock out settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DefaultLockoutTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromMinutes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxFailedAccessAttempts&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lockout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AllowedForNewUsers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// Password settings.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireDigit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireLowercase&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireNonAlphanumeric&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequireUppercase&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequiredLength&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequiredUniqueChars&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddEntityFrameworkStores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDefaultTokenProviders&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureApplicationCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Cookie settings&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Expiration&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddRazorRuntimeCompilation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above configuration specifies various authentication configurations, and it is similar to the previous &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/#deploy-authentication-settings&quot;&gt;claim example&lt;/a&gt;. In this example, I use &lt;code class=&quot;highlighter-rouge&quot;&gt;AddIdentity()&lt;/code&gt; rather than &lt;code class=&quot;highlighter-rouge&quot;&gt;AddAuthentication()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-06-09-aspnetcore-identity-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Even though the implementation is different, however, their implementation thoughts are the same. Another thing to note is the &lt;code class=&quot;highlighter-rouge&quot;&gt;AddEntityFrameworkStores&amp;lt;T&amp;gt;()&lt;/code&gt; method, so we need to install and import the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.AspNetCore.Identity.EntityFrameworkCore&lt;/code&gt; package.&lt;/p&gt;

&lt;h1 id=&quot;log-in&quot;&gt;LOG IN&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FindByNameAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//sign in&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signResult&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;PasswordSignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userinfo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;_userManager&lt;/code&gt; is a &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager&lt;/code&gt; type, which manages user information. If you take a look at the previous &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/#log-in&quot;&gt;claim authentication login part&lt;/a&gt;, you will find out that this login method is much simpler.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;UserManager.FindByNameAsync&lt;/code&gt; method will query the database, which we provided before, to check is if the user exists. Identity does a lot of work under the code, so it’s much easier for us to focus on business logic concentratedly.&lt;/p&gt;

&lt;h1 id=&quot;log-out&quot;&gt;LOG OUT&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignOutAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Log out is quite easy, you only need to invoke &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOutAsync()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOut()&lt;/code&gt; on &lt;code class=&quot;highlighter-rouge&quot;&gt;_signInManager&lt;/code&gt;, which is a &lt;code class=&quot;highlighter-rouge&quot;&gt;SignInManager&lt;/code&gt; instance.&lt;/p&gt;
&lt;h1 id=&quot;register&quot;&gt;REGISTER&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Registerup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;UserName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Email&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signInManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;PasswordSignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Succeeded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userinfo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Register a new user is also very easy. As the Identity Authentication will do most of the work, so we only need to create an &lt;code class=&quot;highlighter-rouge&quot;&gt;IdentityUser&lt;/code&gt; instance, then invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateAsync()&lt;/code&gt; method, and pass in our user and password.&lt;/p&gt;

&lt;h1 id=&quot;test-identity&quot;&gt;Test Identity&lt;/h1&gt;
&lt;p&gt;The default web project templates allow anonymous access to the home pages. To test &lt;code class=&quot;highlighter-rouge&quot;&gt;authorization&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;identity&lt;/code&gt;, add &lt;code class=&quot;highlighter-rouge&quot;&gt;[Authorize]&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Userinfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You also can retrieve the user information back as the following methods.&lt;/p&gt;
&lt;div class=&quot;language-cs highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;@using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;@inject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UserManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IdentityUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userManager&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetUserAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;information&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;@if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NormalizedUserName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NormalizedEmail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;br&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;@user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PasswordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;authentication&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;preceding article&lt;/a&gt; and this article, we have studied how to use identity authentication and &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;claim authentication&lt;/a&gt;. Identity authentication provides a complete function, which includes database operation, user management, etc.. so you don’t need to operate SQL operations by yourself. However, &lt;a href=&quot;https://voltwu.github.io/blog/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot;&gt;Claim authentication&lt;/a&gt; &lt;strong&gt;&lt;em&gt;doesn’t&lt;/em&gt;&lt;/strong&gt; provide SQL operations, so you have to implement SQL operations by yourself manually.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Authentication And Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/"/>
   <updated>2020-06-08T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;authentication and authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization Basics&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization Basics&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot; class=&quot;item-link&quot;&gt;Asp.Net Core Identity&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot; class=&quot;item-link&quot;&gt;Asp.Net Core Identity&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/&quot; class=&quot;item-link&quot;&gt;Role Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/&quot; class=&quot;item-link&quot;&gt;Role Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/18/policy-based-authorization/&quot; class=&quot;item-link&quot;&gt;Policy Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/18/policy-based-authorization/&quot; class=&quot;item-link&quot;&gt;Policy Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Authentication And Authorization</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/"/>
   <updated>2020-06-08T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;authentication and authorization&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization Basics&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization Basics&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot; class=&quot;item-link&quot;&gt;Asp.Net Core Identity&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/09/aspnetcore-identity/&quot; class=&quot;item-link&quot;&gt;Asp.Net Core Identity&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/&quot; class=&quot;item-link&quot;&gt;Role Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/15/role-based-authorization/&quot; class=&quot;item-link&quot;&gt;Role Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/18/policy-based-authorization/&quot; class=&quot;item-link&quot;&gt;Policy Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/18/policy-based-authorization/&quot; class=&quot;item-link&quot;&gt;Policy Based Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Authentication And Authorization Basics</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/"/>
   <updated>2020-06-08T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;authentication and authorization basics&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, we are going to discuss some basic concepts, and with a useful project. You can find and download this project on &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authenticaton &amp;amp; authorization&lt;/a&gt; repository.&lt;/p&gt;

&lt;p&gt;Authentication and Authorization are two things. However, they have similar concepts. Typically, Authentication determines a user’s identity, and Authorization determines what a user can do. Let’s think about this scenario that a person comes to your home. The first thing you need to ask is who you are. After you identify this person’s identity, then you determine what’s this person can do in your house.&lt;/p&gt;

&lt;h1 id=&quot;deploy-authentication-settings&quot;&gt;Deploy Authentication Settings&lt;/h1&gt;
&lt;p&gt;The following project illustrates how to use Cookie authentication. The &lt;em&gt;startup.cs&lt;/em&gt; file contains the following snippet.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//add database service&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=CookieAuthDatabase;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// add authentication dependency configuration&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// the following configuration will be used in the Authentication and Authorization middleware&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//add controller with views&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;//add development exception handler middleware&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseDeveloperExceptionPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseRouting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//determines user's identity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//determines what a user is able to do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseEndpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MapDefaultControllerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let’s look at the Authentication configuration first. Here, I deployed a cookie configuration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;The default authentication scheme name&lt;/em&gt; must be the same as &lt;em&gt;the cookie scheme name&lt;/em&gt;. Just as the above example, they both use the &lt;code class=&quot;highlighter-rouge&quot;&gt;CookieAuth&lt;/code&gt;. In the inner cookie’s configuration, we need to specify the cookie’s name and the login path. The default login path is &lt;em&gt;/Account/Login&lt;/em&gt; if the &lt;code class=&quot;highlighter-rouge&quot;&gt;LoginPath&lt;/code&gt; absent. The request that failed authorization will be automatic redirects via the 302 status code to the login path.&lt;/p&gt;

&lt;p&gt;A bunch of configuration options is available in &lt;code class=&quot;highlighter-rouge&quot;&gt;CookieAuthenticationOptions&lt;/code&gt;. With them, you can specify the cookie’s expired time, the cookie’s path, and the request denied path, etc.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//config is a type of CookieAuthenticationOptions&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//... other more configuration&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;log-in&quot;&gt;Log in&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//query this user from database&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
                      &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//check is if this user exists&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//login in, if user exists&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userprofile&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//redirects to login page, if user doesn't exist&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;HttpContext.SignInAsync&lt;/code&gt; method accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsPrincipal&lt;/code&gt; object. A &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsPrincipal&lt;/code&gt; consist of &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsIdentity&lt;/code&gt;. A &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsIdentity&lt;/code&gt; consist of &lt;code class=&quot;highlighter-rouge&quot;&gt;Claim&lt;/code&gt; list. We put our user’s information into a list of claims.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//new Claim(ClaimTypes.Email, 'email str'),&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//new Claim(ClaimTypes.Role, 'role')&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//...other identity fields&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;log-out&quot;&gt;Log out&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignOutAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Logout is quite easy, and you only need to invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOutAsync()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOut()&lt;/code&gt; method.&lt;/p&gt;

&lt;h1 id=&quot;register&quot;&gt;Register&lt;/h1&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Registerup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//query is if exists the same user in database&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//it doesn't exist same user,so save this user into database&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCount&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChangesAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//check is if insert success&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RCount&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;//log in in HttpContext&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userprofile&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//insert data failed&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//this name has already registered by others&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The process is similar to logins. See the &lt;a href=&quot;#log-in&quot;&gt;login part&lt;/a&gt; for a detailed explanation.&lt;/p&gt;

&lt;h1 id=&quot;test-authorization&quot;&gt;Test Authorization&lt;/h1&gt;
&lt;p&gt;The default web project templates allow anonymous access to the home pages. To test authorization, add &lt;code class=&quot;highlighter-rouge&quot;&gt;[Authorize]&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Userprofile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ClaimsIdentity&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ViewData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ViewData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;The above example is the almost simplest authentication. It doesn’t include identity authorization, OAuth and identity server, etc.. Even though, it is simple. But it also provides you a very scalable framework. As it’s flexible, you can add whatever additional functionality you want.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Authentication And Authorization Basics</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics/"/>
   <updated>2020-06-08T09:04:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/authentication-and-authorization-basics</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;navi-link&quot;&gt;security &amp;amp; identity&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;navi-link&quot;&gt;authentication and authorization&lt;/a&gt;
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;authentication and authorization basics&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this article, we are going to discuss some basic concepts, and with a useful project. You can find and download this project on &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-authentication-and-authorization&quot;&gt;authenticaton &amp;amp; authorization&lt;/a&gt; repository.&lt;/p&gt;

&lt;p&gt;Authentication and Authorization are two things. However, they have similar concepts. Typically, Authentication determines a user’s identity, and Authorization determines what a user can do. Let’s think about this scenario that a person comes to your home. The first thing you need to ask is who you are. After you identify this person’s identity, then you determine what’s this person can do in your house.&lt;/p&gt;

&lt;h1 id=&quot;deploy-authentication-settings&quot;&gt;Deploy Authentication Settings&lt;/h1&gt;
&lt;p&gt;The following project illustrates how to use Cookie authentication. The &lt;em&gt;startup.cs&lt;/em&gt; file contains the following snippet.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//add database service&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AppDbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=CookieAuthDatabase;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// add authentication dependency configuration&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// the following configuration will be used in the Authentication and Authorization middleware&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//add controller with views&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddControllersWithViews&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;//add development exception handler middleware&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseDeveloperExceptionPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseRouting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//determines user's identity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//determines what a user is able to do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseAuthorization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseEndpoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;opt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MapDefaultControllerRoute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let’s look at the Authentication configuration first. Here, I deployed a cookie configuration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddAuthentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;AddCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CookieAuth&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;user.cookie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LoginPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/Home/Login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;The default authentication scheme name&lt;/em&gt; must be the same as &lt;em&gt;the cookie scheme name&lt;/em&gt;. Just as the above example, they both use the &lt;code class=&quot;highlighter-rouge&quot;&gt;CookieAuth&lt;/code&gt;. In the inner cookie’s configuration, we need to specify the cookie’s name and the login path. The default login path is &lt;em&gt;/Account/Login&lt;/em&gt; if the &lt;code class=&quot;highlighter-rouge&quot;&gt;LoginPath&lt;/code&gt; absent. The request that failed authorization will be automatic redirects via the 302 status code to the login path.&lt;/p&gt;

&lt;p&gt;A bunch of configuration options is available in &lt;code class=&quot;highlighter-rouge&quot;&gt;CookieAuthenticationOptions&lt;/code&gt;. With them, you can specify the cookie’s expired time, the cookie’s path, and the request denied path, etc.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//config is a type of CookieAuthenticationOptions&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MaxAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExpireTimeSpan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TimeSpan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FromDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//... other more configuration&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;log-in&quot;&gt;Log in&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//query this user from database&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
                      &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                      &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//check is if this user exists&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//login in, if user exists&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userprofile&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//redirects to login page, if user doesn't exist&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;HttpContext.SignInAsync&lt;/code&gt; method accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsPrincipal&lt;/code&gt; object. A &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsPrincipal&lt;/code&gt; consist of &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsIdentity&lt;/code&gt;. A &lt;code class=&quot;highlighter-rouge&quot;&gt;ClaimsIdentity&lt;/code&gt; consist of &lt;code class=&quot;highlighter-rouge&quot;&gt;Claim&lt;/code&gt; list. We put our user’s information into a list of claims.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//new Claim(ClaimTypes.Email, 'email str'),&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//new Claim(ClaimTypes.Role, 'role')&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//...other identity fields&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;log-out&quot;&gt;Log out&lt;/h1&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Loginout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignOutAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Logout is quite easy, and you only need to invoke the &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOutAsync()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;SignOut()&lt;/code&gt; method.&lt;/p&gt;

&lt;h1 id=&quot;register&quot;&gt;Register&lt;/h1&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[HttpPost]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Registerup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//query is if exists the same user in database&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbRes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//it doesn't exist same user,so save this user into database&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RCount&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChangesAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//check is if insert success&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RCount&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;//log in in HttpContext&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Claim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwordHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userClaim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClaimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SignInAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPrinciple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userprofile&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//insert data failed&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//this name has already registered by others&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RedirectToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The process is similar to logins. See the &lt;a href=&quot;#log-in&quot;&gt;login part&lt;/a&gt; for a detailed explanation.&lt;/p&gt;

&lt;h1 id=&quot;test-authorization&quot;&gt;Test Authorization&lt;/h1&gt;
&lt;p&gt;The default web project templates allow anonymous access to the home pages. To test authorization, add &lt;code class=&quot;highlighter-rouge&quot;&gt;[Authorize]&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Authorize]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Userprofile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ClaimsPrincipal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ClaimsIdentity&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_claimsPrincipal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CookieAuthenticationDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AuthenticationScheme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ViewData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ClaimTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ViewData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;claimIdentity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Claims&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;passwordhash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;The above example is the almost simplest authentication. It doesn’t include identity authorization, OAuth and identity server, etc.. Even though, it is simple. But it also provides you a very scalable framework. As it’s flexible, you can add whatever additional functionality you want.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Security & Identity</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/security-and-identity/"/>
   <updated>2020-06-08T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/security-and-identity</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;security &amp;amp; identity&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Security & Identity</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/08/security-and-identity/"/>
   <updated>2020-06-08T09:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/08/security-and-identity</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;security &amp;amp; identity&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!--item--&gt;
&lt;div&gt;
  &lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
  &lt;ul&gt;
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
                  &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/authentication-and-authorization/&quot; class=&quot;item-link&quot;&gt;Authentication And Authorization&lt;/a&gt;&lt;/li&gt;
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!--item--&gt;
</content>
 </entry>
 
 <entry>
   <title>Add Custom Middleware</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/05/add-custom-middleware/"/>
   <updated>2020-06-05T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/05/add-custom-middleware</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;add custom middleware&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous episode, we build an anonymous middleware. Now, I am going to show you how to define middleware in another separate file, and how to use dependency injection in custom middleware.&lt;/p&gt;

&lt;p&gt;Before we start this article, let’s take a review of the previously defined anonymous middleware.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;User-Agent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Status403Forbidden&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;robot is not permitted&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method to add our custom middleware. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method accepts a delegate. In our custom middleware, if we want to invoke the next middleware, then we execute the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method, we can also &lt;strong&gt;short-circuiting&lt;/strong&gt; the request pipeline by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;I am going to add a custom &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddlware&lt;/code&gt; middleware, which can capture exceptions. The caught exception is going to be recorded into a log file by our &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddlware&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. define a &lt;em&gt;ExceptionHandlerMiddlware.cs&lt;/em&gt; file&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;share.middleware&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;//we log exception into a console window instead of a file.&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;current time : {0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message : {0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stack trace : \n{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StackTrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

                &lt;span class=&quot;c1&quot;&gt;//prompt user&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;An unexpected error occur, please contact the website manager.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddlewareExtension&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;UseExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2. register &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddleware&lt;/code&gt; through &lt;code class=&quot;highlighter-rouge&quot;&gt;UseExceptionHandlerMiddleware&lt;/code&gt; extension method&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//other code&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, we build an &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddleware&lt;/code&gt; class, which has a constructor method and an &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method. The constructor accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;RequestDelegate&lt;/code&gt; parameter, which represents the next middleware delegate. To execute the next middleware in sequential, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; created.&lt;/p&gt;

&lt;p&gt;The above example also uses dependency injection. The trick here is that don’t inject scoped service &lt;strong&gt;&lt;em&gt;via a constructor&lt;/em&gt;&lt;/strong&gt; because it will force the services to behave like a singleton. You should register your &lt;strong&gt;&lt;em&gt;scoped services&lt;/em&gt;&lt;/strong&gt; at the &lt;strong&gt;Invoke()&lt;/strong&gt; method’s signature.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Because middleware is constructed at app startup, not per-request, scoped lifetime services used by middleware constructors aren’t shared with other dependency-injected types during each request. If you must share a scoped service between your middleware and other types, add these services to the Invoke method’s signature.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MySignletonService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//if you want your services behave like singleton,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//register them via constructor&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MySignletonService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_signleton&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//if you want your services behave like scoped and transient,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//register them via the Invoke() method&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyScopedService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyTransientService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;transient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//await _next(httpContext);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For more information, see &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/write?view=aspnetcore-3.1#per-request-middleware-dependencies&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Add Custom Middleware</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/06/05/add-custom-middleware/"/>
   <updated>2020-06-05T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/06/05/add-custom-middleware</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;add custom middleware&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In the previous episode, we build an anonymous middleware. Now, I am going to show you how to define middleware in another separate file, and how to use dependency injection in custom middleware.&lt;/p&gt;

&lt;p&gt;Before we start this article, let’s take a review of the previously defined anonymous middleware.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;User-Agent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Status403Forbidden&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;robot is not permitted&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method to add our custom middleware. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method accepts a delegate. In our custom middleware, if we want to invoke the next middleware, then we execute the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method, we can also &lt;strong&gt;short-circuiting&lt;/strong&gt; the request pipeline by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;I am going to add a custom &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddlware&lt;/code&gt; middleware, which can capture exceptions. The caught exception is going to be recorded into a log file by our &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddlware&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. define a &lt;em&gt;ExceptionHandlerMiddlware.cs&lt;/em&gt; file&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;share.middleware&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;//we log exception into a console window instead of a file.&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;current time : {0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message : {0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LogError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stack trace : \n{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StackTrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

                &lt;span class=&quot;c1&quot;&gt;//prompt user&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;An unexpected error occur, please contact the website manager.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddlewareExtension&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;UseExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2. register &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddleware&lt;/code&gt; through &lt;code class=&quot;highlighter-rouge&quot;&gt;UseExceptionHandlerMiddleware&lt;/code&gt; extension method&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//other code&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, we build an &lt;code class=&quot;highlighter-rouge&quot;&gt;ExceptionHandlerMiddleware&lt;/code&gt; class, which has a constructor method and an &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method. The constructor accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;RequestDelegate&lt;/code&gt; parameter, which represents the next middleware delegate. To execute the next middleware in sequential, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; created.&lt;/p&gt;

&lt;p&gt;The above example also uses dependency injection. The trick here is that don’t inject scoped service &lt;strong&gt;&lt;em&gt;via a constructor&lt;/em&gt;&lt;/strong&gt; because it will force the services to behave like a singleton. You should register your &lt;strong&gt;&lt;em&gt;scoped services&lt;/em&gt;&lt;/strong&gt; at the &lt;strong&gt;Invoke()&lt;/strong&gt; method’s signature.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Because middleware is constructed at app startup, not per-request, scoped lifetime services used by middleware constructors aren’t shared with other dependency-injected types during each request. If you must share a scoped service between your middleware and other types, add these services to the Invoke method’s signature.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MySignletonService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//if you want your services behave like singleton,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//register them via constructor&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ExceptionHandlerMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestDelegate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MySignletonService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_signleton&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//if you want your services behave like scoped and transient,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//register them via the Invoke() method&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyScopedService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyTransientService&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;transient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//await _next(httpContext);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For more information, see &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/write?view=aspnetcore-3.1#per-request-middleware-dependencies&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Middleware</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/20/middleware/"/>
   <updated>2020-05-20T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/20/middleware</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Middleware&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;As our previous episodes, we have known that &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureService&lt;/code&gt; is a place we can register our service. So, where is the place to register our middleware?&lt;/p&gt;

&lt;p&gt;The answer is the Configure method. 
&lt;img src=&quot;/public/img/2020-05-20-middleware-c.png&quot; alt=&quot;Alt&quot; /&gt;
In this episode, we will learn basic concepts and usages about middleware.&lt;/p&gt;

&lt;h1 id=&quot;middleware-overview&quot;&gt;Middleware Overview&lt;/h1&gt;
&lt;p&gt;Middleware is a set of applications in the request processing pipeline, it process on both request and response. The following is a diagram copied from the official.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-20-middleware-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-20-middleware-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Each middleware may process both before the next call and after the next call. If a middleware doesn’t invoke the next middleware, it’s called as &lt;strong&gt;&lt;em&gt;short-circuiting&lt;/em&gt;&lt;/strong&gt;. &lt;strong&gt;&lt;em&gt;Short-circuiting&lt;/em&gt;&lt;/strong&gt; avoids the waste of resources. Let’s think about this scenario that you are handling static file resources, like js, CSS, font files. These requests only need to be processed by your static file processing middleware, and they do not need to be treated by deeper middleware. It saves application resources.&lt;/p&gt;

&lt;p&gt;The order of middleware placed is &lt;strong&gt;critical&lt;/strong&gt;, which affects security, performance, functionality. As middleware is processed one by one, so if you want to records exception logs, then you should place your exception handler at the front in the pipeline.&lt;/p&gt;

&lt;h1 id=&quot;a-simple-custom-middleware&quot;&gt;A Simple Custom Middleware&lt;/h1&gt;
&lt;p&gt;The following example uses two methods, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;. Both can register middleware.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This is my first custom middleware!\n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method is optical. We can only use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You need to use an asynchronous method to strengthen its flexibility. The &lt;code class=&quot;highlighter-rouge&quot;&gt;invoke()&lt;/code&gt; method represents starting to call the next middleware. It’s permitted to have custom actions before the next middleware call and after the next middleware call.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//actions before the next middleware call&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//actions after the next middleware call&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;whats-use-run-map&quot;&gt;What’s Use, Run, Map?&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Map&lt;/code&gt; are three methods you can use to configure the HTTP request pipeline.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method is an extension method that allows chaining multiple middleware delegates. The &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter represents the next middleware delegate. You can &lt;strong&gt;short-circuit&lt;/strong&gt; the request pipeline by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;User-Agent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//if no User-Agent found. then short-circuiting the request pipeline&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Status403Forbidden&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;robot is not permitted&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Welcome&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the above example, we suppose if a request doesn’t have a User-Agent header, then it’s an illegal request, which will be &lt;strong&gt;short-circuiting&lt;/strong&gt; by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the next middleware.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method doesn’t receive a &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter. The first &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method is always terminal and terminates the request pipeline. Its recommended to only use one &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method within one pipeline. If you have more than one &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method in a request pipeline, then except for the first &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method, other &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; methods will not execute.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I am always a short-circuiting method&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method always terminates the request pipeline, so it’s a &lt;strong&gt;&lt;em&gt;short-circuiting&lt;/em&gt;&lt;/strong&gt; method.That is also the reason that why &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; doesn’t have the &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter.&lt;/p&gt;

&lt;p&gt;You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; extensions to branch the request pipeline. The &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; branches the request pipeline based on its given path. we have already known that the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; is a terminal method, and &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; just can be used once per application. So it’s impossible to achieve multi-terminal with &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; strengthens &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;’s functionality. In other words, with &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; branching a request pipeline, an application can have more than one terminals.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/def&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /def path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/abc/def&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /abc/def path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/abc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /abc path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I am from non map method.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Request&lt;/th&gt;
      &lt;th&gt;Response&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/abc/def&lt;/td&gt;
      &lt;td&gt;you are on /abc/def path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/abc&lt;/td&gt;
      &lt;td&gt;you are on /abc path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/def&lt;/td&gt;
      &lt;td&gt;you are on /def path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost&lt;/td&gt;
      &lt;td&gt;I am from non map method.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span style=&quot;color:red&quot;&gt;Note:&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Because the route path matches in sequential, so the order is critical. Put the detailed path first.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;built-in-middleware&quot;&gt;Built-in Middleware&lt;/h1&gt;

&lt;p&gt;ASP.NET Core provides multiple useful built-in middlewares. The following table illustrates some of them.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Middleware&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Authentication&lt;/td&gt;
      &lt;td&gt;Adds authentication support.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Authorization&lt;/td&gt;
      &lt;td&gt;Adds authorization support.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;CORS&lt;/td&gt;
      &lt;td&gt;Configures Cross-Origin Resource Sharing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Diagnostics&lt;/td&gt;
      &lt;td&gt;Several separate middlewares that provide a developer exception page, exception handling, status code pages, and the default web page for new apps.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MVC&lt;/td&gt;
      &lt;td&gt;Processes requests with MVC/Razor Pages.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Static Files&lt;/td&gt;
      &lt;td&gt;Provides support for serving static files and directory browsing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;HTTPS Redirection&lt;/td&gt;
      &lt;td&gt;Redirect all HTTP requests to HTTPS.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Session&lt;/td&gt;
      &lt;td&gt;Provides support for managing user sessions.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;URL Rewrite&lt;/td&gt;
      &lt;td&gt;Provides support for rewriting URLs and redirecting requests.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Response Compression&lt;/td&gt;
      &lt;td&gt;Provides support for compressing responses.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Looking for entire built-in middlewares, see &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/?view=aspnetcore-3.1#built-in-middleware&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is the end of this article, we learned the concept of middleware and usage of middleware if you have any questions leave a message below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Middleware</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/20/middleware/"/>
   <updated>2020-05-20T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/20/middleware</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;navi-link&quot;&gt;Middleware Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Middleware&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;As our previous episodes, we have known that &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureService&lt;/code&gt; is a place we can register our service. So, where is the place to register our middleware?&lt;/p&gt;

&lt;p&gt;The answer is the Configure method. 
&lt;img src=&quot;/public/img/2020-05-20-middleware-c.png&quot; alt=&quot;Alt&quot; /&gt;
In this episode, we will learn basic concepts and usages about middleware.&lt;/p&gt;

&lt;h1 id=&quot;middleware-overview&quot;&gt;Middleware Overview&lt;/h1&gt;
&lt;p&gt;Middleware is a set of applications in the request processing pipeline, it process on both request and response. The following is a diagram copied from the official.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-20-middleware-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-20-middleware-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Each middleware may process both before the next call and after the next call. If a middleware doesn’t invoke the next middleware, it’s called as &lt;strong&gt;&lt;em&gt;short-circuiting&lt;/em&gt;&lt;/strong&gt;. &lt;strong&gt;&lt;em&gt;Short-circuiting&lt;/em&gt;&lt;/strong&gt; avoids the waste of resources. Let’s think about this scenario that you are handling static file resources, like js, CSS, font files. These requests only need to be processed by your static file processing middleware, and they do not need to be treated by deeper middleware. It saves application resources.&lt;/p&gt;

&lt;p&gt;The order of middleware placed is &lt;strong&gt;critical&lt;/strong&gt;, which affects security, performance, functionality. As middleware is processed one by one, so if you want to records exception logs, then you should place your exception handler at the front in the pipeline.&lt;/p&gt;

&lt;h1 id=&quot;a-simple-custom-middleware&quot;&gt;A Simple Custom Middleware&lt;/h1&gt;
&lt;p&gt;The following example uses two methods, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;. Both can register middleware.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;This is my first custom middleware!\n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method is optical. We can only use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You need to use an asynchronous method to strengthen its flexibility. The &lt;code class=&quot;highlighter-rouge&quot;&gt;invoke()&lt;/code&gt; method represents starting to call the next middleware. It’s permitted to have custom actions before the next middleware call and after the next middleware call.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//actions before the next middleware call&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//actions after the next middleware call&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;whats-use-run-map&quot;&gt;What’s Use, Run, Map?&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Map&lt;/code&gt; are three methods you can use to configure the HTTP request pipeline.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Use&lt;/code&gt; method is an extension method that allows chaining multiple middleware delegates. The &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter represents the next middleware delegate. You can &lt;strong&gt;short-circuit&lt;/strong&gt; the request pipeline by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the &lt;code class=&quot;highlighter-rouge&quot;&gt;Invoke()&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;User-Agent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;agents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//if no User-Agent found. then short-circuiting the request pipeline&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspNetCore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusCodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Status403Forbidden&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;robot is not permitted&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Welcome&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the above example, we suppose if a request doesn’t have a User-Agent header, then it’s an illegal request, which will be &lt;strong&gt;short-circuiting&lt;/strong&gt; by &lt;strong&gt;&lt;em&gt;not calling&lt;/em&gt;&lt;/strong&gt; the next middleware.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method doesn’t receive a &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter. The first &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method is always terminal and terminates the request pipeline. Its recommended to only use one &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method within one pipeline. If you have more than one &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method in a request pipeline, then except for the first &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method, other &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; methods will not execute.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I am always a short-circuiting method&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; method always terminates the request pipeline, so it’s a &lt;strong&gt;&lt;em&gt;short-circuiting&lt;/em&gt;&lt;/strong&gt; method.That is also the reason that why &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; doesn’t have the &lt;code class=&quot;highlighter-rouge&quot;&gt;next&lt;/code&gt; parameter.&lt;/p&gt;

&lt;p&gt;You can use &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; extensions to branch the request pipeline. The &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; branches the request pipeline based on its given path. we have already known that the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; is a terminal method, and &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt; just can be used once per application. So it’s impossible to achieve multi-terminal with &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; strengthens &lt;code class=&quot;highlighter-rouge&quot;&gt;Run&lt;/code&gt;’s functionality. In other words, with &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; branching a request pipeline, an application can have more than one terminals.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/def&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /def path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/abc/def&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /abc/def path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/abc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;you are on /abc path.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I am from non map method.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Request&lt;/th&gt;
      &lt;th&gt;Response&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/abc/def&lt;/td&gt;
      &lt;td&gt;you are on /abc/def path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/abc&lt;/td&gt;
      &lt;td&gt;you are on /abc path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost/def&lt;/td&gt;
      &lt;td&gt;you are on /def path.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;localhost&lt;/td&gt;
      &lt;td&gt;I am from non map method.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span style=&quot;color:red&quot;&gt;Note:&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Because the route path matches in sequential, so the order is critical. Put the detailed path first.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;built-in-middleware&quot;&gt;Built-in Middleware&lt;/h1&gt;

&lt;p&gt;ASP.NET Core provides multiple useful built-in middlewares. The following table illustrates some of them.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Middleware&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Authentication&lt;/td&gt;
      &lt;td&gt;Adds authentication support.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Authorization&lt;/td&gt;
      &lt;td&gt;Adds authorization support.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;CORS&lt;/td&gt;
      &lt;td&gt;Configures Cross-Origin Resource Sharing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Diagnostics&lt;/td&gt;
      &lt;td&gt;Several separate middlewares that provide a developer exception page, exception handling, status code pages, and the default web page for new apps.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MVC&lt;/td&gt;
      &lt;td&gt;Processes requests with MVC/Razor Pages.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Static Files&lt;/td&gt;
      &lt;td&gt;Provides support for serving static files and directory browsing.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;HTTPS Redirection&lt;/td&gt;
      &lt;td&gt;Redirect all HTTP requests to HTTPS.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Session&lt;/td&gt;
      &lt;td&gt;Provides support for managing user sessions.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;URL Rewrite&lt;/td&gt;
      &lt;td&gt;Provides support for rewriting URLs and redirecting requests.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Response Compression&lt;/td&gt;
      &lt;td&gt;Provides support for compressing responses.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Looking for entire built-in middlewares, see &lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/?view=aspnetcore-3.1#built-in-middleware&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is the end of this article, we learned the concept of middleware and usage of middleware if you have any questions leave a message below.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Middleware Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/19/middleware-tutorial/"/>
   <updated>2020-05-19T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/19/middleware-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Middleware Tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;ASP.NET Core introduced a new feature called as Middleware. Middleware is a software that assembled a set of applications, which will be going through on each request. In other words, it’s a layer that each incoming and outgoing request will go through it.&lt;/p&gt;

&lt;!-- Middleware overview --&gt;
&lt;!-- Built your own middleware  --&gt;
&lt;!-- built-in middleware(tutorial) --&gt;
&lt;!-- conclution --&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/20/middleware/&quot; class=&quot;item-link&quot;&gt;Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/20/middleware/&quot; class=&quot;item-link&quot;&gt;Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/05/add-custom-middleware/&quot; class=&quot;item-link&quot;&gt;Add Custom Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/05/add-custom-middleware/&quot; class=&quot;item-link&quot;&gt;Add Custom Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Middleware Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/19/middleware-tutorial/"/>
   <updated>2020-05-19T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/19/middleware-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Middleware Tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;ASP.NET Core introduced a new feature called as Middleware. Middleware is a software that assembled a set of applications, which will be going through on each request. In other words, it’s a layer that each incoming and outgoing request will go through it.&lt;/p&gt;

&lt;!-- Middleware overview --&gt;
&lt;!-- Built your own middleware  --&gt;
&lt;!-- built-in middleware(tutorial) --&gt;
&lt;!-- conclution --&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/20/middleware/&quot; class=&quot;item-link&quot;&gt;Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/20/middleware/&quot; class=&quot;item-link&quot;&gt;Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/05/add-custom-middleware/&quot; class=&quot;item-link&quot;&gt;Add Custom Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/05/add-custom-middleware/&quot; class=&quot;item-link&quot;&gt;Add Custom Middleware&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Understanding built-in IoC container</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/"/>
   <updated>2020-05-12T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Understanding built-in IoC container&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!-- 获取 serviceprovider from App,ihost,servicecollection,httpcontext--&gt;
&lt;!-- 几个重要的接口 和 类 --&gt;
&lt;p&gt;In this article, we are going dive into the built-in IoC container. In the previous article, we have the following code.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddTransient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you have already known that the &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceCollection&lt;/code&gt; is the place for register services. But, where is the place to retrieve services? The answer is &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There have two types of assemblies, which are &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.DependencyInjection.Abstractions&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.DependencyInjection&lt;/code&gt;. The previous one define interfaces, and another implement that. The following is a diagram illustrating the working mechanism.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-12-understanding-built-in-ioc-container-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As we can see from the above diagram, the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceProvider&lt;/code&gt; (&lt;a href=&quot;https://source.dot.net/#Microsoft.Extensions.DependencyInjection/ServiceProvider.cs&quot;&gt;link&lt;/a&gt;) depends on the &lt;code class=&quot;highlighter-rouge&quot;&gt;IEnumerator&amp;lt;ServiceDescriptor&amp;gt;&lt;/code&gt;, which generated by the &lt;code class=&quot;highlighter-rouge&quot;&gt;GetEnumerator&lt;/code&gt; method in &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceCollection&lt;/code&gt;(&lt;a href=&quot;https://source.dot.net/#Microsoft.Extensions.DependencyInjection/ServiceCollection.cs,beaaadffb389924e&quot;&gt;link&lt;/a&gt;), where is the place registers our service.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProviderEngine&lt;/code&gt; instance implements the logic behind it in &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceProvider&lt;/code&gt;, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProviderEngine&lt;/code&gt; has a lot of implementation classes. Each implementation has a different performance.&lt;/p&gt;

&lt;p&gt;Now, we understand the working mechanism. &lt;span style=&quot;color: red;&quot;&gt;Put our services into IServiceCollection, retrieve them back from IServiceProvider&lt;/span&gt;. As the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceCollection&lt;/code&gt; constructors are public, so it’s easy for us to get its instance. We can new a ServiceCollection instance, or directly use it in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices()&lt;/code&gt; in the &lt;em&gt;ASP.NET Core&lt;/em&gt; application.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Startup.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//some operations&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The ServiceProvider constructor is an internal access modifier, so we can’t instance it. So, how can we get the ServiceProvider instance?&lt;/p&gt;

&lt;p&gt;We can’t directly new a ServiceProvider instance. But, Microsoft provides many extension methods to retrieve the ServiceProvider instance. The following lists some ways for that.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IServiceCollection&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;BuildServiceProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through HttpContext&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CustomController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IApplicationBuilder&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IHost&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IHost&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureWebHostDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because we can get IServiceProvider from IServiceCollection, and IServiceCollection has a public constructor. So, built-in DI also can be used in non-ASP applications. &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-NET-CORE-Built-In-Dependency-Injection-Example&quot;&gt;Here&lt;/a&gt; is an example that illustrates how to use built-in DI in a &lt;em&gt;.NET Core&lt;/em&gt; Console application.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Understanding built-in IoC container</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/"/>
   <updated>2020-05-12T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Understanding built-in IoC container&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;!-- 获取 serviceprovider from App,ihost,servicecollection,httpcontext--&gt;
&lt;!-- 几个重要的接口 和 类 --&gt;
&lt;p&gt;In this article, we are going dive into the built-in IoC container. In the previous article, we have the following code.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddTransient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you have already known that the &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceCollection&lt;/code&gt; is the place for register services. But, where is the place to retrieve services? The answer is &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProvider&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There have two types of assemblies, which are &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.DependencyInjection.Abstractions&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.Extensions.DependencyInjection&lt;/code&gt;. The previous one define interfaces, and another implement that. The following is a diagram illustrating the working mechanism.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-12-understanding-built-in-ioc-container-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As we can see from the above diagram, the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceProvider&lt;/code&gt; (&lt;a href=&quot;https://source.dot.net/#Microsoft.Extensions.DependencyInjection/ServiceProvider.cs&quot;&gt;link&lt;/a&gt;) depends on the &lt;code class=&quot;highlighter-rouge&quot;&gt;IEnumerator&amp;lt;ServiceDescriptor&amp;gt;&lt;/code&gt;, which generated by the &lt;code class=&quot;highlighter-rouge&quot;&gt;GetEnumerator&lt;/code&gt; method in &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceCollection&lt;/code&gt;(&lt;a href=&quot;https://source.dot.net/#Microsoft.Extensions.DependencyInjection/ServiceCollection.cs,beaaadffb389924e&quot;&gt;link&lt;/a&gt;), where is the place registers our service.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProviderEngine&lt;/code&gt; instance implements the logic behind it in &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceProvider&lt;/code&gt;, and the &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceProviderEngine&lt;/code&gt; has a lot of implementation classes. Each implementation has a different performance.&lt;/p&gt;

&lt;p&gt;Now, we understand the working mechanism. &lt;span style=&quot;color: red;&quot;&gt;Put our services into IServiceCollection, retrieve them back from IServiceProvider&lt;/span&gt;. As the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceCollection&lt;/code&gt; constructors are public, so it’s easy for us to get its instance. We can new a ServiceCollection instance, or directly use it in &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices()&lt;/code&gt; in the &lt;em&gt;ASP.NET Core&lt;/em&gt; application.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Startup.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//some operations&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The ServiceProvider constructor is an internal access modifier, so we can’t instance it. So, how can we get the ServiceProvider instance?&lt;/p&gt;

&lt;p&gt;We can’t directly new a ServiceProvider instance. But, Microsoft provides many extension methods to retrieve the ServiceProvider instance. The following lists some ways for that.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IServiceCollection&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;BuildServiceProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through HttpContext&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CustomController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IApplicationBuilder&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Configure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IApplicationBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IWebHostEnvironment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;get IServiceProvider through IHost&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IHost&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;IServiceProvider&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//T service = provider.getService&amp;lt;T&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureWebHostDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because we can get IServiceProvider from IServiceCollection, and IServiceCollection has a public constructor. So, built-in DI also can be used in non-ASP applications. &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-NET-CORE-Built-In-Dependency-Injection-Example&quot;&gt;Here&lt;/a&gt; is an example that illustrates how to use built-in DI in a &lt;em&gt;.NET Core&lt;/em&gt; Console application.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Dependency Injection</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/08/dependency-injection/"/>
   <updated>2020-05-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/08/dependency-injection</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dependency Injection&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;built-in-ioc-container&quot;&gt;Built-In IoC Container&lt;/h1&gt;
&lt;p&gt;ASP.NET Core supports dependency injection(DI), which is a technique for achieving Inverse of Control(IoC). The Built-In IoC container doesn’t provide as many features as other third libraries. If you want to use other features, like property injection, you can use third libraries instead(&lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-3.1#default-service-container-replacement&quot;&gt;more info&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The class(types) managed by IoC container is called service&lt;/strong&gt;. IoC container will automatically inject services into our constructors or action methods.&lt;/p&gt;

&lt;p&gt;Usually, project services have two types. There are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Framework Service: The service that ASP.NET Core defined, like &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&amp;lt;T&amp;gt;&lt;/code&gt;、 &lt;code class=&quot;highlighter-rouge&quot;&gt;IWebHostEnvironment&lt;/code&gt;、 &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostApplicationLifetime&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Application Service: The service that you create for your application as a programmer.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Next! I will explain how to register services? What’s the service lifetime? How to retrieve service from the IoC container?&lt;/p&gt;

&lt;h1 id=&quot;where-to-register-service&quot;&gt;Where to register service?&lt;/h1&gt;
&lt;p&gt;By default, ASP.NET Core uses &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup&lt;/code&gt; class as its startup type in &lt;em&gt;Program.cs&lt;/em&gt; file. The specified startup class is used to register service and handle middleware.
&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-a.png&quot; alt=&quot;Alt&quot; /&gt;
Here we follow the ASP.NET Core default convention. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup&lt;/code&gt; class has two methods that are &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Configure&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; is used to register our services. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Configure&lt;/code&gt; is used to set up middleware.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; has an &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceCollection&lt;/code&gt; parameter, which is an instance that can register application services on.&lt;/p&gt;

&lt;p&gt;Consider the following example:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Log.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ILog&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConsoleLog&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Let us register the above instance into the IoC container.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Startup.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Singleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.servicedescriptor?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev16.query%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(Microsoft.Extensions.DependencyInjection.ServiceDescriptor);k(DevLang-csharp)%26rd%3Dtrue&amp;amp;view=dotnet-plat-ext-3.1&quot;&gt;ServiceDescriptor&lt;/a&gt; describes the service with its service type, implementation, and lifetime. Here, we specified the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILog&lt;/code&gt; as a service and the &lt;code class=&quot;highlighter-rouge&quot;&gt;ConsoleLog&lt;/code&gt; as its implementation, and register it as a singleton lifetime.&lt;/p&gt;

&lt;h1 id=&quot;service-lifetime&quot;&gt;Service lifetime&lt;/h1&gt;
&lt;p&gt;The IoC container keeps track of the lifetime of service and disposes of its resource when their life ends.&lt;/p&gt;

&lt;p&gt;There are three types of service lifetime.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Transient:&lt;/strong&gt; The IoC container will create a new instance each time when they are requested.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Scoped:&lt;/strong&gt; The IoC container will create a new instance of the specified service type once per client request.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Singleton:&lt;/strong&gt; The IoC container will create an instance and share it throughout the application lifetime. Every subsequent request gets the same as first.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;There are many things to pay attention to when dealing with Dependency Injection. The following are some recommendations for better to built application.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Register your service as a transient wherever possible, because you didn’t need to care a lot of multi-threading, and memory leak problems.&lt;/li&gt;
  &lt;li&gt;Consider multi-threading when designing scoped service. Do not resolve scoped service from singleton service. It is dangerous.&lt;/li&gt;
  &lt;li&gt;Use singleton carefully, because you need to deal with multi-threading and potential memory-leak problem.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;registration-method&quot;&gt;Registration method&lt;/h1&gt;
&lt;p&gt;we can register our service through &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceDescriber&lt;/code&gt;, which provides a lot of overload constructors.&lt;/p&gt;

&lt;p&gt;The following example illustrates various usages of the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceDescriber&lt;/code&gt; constructor.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Transient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//scoped&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Microsoft also provides extension methods for each type of lifetime.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddTransient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddScoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//scoped&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddSingleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;constructor-injection&quot;&gt;Constructor Injection&lt;/h1&gt;

&lt;p&gt;Once we register services into the IoC container, the ASP.NET Core will automatically inject services into target constructor, when its parameters are service types.&lt;/p&gt;

&lt;p&gt;Constructors can accept arguments that aren’t provided by dependency injection, but the arguments must assign default values.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello, I come from console log&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above simple example injects &lt;code class=&quot;highlighter-rouge&quot;&gt;ILog&lt;/code&gt; into the &lt;code class=&quot;highlighter-rouge&quot;&gt;HomeController&lt;/code&gt; constructor.&lt;/p&gt;

&lt;p&gt;Switch debug profile to the current project name. because we are using a &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Write()&lt;/code&gt; to print debug information, which is not working with IIS.&lt;/p&gt;

&lt;p&gt;As my project name is  &lt;code class=&quot;highlighter-rouge&quot;&gt;DependencyInjection&lt;/code&gt;, so I switched to &lt;em&gt;DependencyInjection&lt;/em&gt; profile.
&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Then start to debug your project, open &lt;a href=&quot;https://localhost:5001/&quot;&gt;https://localhost:5001/&lt;/a&gt; or &lt;a href=&quot;http://localhost:5000/&quot;&gt;http://localhost:5000/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once you open it in a browser. View your console window.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;action-method-injection&quot;&gt;Action Method Injection&lt;/h1&gt;
&lt;p&gt;ASP.NET Core provides an action method injection, which injects the service type parameter into an action method.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;FromServicesAttribute&lt;/code&gt; specifies that an action parameter should be bound using the request services.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FromServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello, I come from console log&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Dependency Injection</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/08/dependency-injection/"/>
   <updated>2020-05-08T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/08/dependency-injection</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;navi-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dependency Injection&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;built-in-ioc-container&quot;&gt;Built-In IoC Container&lt;/h1&gt;
&lt;p&gt;ASP.NET Core supports dependency injection(DI), which is a technique for achieving Inverse of Control(IoC). The Built-In IoC container doesn’t provide as many features as other third libraries. If you want to use other features, like property injection, you can use third libraries instead(&lt;a href=&quot;https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-3.1#default-service-container-replacement&quot;&gt;more info&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The class(types) managed by IoC container is called service&lt;/strong&gt;. IoC container will automatically inject services into our constructors or action methods.&lt;/p&gt;

&lt;p&gt;Usually, project services have two types. There are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Framework Service: The service that ASP.NET Core defined, like &lt;code class=&quot;highlighter-rouge&quot;&gt;ILogger&amp;lt;T&amp;gt;&lt;/code&gt;、 &lt;code class=&quot;highlighter-rouge&quot;&gt;IWebHostEnvironment&lt;/code&gt;、 &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostApplicationLifetime&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Application Service: The service that you create for your application as a programmer.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Next! I will explain how to register services? What’s the service lifetime? How to retrieve service from the IoC container?&lt;/p&gt;

&lt;h1 id=&quot;where-to-register-service&quot;&gt;Where to register service?&lt;/h1&gt;
&lt;p&gt;By default, ASP.NET Core uses &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup&lt;/code&gt; class as its startup type in &lt;em&gt;Program.cs&lt;/em&gt; file. The specified startup class is used to register service and handle middleware.
&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-a.png&quot; alt=&quot;Alt&quot; /&gt;
Here we follow the ASP.NET Core default convention. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Startup&lt;/code&gt; class has two methods that are &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Configure&lt;/code&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; is used to register our services. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Configure&lt;/code&gt; is used to set up middleware.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ConfigureServices&lt;/code&gt; has an &lt;code class=&quot;highlighter-rouge&quot;&gt;IServiceCollection&lt;/code&gt; parameter, which is an instance that can register application services on.&lt;/p&gt;

&lt;p&gt;Consider the following example:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Log.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ILog&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConsoleLog&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Let us register the above instance into the IoC container.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Startup.cs&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConfigureServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IServiceCollection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Singleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.servicedescriptor?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev16.query%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(Microsoft.Extensions.DependencyInjection.ServiceDescriptor);k(DevLang-csharp)%26rd%3Dtrue&amp;amp;view=dotnet-plat-ext-3.1&quot;&gt;ServiceDescriptor&lt;/a&gt; describes the service with its service type, implementation, and lifetime. Here, we specified the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILog&lt;/code&gt; as a service and the &lt;code class=&quot;highlighter-rouge&quot;&gt;ConsoleLog&lt;/code&gt; as its implementation, and register it as a singleton lifetime.&lt;/p&gt;

&lt;h1 id=&quot;service-lifetime&quot;&gt;Service lifetime&lt;/h1&gt;
&lt;p&gt;The IoC container keeps track of the lifetime of service and disposes of its resource when their life ends.&lt;/p&gt;

&lt;p&gt;There are three types of service lifetime.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Transient:&lt;/strong&gt; The IoC container will create a new instance each time when they are requested.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Scoped:&lt;/strong&gt; The IoC container will create a new instance of the specified service type once per client request.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Singleton:&lt;/strong&gt; The IoC container will create an instance and share it throughout the application lifetime. Every subsequent request gets the same as first.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;There are many things to pay attention to when dealing with Dependency Injection. The following are some recommendations for better to built application.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Register your service as a transient wherever possible, because you didn’t need to care a lot of multi-threading, and memory leak problems.&lt;/li&gt;
  &lt;li&gt;Consider multi-threading when designing scoped service. Do not resolve scoped service from singleton service. It is dangerous.&lt;/li&gt;
  &lt;li&gt;Use singleton carefully, because you need to deal with multi-threading and potential memory-leak problem.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;registration-method&quot;&gt;Registration method&lt;/h1&gt;
&lt;p&gt;we can register our service through &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceDescriber&lt;/code&gt;, which provides a lot of overload constructors.&lt;/p&gt;

&lt;p&gt;The following example illustrates various usages of the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServiceDescriber&lt;/code&gt; constructor.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Transient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ServiceDescriptor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServiceLifetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//scoped&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Microsoft also provides extension methods for each type of lifetime.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddTransient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//transient&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddScoped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//scoped&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddSingleton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConsoleLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//singleton&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;constructor-injection&quot;&gt;Constructor Injection&lt;/h1&gt;

&lt;p&gt;Once we register services into the IoC container, the ASP.NET Core will automatically inject services into target constructor, when its parameters are service types.&lt;/p&gt;

&lt;p&gt;Constructors can accept arguments that aren’t provided by dependency injection, but the arguments must assign default values.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;readonly&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello, I come from console log&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above simple example injects &lt;code class=&quot;highlighter-rouge&quot;&gt;ILog&lt;/code&gt; into the &lt;code class=&quot;highlighter-rouge&quot;&gt;HomeController&lt;/code&gt; constructor.&lt;/p&gt;

&lt;p&gt;Switch debug profile to the current project name. because we are using a &lt;code class=&quot;highlighter-rouge&quot;&gt;Console.Write()&lt;/code&gt; to print debug information, which is not working with IIS.&lt;/p&gt;

&lt;p&gt;As my project name is  &lt;code class=&quot;highlighter-rouge&quot;&gt;DependencyInjection&lt;/code&gt;, so I switched to &lt;em&gt;DependencyInjection&lt;/em&gt; profile.
&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Then start to debug your project, open &lt;a href=&quot;https://localhost:5001/&quot;&gt;https://localhost:5001/&lt;/a&gt; or &lt;a href=&quot;http://localhost:5000/&quot;&gt;http://localhost:5000/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once you open it in a browser. View your console window.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-08-dependency-injection-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;action-method-injection&quot;&gt;Action Method Injection&lt;/h1&gt;
&lt;p&gt;ASP.NET Core provides an action method injection, which injects the service type parameter into an action method.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;FromServicesAttribute&lt;/code&gt; specifies that an action parameter should be bound using the request services.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Controller&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IActionResult&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FromServices&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ILog&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello, I come from console log&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Dependency Injection Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/"/>
   <updated>2020-05-07T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;.NET Core is designed from scratch to support dependency injection, which is also one of the principal features. 
&lt;!-- Dependency Injection Overview --&gt;
&lt;!-- the mechanism behide Dependency Injection --&gt;
&lt;!-- Design specification --&gt;
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/08/dependency-injection/&quot; class=&quot;item-link&quot;&gt;Dependency Injection&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/08/dependency-injection/&quot; class=&quot;item-link&quot;&gt;Dependency Injection&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/&quot; class=&quot;item-link&quot;&gt;Understanding built-in IoC container&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/&quot; class=&quot;item-link&quot;&gt;Understanding built-in IoC container&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Dependency Injection Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/"/>
   <updated>2020-05-07T10:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;.NET Core is designed from scratch to support dependency injection, which is also one of the principal features. 
&lt;!-- Dependency Injection Overview --&gt;
&lt;!-- the mechanism behide Dependency Injection --&gt;
&lt;!-- Design specification --&gt;
&lt;!--items--&gt;&lt;/p&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/08/dependency-injection/&quot; class=&quot;item-link&quot;&gt;Dependency Injection&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/08/dependency-injection/&quot; class=&quot;item-link&quot;&gt;Dependency Injection&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/&quot; class=&quot;item-link&quot;&gt;Understanding built-in IoC container&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/12/understanding-built-in-ioc-container/&quot; class=&quot;item-link&quot;&gt;Understanding built-in IoC container&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Project structure</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/06/project-structure/"/>
   <updated>2020-05-06T18:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/06/project-structure</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Project structure&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this episode, we are going to introduce the basic project structures. It’s essential to know the basic web project structure. To better illustrate the structure of the web project, I created an empty &lt;strong&gt;ASP.NET CORE&lt;/strong&gt; project in visual studio 2019.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;dependencies&quot;&gt;Dependencies&lt;/h1&gt;
&lt;p&gt;You can add references or packages in here.&lt;/p&gt;

&lt;h1 id=&quot;launchsettingsjson&quot;&gt;launchSettings.json&lt;/h1&gt;
&lt;p&gt;In the properties menu, you will see a &lt;em&gt;launchSettings.json&lt;/em&gt; file, which describes how to launch the project. It includes startup options, command, whether to open a browser, environment variables, etc..&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;According to this project’s configuration, if you are using the IISExpress to launch this project, then two URLs will be matched, they are &lt;a href=&quot;https://localhost:44326&quot;&gt;https://localhost:44326&lt;/a&gt; and &lt;a href=&quot;http://localhost:63489&quot;&gt;http://localhost:63489&lt;/a&gt;. You can use either &lt;a href=&quot;https://localhost:44326&quot;&gt;https://localhost:44326&lt;/a&gt; or &lt;a href=&quot;http://localhost:63489&quot;&gt;http://localhost:63489&lt;/a&gt; to access your website. The difference is that one is &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; and the other one is &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTP&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTP&lt;/code&gt; address is specified explicitly in the &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;applicationUrl&quot;: &quot;http://localhost:63489&quot;&lt;/code&gt; field. &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; specified in this &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;sslPort&quot;:44326&lt;/code&gt; field. By default, Visual Studio launches the &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; one in the browser.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Looking at your application icons in your desktop, you will find out that the IIS server launched.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The IIS server is currently hosting your website.&lt;/p&gt;

&lt;p&gt;As we can see from the &lt;em&gt;launchSettings.json&lt;/em&gt; file that has two profiles, we already introduced the IISExpress one. Another is the WebApplication1, which is similar to the IISExpress. WebApplication1 has two URLs that configured in one line &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;applicationUrl&quot;: &quot;https://localhost:5001;http://localhost:5000&quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Because WebApplication1 has nothing to do with the IIS, so WebApplication1 wouldn’t use the IIS as its server, an internal web server hosting instead.&lt;/p&gt;

&lt;h1 id=&quot;programcs&quot;&gt;Program.cs&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Project.cs&lt;/em&gt; is an entry point of the entire application. Essentially, &lt;em&gt;ASP.NET Core&lt;/em&gt; is a console project, which executing from the &lt;code class=&quot;highlighter-rouge&quot;&gt;public static void Main(string[] args)&lt;/code&gt;, where we can create a web host application.&lt;/p&gt;

&lt;h2 id=&quot;set-host-in-aspnet-core-3x&quot;&gt;Set Host in ASP.NET Core 3.x&lt;/h2&gt;
&lt;p&gt;the following is the &lt;code class=&quot;highlighter-rouge&quot;&gt;Program.cs&lt;/code&gt; file&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureWebHostDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Main()&lt;/code&gt; method calls the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateHostBuilder()&lt;/code&gt; static methods with the pre-configured defaults. The &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateHostBuilder()&lt;/code&gt; returns an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostBuilder&lt;/code&gt; instance, which can produce an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHost&lt;/code&gt; instance by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;Build()&lt;/code&gt; method. When you get the &lt;code class=&quot;highlighter-rouge&quot;&gt;IHost&lt;/code&gt; instance, start the web application through the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run()&lt;/code&gt; method.&lt;/p&gt;

&lt;h2 id=&quot;createdefaultbuilder&quot;&gt;CreateDefaultBuilder&lt;/h2&gt;

&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateDefaultBuilder()&lt;/code&gt; method in &lt;code class=&quot;highlighter-rouge&quot;&gt;Host.cs&lt;/code&gt; returns an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostBuilder&lt;/code&gt; instance, which initialized some default settings, for example, load the content root path, load environment variables, load settings file contents, configure ILoggerFactory, etc..&lt;/p&gt;

&lt;p&gt;The following is the source code from &lt;a href=&quot;https://github.com/dotnet/runtime&quot;&gt;dotnet/runtime github&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseContentRoot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Directory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetCurrentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureHostConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEnvironmentVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DOTNET_&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddCommandLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureAppConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HostingEnvironment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddJsonFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;appsettings.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reloadOnChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddJsonFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;appsettings.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnvironmentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reloadOnChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsNullOrEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Assembly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AssemblyName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddUserSecrets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEnvironmentVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddCommandLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureLogging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RuntimeInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsOSPlatform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OSPlatform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Windows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// IMPORTANT: This needs to be added *before* configuration is loaded, this lets&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// the defaults be overridden by the configuration.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Default the EventLogLoggerProvider to warning or above&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventLogLoggerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LogLevel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Warning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetSection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Logging&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddConsole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDebug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEventSourceLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Add the EventLogLoggerProvider on windows machines&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEventLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseDefaultServiceProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HostingEnvironment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValidateScopes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValidateOnBuild&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;startupcs&quot;&gt;Startup.cs&lt;/h1&gt;

&lt;p&gt;An ASP.NET Core application must specify a Startup class, which needs to register in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Program&lt;/code&gt; class by using the generic &lt;code class=&quot;highlighter-rouge&quot;&gt;UseStartup&amp;lt;T&amp;gt;&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open the &lt;em&gt;Startup.cs&lt;/em&gt; file:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;configureservices&quot;&gt;ConfigureServices&lt;/h2&gt;
&lt;p&gt;The Configureservices method is a place where you can register your dependent classes with the built-in IoC container (&lt;strong&gt;ASP.NET Core refers dependent class as a Service&lt;/strong&gt;).  After registering services, you can use it anywhere in the application. The IoC container will inject them automatically.&lt;/p&gt;

&lt;h2 id=&quot;configure&quot;&gt;Configure&lt;/h2&gt;
&lt;p&gt;The Configure method is a place where you can configure your pipeline by adding middlewares. The pipeline middlewares specify how the app responds to the HTTP request. The middlewares added to the &lt;code class=&quot;highlighter-rouge&quot;&gt;IApplicationBuilder&lt;/code&gt;, but it’s not registered in the service container. Hosting creates an &lt;code class=&quot;highlighter-rouge&quot;&gt;IApplicationBuilder&lt;/code&gt; and passes it directly to the Configure method.&lt;/p&gt;

&lt;p&gt;This is the end of the article. In this article, we have learned the basic web structure. In the next articles, I am going dig into it.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Project structure</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/06/project-structure/"/>
   <updated>2020-05-06T18:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/06/project-structure</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;Project structure&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In this episode, we are going to introduce the basic project structures. It’s essential to know the basic web project structure. To better illustrate the structure of the web project, I created an empty &lt;strong&gt;ASP.NET CORE&lt;/strong&gt; project in visual studio 2019.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;dependencies&quot;&gt;Dependencies&lt;/h1&gt;
&lt;p&gt;You can add references or packages in here.&lt;/p&gt;

&lt;h1 id=&quot;launchsettingsjson&quot;&gt;launchSettings.json&lt;/h1&gt;
&lt;p&gt;In the properties menu, you will see a &lt;em&gt;launchSettings.json&lt;/em&gt; file, which describes how to launch the project. It includes startup options, command, whether to open a browser, environment variables, etc..&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;According to this project’s configuration, if you are using the IISExpress to launch this project, then two URLs will be matched, they are &lt;a href=&quot;https://localhost:44326&quot;&gt;https://localhost:44326&lt;/a&gt; and &lt;a href=&quot;http://localhost:63489&quot;&gt;http://localhost:63489&lt;/a&gt;. You can use either &lt;a href=&quot;https://localhost:44326&quot;&gt;https://localhost:44326&lt;/a&gt; or &lt;a href=&quot;http://localhost:63489&quot;&gt;http://localhost:63489&lt;/a&gt; to access your website. The difference is that one is &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; and the other one is &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTP&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTP&lt;/code&gt; address is specified explicitly in the &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;applicationUrl&quot;: &quot;http://localhost:63489&quot;&lt;/code&gt; field. &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; specified in this &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;sslPort&quot;:44326&lt;/code&gt; field. By default, Visual Studio launches the &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt; one in the browser.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Looking at your application icons in your desktop, you will find out that the IIS server launched.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The IIS server is currently hosting your website.&lt;/p&gt;

&lt;p&gt;As we can see from the &lt;em&gt;launchSettings.json&lt;/em&gt; file that has two profiles, we already introduced the IISExpress one. Another is the WebApplication1, which is similar to the IISExpress. WebApplication1 has two URLs that configured in one line &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;applicationUrl&quot;: &quot;https://localhost:5001;http://localhost:5000&quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Because WebApplication1 has nothing to do with the IIS, so WebApplication1 wouldn’t use the IIS as its server, an internal web server hosting instead.&lt;/p&gt;

&lt;h1 id=&quot;programcs&quot;&gt;Program.cs&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Project.cs&lt;/em&gt; is an entry point of the entire application. Essentially, &lt;em&gt;ASP.NET Core&lt;/em&gt; is a console project, which executing from the &lt;code class=&quot;highlighter-rouge&quot;&gt;public static void Main(string[] args)&lt;/code&gt;, where we can create a web host application.&lt;/p&gt;

&lt;h2 id=&quot;set-host-in-aspnet-core-3x&quot;&gt;Set Host in ASP.NET Core 3.x&lt;/h2&gt;
&lt;p&gt;the following is the &lt;code class=&quot;highlighter-rouge&quot;&gt;Program.cs&lt;/code&gt; file&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateHostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureWebHostDefaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Main()&lt;/code&gt; method calls the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateHostBuilder()&lt;/code&gt; static methods with the pre-configured defaults. The &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateHostBuilder()&lt;/code&gt; returns an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostBuilder&lt;/code&gt; instance, which can produce an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHost&lt;/code&gt; instance by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;Build()&lt;/code&gt; method. When you get the &lt;code class=&quot;highlighter-rouge&quot;&gt;IHost&lt;/code&gt; instance, start the web application through the &lt;code class=&quot;highlighter-rouge&quot;&gt;Run()&lt;/code&gt; method.&lt;/p&gt;

&lt;h2 id=&quot;createdefaultbuilder&quot;&gt;CreateDefaultBuilder&lt;/h2&gt;

&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;CreateDefaultBuilder()&lt;/code&gt; method in &lt;code class=&quot;highlighter-rouge&quot;&gt;Host.cs&lt;/code&gt; returns an &lt;code class=&quot;highlighter-rouge&quot;&gt;IHostBuilder&lt;/code&gt; instance, which initialized some default settings, for example, load the content root path, load environment variables, load settings file contents, configure ILoggerFactory, etc..&lt;/p&gt;

&lt;p&gt;The following is the source code from &lt;a href=&quot;https://github.com/dotnet/runtime&quot;&gt;dotnet/runtime github&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IHostBuilder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CreateDefaultBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HostBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseContentRoot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Directory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetCurrentDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureHostConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEnvironmentVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DOTNET_&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddCommandLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureAppConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HostingEnvironment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddJsonFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;appsettings.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reloadOnChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddJsonFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;appsettings.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EnvironmentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reloadOnChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsNullOrEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Assembly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;AssemblyName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddUserSecrets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appAssembly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEnvironmentVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddCommandLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ConfigureLogging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RuntimeInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsOSPlatform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OSPlatform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Windows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// IMPORTANT: This needs to be added *before* configuration is loaded, this lets&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// the defaults be overridden by the configuration.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Default the EventLogLoggerProvider to warning or above&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventLogLoggerProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LogLevel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Warning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hostingContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetSection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Logging&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddConsole&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDebug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEventSourceLogger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isWindows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Add the EventLogLoggerProvider on windows machines&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddEventLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseDefaultServiceProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HostingEnvironment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;IsDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValidateScopes&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValidateOnBuild&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isDevelopment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;startupcs&quot;&gt;Startup.cs&lt;/h1&gt;

&lt;p&gt;An ASP.NET Core application must specify a Startup class, which needs to register in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Program&lt;/code&gt; class by using the generic &lt;code class=&quot;highlighter-rouge&quot;&gt;UseStartup&amp;lt;T&amp;gt;&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;webBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UseStartup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Startup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open the &lt;em&gt;Startup.cs&lt;/em&gt; file:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-05-06-project-structure-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;configureservices&quot;&gt;ConfigureServices&lt;/h2&gt;
&lt;p&gt;The Configureservices method is a place where you can register your dependent classes with the built-in IoC container (&lt;strong&gt;ASP.NET Core refers dependent class as a Service&lt;/strong&gt;).  After registering services, you can use it anywhere in the application. The IoC container will inject them automatically.&lt;/p&gt;

&lt;h2 id=&quot;configure&quot;&gt;Configure&lt;/h2&gt;
&lt;p&gt;The Configure method is a place where you can configure your pipeline by adding middlewares. The pipeline middlewares specify how the app responds to the HTTP request. The middlewares added to the &lt;code class=&quot;highlighter-rouge&quot;&gt;IApplicationBuilder&lt;/code&gt;, but it’s not registered in the service container. Hosting creates an &lt;code class=&quot;highlighter-rouge&quot;&gt;IApplicationBuilder&lt;/code&gt; and passes it directly to the Configure method.&lt;/p&gt;

&lt;p&gt;This is the end of the article. In this article, we have learned the basic web structure. In the next articles, I am going dig into it.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Core</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/"/>
   <updated>2020-05-03T18:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/03/asp-dot-net-core</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core&lt;/strong&gt; is an &lt;strong&gt;&lt;em&gt;open-source&lt;/em&gt;&lt;/strong&gt;(&lt;a href=&quot;https://github.com/dotnet/aspnetcore&quot;&gt;link&lt;/a&gt;), &lt;strong&gt;&lt;em&gt;cross-platform&lt;/em&gt;&lt;/strong&gt;, and &lt;strong&gt;&lt;em&gt;free&lt;/em&gt;&lt;/strong&gt; platform, which mainly targets run on &lt;strong&gt;.NET Core&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core 3.x&lt;/strong&gt; only runs on the &lt;strong&gt;.NET Core 3.x&lt;/strong&gt;, whereas &lt;strong&gt;ASP.NET Core 2.x&lt;/strong&gt; runs on &lt;strong&gt;.NET Core 2.x&lt;/strong&gt; as well as &lt;strong&gt;.NET Core Framework&lt;/strong&gt;. more information looks &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&quot;&gt;.NET standard&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;run-the-first-aspnet-core-3x-application&quot;&gt;Run the first ASP.NET Core 3.x Application.&lt;/h1&gt;
&lt;p&gt;You can run an ASP.NET Core application on Visual Studio as well as on CLI.&lt;/p&gt;

&lt;h2 id=&quot;on-visual-studio&quot;&gt;On Visual Studio&lt;/h2&gt;

&lt;p&gt;Download the Visual Studio 2019 editor. If you want to build a different .Net core application, you need to choose a different version. Bellow is the minimum required version of Visual Studio based on the target visual studio version. &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/install/sdk?pivots=os-windows&quot;&gt;more&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;.NET Core SDK version&lt;/th&gt;
      &lt;th&gt;Visual Studio version&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3.1&lt;/td&gt;
      &lt;td&gt;Visual Studio 2019 version 16.4 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3.0&lt;/td&gt;
      &lt;td&gt;Visual Studio 2019 version 16.3 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2.2&lt;/td&gt;
      &lt;td&gt;Visual Studio 2017 version 15.9 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2.1&lt;/td&gt;
      &lt;td&gt;Visual Studio 2017 version 15.7 or higher.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Open Visual Studio 2019, choose create a new project&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Choose ASP.NET Core Web Application&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Enter your project name and choose the project location&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Choose a version and a project template&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here, we chose the ASP.NET Core MVC Views as our template.&lt;/p&gt;

&lt;p&gt;Press &lt;code class=&quot;highlighter-rouge&quot;&gt;F5&lt;/code&gt;, Start debugging.
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;on-cli&quot;&gt;On CLI&lt;/h2&gt;

&lt;p&gt;You can also run this project through CLI, open a command prompt and enter the following code.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dotnet new webapp -o aspnetcoreapp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Trust the development certificate&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dotnet dev-certs https --trust
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Run the App&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd aspnetcoreapp
dotnet watch run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, open &lt;a href=&quot;https://localhost:5001/&quot;&gt;https://localhost:5001/&lt;/a&gt; in your browser.
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The above code creates a MVC Project, However, there are two project examples, one is MVC, another is Razor. Both are a complete ASP.NET Core project, they are good projects for a newbie. &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-MVC-BookListMVC&quot;&gt;MVC booklist&lt;/a&gt; project and &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-MVC-BookListMVC&quot;&gt;Razor Booklist&lt;/a&gt; project.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Core</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/"/>
   <updated>2020-05-03T18:03:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/05/03/asp-dot-net-core</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core&lt;/strong&gt; is an &lt;strong&gt;&lt;em&gt;open-source&lt;/em&gt;&lt;/strong&gt;(&lt;a href=&quot;https://github.com/dotnet/aspnetcore&quot;&gt;link&lt;/a&gt;), &lt;strong&gt;&lt;em&gt;cross-platform&lt;/em&gt;&lt;/strong&gt;, and &lt;strong&gt;&lt;em&gt;free&lt;/em&gt;&lt;/strong&gt; platform, which mainly targets run on &lt;strong&gt;.NET Core&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core 3.x&lt;/strong&gt; only runs on the &lt;strong&gt;.NET Core 3.x&lt;/strong&gt;, whereas &lt;strong&gt;ASP.NET Core 2.x&lt;/strong&gt; runs on &lt;strong&gt;.NET Core 2.x&lt;/strong&gt; as well as &lt;strong&gt;.NET Core Framework&lt;/strong&gt;. more information looks &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&quot;&gt;.NET standard&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;run-the-first-aspnet-core-3x-application&quot;&gt;Run the first ASP.NET Core 3.x Application.&lt;/h1&gt;
&lt;p&gt;You can run an ASP.NET Core application on Visual Studio as well as on CLI.&lt;/p&gt;

&lt;h2 id=&quot;on-visual-studio&quot;&gt;On Visual Studio&lt;/h2&gt;

&lt;p&gt;Download the Visual Studio 2019 editor. If you want to build a different .Net core application, you need to choose a different version. Bellow is the minimum required version of Visual Studio based on the target visual studio version. &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/install/sdk?pivots=os-windows&quot;&gt;more&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;.NET Core SDK version&lt;/th&gt;
      &lt;th&gt;Visual Studio version&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3.1&lt;/td&gt;
      &lt;td&gt;Visual Studio 2019 version 16.4 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3.0&lt;/td&gt;
      &lt;td&gt;Visual Studio 2019 version 16.3 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2.2&lt;/td&gt;
      &lt;td&gt;Visual Studio 2017 version 15.9 or higher.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2.1&lt;/td&gt;
      &lt;td&gt;Visual Studio 2017 version 15.7 or higher.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Open Visual Studio 2019, choose create a new project&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Choose ASP.NET Core Web Application&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Enter your project name and choose the project location&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Choose a version and a project template&lt;/strong&gt;
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here, we chose the ASP.NET Core MVC Views as our template.&lt;/p&gt;

&lt;p&gt;Press &lt;code class=&quot;highlighter-rouge&quot;&gt;F5&lt;/code&gt;, Start debugging.
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;on-cli&quot;&gt;On CLI&lt;/h2&gt;

&lt;p&gt;You can also run this project through CLI, open a command prompt and enter the following code.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dotnet new webapp -o aspnetcoreapp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Trust the development certificate&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dotnet dev-certs https --trust
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Run the App&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd aspnetcoreapp
dotnet watch run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then, open &lt;a href=&quot;https://localhost:5001/&quot;&gt;https://localhost:5001/&lt;/a&gt; in your browser.
&lt;img src=&quot;/public/img/2020-05-03-asp-dot-net-core-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The above code creates a MVC Project, However, there are two project examples, one is MVC, another is Razor. Both are a complete ASP.NET Core project, they are good projects for a newbie. &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-MVC-BookListMVC&quot;&gt;MVC booklist&lt;/a&gt; project and &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Web-Net-Core-MVC-BookListMVC&quot;&gt;Razor Booklist&lt;/a&gt; project.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>.NET Core</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/04/28/dot-net-core/"/>
   <updated>2020-04-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/04/28/dot-net-core</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;.net core&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;.NET Core&lt;/strong&gt; is an &lt;strong&gt;&lt;em&gt;open-source&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;cross-platform&lt;/em&gt;&lt;/strong&gt; framework. It’s a new version of the .NET Framework(pronounced as &lt;em&gt;dot net&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.NET Framework&lt;/strong&gt; was developing in the late 1990s by Microsoft. By late &lt;strong&gt;2000&lt;/strong&gt;, Microsoft released the first beta version of &lt;strong&gt;.NET 1.0&lt;/strong&gt;. The latest version is &lt;strong&gt;.NET 4.8&lt;/strong&gt; that was released on &lt;strong&gt;18 April 2019&lt;/strong&gt; today, and it is also the &lt;strong&gt;last version&lt;/strong&gt; of the &lt;strong&gt;.NET branch&lt;/strong&gt;. Microsoft announced that they are going to &lt;strong&gt;stop developing further .NET version&lt;/strong&gt; in the future.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-28-dot-net-core-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Today, the concept of &lt;code class=&quot;highlighter-rouge&quot;&gt;Write once, run everywhere.&lt;/code&gt; is very popular. However, the &lt;strong&gt;.NET Framework&lt;/strong&gt; is just permitted to run on windows. So, the &lt;strong&gt;.NET Core&lt;/strong&gt; was born. The &lt;strong&gt;.NET Core&lt;/strong&gt; absorbed almost all advantages of the &lt;strong&gt;.NET Framework&lt;/strong&gt;, and it also adds a lot of new features. The &lt;strong&gt;.Net Core 1.0&lt;/strong&gt; was released in &lt;strong&gt;June 2016&lt;/strong&gt; by Microsoft. In &lt;strong&gt;2017&lt;/strong&gt;, the &lt;strong&gt;.NET Core 2.0&lt;/strong&gt; was born. In &lt;strong&gt;2019&lt;/strong&gt;, &lt;strong&gt;.NET Core 3.0&lt;/strong&gt; was born. Microsoft is planning to release &lt;strong&gt;.NET 5&lt;/strong&gt; in &lt;strong&gt;2020&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-28-dot-net-core-b.webp&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Below are some of the &lt;strong&gt;.NET Core&lt;/strong&gt; advantages:&lt;/p&gt;

&lt;h2 id=&quot;cross-platform&quot;&gt;Cross-platform&lt;/h2&gt;
&lt;p&gt;You can run .NET Core project on Windows, Linux, and Mac, etc.&lt;/p&gt;

&lt;h2 id=&quot;open-source&quot;&gt;Open-source&lt;/h2&gt;
&lt;p&gt;.NET Core is Open-Source(&lt;a href=&quot;https://source.dot.net/&quot;&gt;link&lt;/a&gt;).&lt;/p&gt;

&lt;h2 id=&quot;supports-a-wide-range-of-application-types&quot;&gt;Supports a wide range of application types&lt;/h2&gt;
&lt;p&gt;You can build multiple application types on .NET Core. such as Desktop, Web, Mobile.&lt;/p&gt;

&lt;h2 id=&quot;cli&quot;&gt;CLI&lt;/h2&gt;
&lt;p&gt;.NET Core includes CIL(common-line interface) for development,&lt;/p&gt;

&lt;h2 id=&quot;compatibility&quot;&gt;Compatibility&lt;/h2&gt;
&lt;p&gt;Compatibility with .NET Framework by using &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&quot;&gt;.NET started&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>.NET Core</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/04/28/dot-net-core/"/>
   <updated>2020-04-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/04/28/dot-net-core</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/&quot; class=&quot;navi-link&quot;&gt;asp.net core tutorial&lt;/a&gt;
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;.net core&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;.NET Core&lt;/strong&gt; is an &lt;strong&gt;&lt;em&gt;open-source&lt;/em&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;em&gt;cross-platform&lt;/em&gt;&lt;/strong&gt; framework. It’s a new version of the .NET Framework(pronounced as &lt;em&gt;dot net&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.NET Framework&lt;/strong&gt; was developing in the late 1990s by Microsoft. By late &lt;strong&gt;2000&lt;/strong&gt;, Microsoft released the first beta version of &lt;strong&gt;.NET 1.0&lt;/strong&gt;. The latest version is &lt;strong&gt;.NET 4.8&lt;/strong&gt; that was released on &lt;strong&gt;18 April 2019&lt;/strong&gt; today, and it is also the &lt;strong&gt;last version&lt;/strong&gt; of the &lt;strong&gt;.NET branch&lt;/strong&gt;. Microsoft announced that they are going to &lt;strong&gt;stop developing further .NET version&lt;/strong&gt; in the future.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-28-dot-net-core-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Today, the concept of &lt;code class=&quot;highlighter-rouge&quot;&gt;Write once, run everywhere.&lt;/code&gt; is very popular. However, the &lt;strong&gt;.NET Framework&lt;/strong&gt; is just permitted to run on windows. So, the &lt;strong&gt;.NET Core&lt;/strong&gt; was born. The &lt;strong&gt;.NET Core&lt;/strong&gt; absorbed almost all advantages of the &lt;strong&gt;.NET Framework&lt;/strong&gt;, and it also adds a lot of new features. The &lt;strong&gt;.Net Core 1.0&lt;/strong&gt; was released in &lt;strong&gt;June 2016&lt;/strong&gt; by Microsoft. In &lt;strong&gt;2017&lt;/strong&gt;, the &lt;strong&gt;.NET Core 2.0&lt;/strong&gt; was born. In &lt;strong&gt;2019&lt;/strong&gt;, &lt;strong&gt;.NET Core 3.0&lt;/strong&gt; was born. Microsoft is planning to release &lt;strong&gt;.NET 5&lt;/strong&gt; in &lt;strong&gt;2020&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-28-dot-net-core-b.webp&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Below are some of the &lt;strong&gt;.NET Core&lt;/strong&gt; advantages:&lt;/p&gt;

&lt;h2 id=&quot;cross-platform&quot;&gt;Cross-platform&lt;/h2&gt;
&lt;p&gt;You can run .NET Core project on Windows, Linux, and Mac, etc.&lt;/p&gt;

&lt;h2 id=&quot;open-source&quot;&gt;Open-source&lt;/h2&gt;
&lt;p&gt;.NET Core is Open-Source(&lt;a href=&quot;https://source.dot.net/&quot;&gt;link&lt;/a&gt;).&lt;/p&gt;

&lt;h2 id=&quot;supports-a-wide-range-of-application-types&quot;&gt;Supports a wide range of application types&lt;/h2&gt;
&lt;p&gt;You can build multiple application types on .NET Core. such as Desktop, Web, Mobile.&lt;/p&gt;

&lt;h2 id=&quot;cli&quot;&gt;CLI&lt;/h2&gt;
&lt;p&gt;.NET Core includes CIL(common-line interface) for development,&lt;/p&gt;

&lt;h2 id=&quot;compatibility&quot;&gt;Compatibility&lt;/h2&gt;
&lt;p&gt;Compatibility with .NET Framework by using &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/standard/net-standard&quot;&gt;.NET started&lt;/a&gt;.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Core Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/"/>
   <updated>2020-04-27T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core&lt;/strong&gt; is a &lt;strong&gt;free&lt;/strong&gt;, &lt;strong&gt;open-source&lt;/strong&gt;(&lt;a href=&quot;https://github.com/dotnet/aspnetcore&quot;&gt;link&lt;/a&gt;), and &lt;strong&gt;cross-platform&lt;/strong&gt; web framework. You can run your Asp.Net Core web app on Windows, Linux, and Mac, etc..&lt;/p&gt;

&lt;p&gt;This article follows the latest release of the &lt;strong&gt;.NET CORE&lt;/strong&gt;. The purpose of this paper is to study and share. Let’s explore together!&lt;/p&gt;

&lt;!--
https://www.tutorialsteacher.com/core
1. ASP.NET Core and ASP.NET
2. ASP.NET Core runtime illustration
3. 
--&gt;
&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/04/28/dot-net-core/&quot; class=&quot;item-link&quot;&gt;.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/04/28/dot-net-core/&quot; class=&quot;item-link&quot;&gt;.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/&quot; class=&quot;item-link&quot;&gt;ASP.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/&quot; class=&quot;item-link&quot;&gt;ASP.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/06/project-structure/&quot; class=&quot;item-link&quot;&gt;Project structure&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/06/project-structure/&quot; class=&quot;item-link&quot;&gt;Project structure&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;item-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;item-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;item-link&quot;&gt;Middleware Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;item-link&quot;&gt;Middleware Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/29/Logging/&quot; class=&quot;item-link&quot;&gt;Logging&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/29/Logging/&quot; class=&quot;item-link&quot;&gt;Logging&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;item-link&quot;&gt;Security &amp;amp; Identity&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;item-link&quot;&gt;Security &amp;amp; Identity&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;item-link&quot;&gt;Performance&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;item-link&quot;&gt;Performance&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;item-link&quot;&gt;Host&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;item-link&quot;&gt;Host&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>ASP.NET Core Tutorial</title>
   <link href="http://localhost:4000/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial/"/>
   <updated>2020-04-27T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-asp.net%20core/2020/04/27/asp-dot-net-core-tutorial</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
&lt;a class=&quot;navi-link&quot; href=&quot;&quot;&gt;asp.net core tutorial&lt;/a&gt;
&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;ASP.NET Core&lt;/strong&gt; is a &lt;strong&gt;free&lt;/strong&gt;, &lt;strong&gt;open-source&lt;/strong&gt;(&lt;a href=&quot;https://github.com/dotnet/aspnetcore&quot;&gt;link&lt;/a&gt;), and &lt;strong&gt;cross-platform&lt;/strong&gt; web framework. You can run your Asp.Net Core web app on Windows, Linux, and Mac, etc..&lt;/p&gt;

&lt;p&gt;This article follows the latest release of the &lt;strong&gt;.NET CORE&lt;/strong&gt;. The purpose of this paper is to study and share. Let’s explore together!&lt;/p&gt;

&lt;!--
https://www.tutorialsteacher.com/core
1. ASP.NET Core and ASP.NET
2. ASP.NET Core runtime illustration
3. 
--&gt;
&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/04/28/dot-net-core/&quot; class=&quot;item-link&quot;&gt;.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/04/28/dot-net-core/&quot; class=&quot;item-link&quot;&gt;.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/&quot; class=&quot;item-link&quot;&gt;ASP.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/03/asp-dot-net-core/&quot; class=&quot;item-link&quot;&gt;ASP.NET Core&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/06/project-structure/&quot; class=&quot;item-link&quot;&gt;Project structure&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/06/project-structure/&quot; class=&quot;item-link&quot;&gt;Project structure&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;item-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/07/dependency-injection-tutorial/&quot; class=&quot;item-link&quot;&gt;Dependency Injection Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;item-link&quot;&gt;Middleware Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/05/19/middleware-tutorial/&quot; class=&quot;item-link&quot;&gt;Middleware Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/29/Logging/&quot; class=&quot;item-link&quot;&gt;Logging&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/29/Logging/&quot; class=&quot;item-link&quot;&gt;Logging&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;item-link&quot;&gt;Security &amp;amp; Identity&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/08/security-and-identity/&quot; class=&quot;item-link&quot;&gt;Security &amp;amp; Identity&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;item-link&quot;&gt;Performance&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/06/24/performance/&quot; class=&quot;item-link&quot;&gt;Performance&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;item-link&quot;&gt;Host&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-asp.net%20core/2020/07/13/host/&quot; class=&quot;item-link&quot;&gt;Host&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>From Existing Database</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/24/From-Existing-Database/"/>
   <updated>2020-04-24T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/24/From-Existing-Database</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Here, I will illustrate how to generate Context and Entities from an existing database. As the Entity Framework Core doesn’t provide a visual designer, so we need to use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Scaffold-DbContext&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;I have a database which already populated.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-26-From-Existing-Database-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Scaffold-DbContext Command&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Use &lt;code class=&quot;highlighter-rouge&quot;&gt;Scaffold-DbContext&lt;/code&gt; to create models is easy. get its syntax and details by running the &lt;code class=&quot;highlighter-rouge&quot;&gt;get-help entityframeworkcore&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;get-help Scaffold-DbContext&lt;/code&gt; command on &lt;strong&gt;&lt;em&gt;Package Manager Console&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Scaffold-DbContext [-Connection] &amp;lt;String&amp;gt; [-Provider] &amp;lt;String&amp;gt; [-OutputDir &amp;lt;String&amp;gt;] [-ContextDir &amp;lt;String&amp;gt;] [-Context &amp;lt;String&amp;gt;] [-Schemas &amp;lt;String[]&amp;gt;] [-Tables &amp;lt;String[]&amp;gt;] [-DataAnnotations] [-UseDatabaseNames] [-Force] [-Project &amp;lt;String&amp;gt;] [-StartupProject &amp;lt;String&amp;gt;] [&amp;lt;CommonParameters&amp;gt;]

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this situation, run the following code on &lt;strong&gt;&lt;em&gt;NuGet package manager&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Scaffold-DbContext &quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it will create a &lt;strong&gt;models&lt;/strong&gt; folder, and put the entity and context class into it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-26-From-Existing-Database-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The generated code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolDBContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsConfigured&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#warning To protect potentially sensitive information in your connection string, you should move it out of source code. See http://go.microsoft.com/fwlink/?LinkId=723263 for guidance on storing connection strings.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;classroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ICollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, what’s applied is that the &lt;strong&gt;Fluent-API&lt;/strong&gt;. However, if you want to use the &lt;strong&gt;DataAnnotations&lt;/strong&gt;, then you should add the &lt;code class=&quot;highlighter-rouge&quot;&gt;-DataAnnotations&lt;/code&gt; at the end of the command.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Scaffold-DbContext &quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -DataAnnotations
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the generated code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolDBContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsConfigured&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#warning To protect potentially sensitive information in your connection string, you should move it out of source code. See http://go.microsoft.com/fwlink/?LinkId=723263 for guidance on storing connection strings.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;classroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;nameof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Monitor&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Classroom&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ICollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here it is the &lt;strong&gt;DataAnnotation&lt;/strong&gt; now!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>From Existing Database</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/24/From-Existing-Database/"/>
   <updated>2020-04-24T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/24/From-Existing-Database</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Here, I will illustrate how to generate Context and Entities from an existing database. As the Entity Framework Core doesn’t provide a visual designer, so we need to use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Scaffold-DbContext&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;I have a database which already populated.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-26-From-Existing-Database-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Scaffold-DbContext Command&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Use &lt;code class=&quot;highlighter-rouge&quot;&gt;Scaffold-DbContext&lt;/code&gt; to create models is easy. get its syntax and details by running the &lt;code class=&quot;highlighter-rouge&quot;&gt;get-help entityframeworkcore&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;get-help Scaffold-DbContext&lt;/code&gt; command on &lt;strong&gt;&lt;em&gt;Package Manager Console&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Scaffold-DbContext [-Connection] &amp;lt;String&amp;gt; [-Provider] &amp;lt;String&amp;gt; [-OutputDir &amp;lt;String&amp;gt;] [-ContextDir &amp;lt;String&amp;gt;] [-Context &amp;lt;String&amp;gt;] [-Schemas &amp;lt;String[]&amp;gt;] [-Tables &amp;lt;String[]&amp;gt;] [-DataAnnotations] [-UseDatabaseNames] [-Force] [-Project &amp;lt;String&amp;gt;] [-StartupProject &amp;lt;String&amp;gt;] [&amp;lt;CommonParameters&amp;gt;]

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this situation, run the following code on &lt;strong&gt;&lt;em&gt;NuGet package manager&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Scaffold-DbContext &quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it will create a &lt;strong&gt;models&lt;/strong&gt; folder, and put the entity and context class into it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-04-26-From-Existing-Database-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The generated code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolDBContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsConfigured&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#warning To protect potentially sensitive information in your connection string, you should move it out of source code. See http://go.microsoft.com/fwlink/?LinkId=723263 for guidance on storing connection strings.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;classroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ICollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, what’s applied is that the &lt;strong&gt;Fluent-API&lt;/strong&gt;. However, if you want to use the &lt;strong&gt;DataAnnotations&lt;/strong&gt;, then you should add the &lt;code class=&quot;highlighter-rouge&quot;&gt;-DataAnnotations&lt;/code&gt; at the end of the command.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; Scaffold-DbContext &quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -DataAnnotations
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the generated code:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolDBContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolDBContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsConfigured&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#warning To protect potentially sensitive information in your connection string, you should move it out of source code. See http://go.microsoft.com/fwlink/?LinkId=723263 for guidance on storing connection strings.
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDB;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreatingPartial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;classroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;nameof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Monitor&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;partial&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Classroom&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ICollection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here it is the &lt;strong&gt;DataAnnotation&lt;/strong&gt; now!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Execute Raw SQL</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/24/Raw-Sql-Operation/"/>
   <updated>2020-04-24T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/24/Raw-Sql-Operation</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;ORM can’t handle complex situations. From time to time, you may need to uplifting performance from executing raw SQL.&lt;/p&gt;

&lt;p&gt;Microsoft Document described how the raw SQL queries stuff work on &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/querying/raw-sql&quot;&gt;Raw SQL Queries&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Subject to the &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/querying/raw-sql#limitations&quot;&gt;limitations&lt;/a&gt;, here’s a quote:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;There are a few limitations to be aware of when using raw SQL queries:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;The SQL query must return data for all properties of the entity type.&lt;/li&gt;
    &lt;li&gt;The column names in the result set must match the column names that properties are mapped to. Note this behavior is different from EF6. EF6 ignored property to column mapping for raw SQL queries and result set column names had to match the property names.&lt;/li&gt;
    &lt;li&gt;The SQL query can’t contain related data. However, in many cases you can compose on top of the query using the Include operator to return related data (see Including related data).&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;So, &lt;strong&gt;apply the raw SQL queries on Entity Framework Core still have limitations&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;If you are looking for &lt;strong&gt;an unlimited solution&lt;/strong&gt;, then you should use &lt;strong&gt;ADO.NET&lt;/strong&gt;,  which allows you to return whatever data type you wanted.&lt;/p&gt;

&lt;p&gt;You can get the &lt;code class=&quot;highlighter-rouge&quot;&gt;DatabaseFacade&lt;/code&gt; instance from the &lt;code class=&quot;highlighter-rouge&quot;&gt;Context&lt;/code&gt; instance by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;Database&lt;/code&gt; attribute. Once you get the &lt;code class=&quot;highlighter-rouge&quot;&gt;DatabaseFacade&lt;/code&gt; instance, then you can do whatever custom operation you wanted.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeProcedure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;procudureName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;procudureName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StoredProcedure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Commandtype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DataSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetDbConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CommandText&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Commandtype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;DbParameter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ParameterName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ParameterName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Parameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;OpenConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;DbDataAdapter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbProviderFactories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetDbConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDataAdapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SelectCommand&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Execute Raw SQL</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/24/Raw-Sql-Operation/"/>
   <updated>2020-04-24T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/24/Raw-Sql-Operation</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;ORM can’t handle complex situations. From time to time, you may need to uplifting performance from executing raw SQL.&lt;/p&gt;

&lt;p&gt;Microsoft Document described how the raw SQL queries stuff work on &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/querying/raw-sql&quot;&gt;Raw SQL Queries&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Subject to the &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/querying/raw-sql#limitations&quot;&gt;limitations&lt;/a&gt;, here’s a quote:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;There are a few limitations to be aware of when using raw SQL queries:&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;The SQL query must return data for all properties of the entity type.&lt;/li&gt;
    &lt;li&gt;The column names in the result set must match the column names that properties are mapped to. Note this behavior is different from EF6. EF6 ignored property to column mapping for raw SQL queries and result set column names had to match the property names.&lt;/li&gt;
    &lt;li&gt;The SQL query can’t contain related data. However, in many cases you can compose on top of the query using the Include operator to return related data (see Including related data).&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;So, &lt;strong&gt;apply the raw SQL queries on Entity Framework Core still have limitations&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;If you are looking for &lt;strong&gt;an unlimited solution&lt;/strong&gt;, then you should use &lt;strong&gt;ADO.NET&lt;/strong&gt;,  which allows you to return whatever data type you wanted.&lt;/p&gt;

&lt;p&gt;You can get the &lt;code class=&quot;highlighter-rouge&quot;&gt;DatabaseFacade&lt;/code&gt; instance from the &lt;code class=&quot;highlighter-rouge&quot;&gt;Context&lt;/code&gt; instance by calling the &lt;code class=&quot;highlighter-rouge&quot;&gt;Database&lt;/code&gt; attribute. Once you get the &lt;code class=&quot;highlighter-rouge&quot;&gt;DatabaseFacade&lt;/code&gt; instance, then you can do whatever custom operation you wanted.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeProcedure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;procudureName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;procudureName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StoredProcedure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executeSqlCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Commandtype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;DataSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DataSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetDbConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CommandText&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commandText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CommandType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Commandtype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;DbParameter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateParameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ParameterName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ParameterName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_kv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Parameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_dbpara&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;OpenConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;DbDataAdapter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbProviderFactories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetDbConnection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDataAdapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SelectCommand&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Fill&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Fluent API</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/15/Fluent-API/"/>
   <updated>2020-04-15T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/15/Fluent-API</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;navi-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;navi-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In Entity Framework Core, you can override the &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext.ModelBuilder&lt;/code&gt; method of &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt; to use the Fluent API functionality.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=_server;Database=_database;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;int&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;IsRequired&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasMaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nvarchar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lastmodifytime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAddOrUpdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Fluent API provides methods for configuring variable aspects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Model Configuration&lt;/li&gt;
  &lt;li&gt;Entity Configuration&lt;/li&gt;
  &lt;li&gt;Property Configuration&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;model-configuration&quot;&gt;Model Configuration&lt;/h1&gt;
&lt;p&gt;You can configure on the &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelBuilder&lt;/code&gt; instance such as the default scheme, functions, ignore given entities.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelBuilder&lt;/code&gt; instance includes a lot of methods that used to break the default convention.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ignore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultSchema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDbFunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;myCustomFunction&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//other configurations&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;entity-configuration&quot;&gt;Entity Configuration&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;entity configuration&lt;/strong&gt; configure entity to table and relationship mapping such as the Primary key, Foreign Key, Index, Table etc…&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;property-configuration&quot;&gt;Property Configuration&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;Property Configuration&lt;/strong&gt; configure property to column mapping such as column name, column type, default value, Foreign key, concurrency check, etc…&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can do almost any configurations in Fluent API. The First-Code default convention provides enough mechanisms for relationship configuration. So you don’t have to configure it. But if you desire to perform all configuration in Fluent API for easy maintaining purposes.&lt;/p&gt;

&lt;p&gt;We are going to illustrate the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-Many&lt;/code&gt; relationship, the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-One&lt;/code&gt; relationship and the &lt;code class=&quot;highlighter-rouge&quot;&gt;Many-To-Many&lt;/code&gt; relationship.&lt;/p&gt;

&lt;h2 id=&quot;one-to-many&quot;&gt;One-To-Many&lt;/h2&gt;

&lt;p&gt;Let’s look the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-Many&lt;/code&gt; relationship first!&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//a student can have lots of teachers&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;OnDelete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DeleteBehavior&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetNull&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;many-to-many&quot;&gt;Many-To-Many&lt;/h2&gt;

&lt;p&gt;If a teacher can only have a student, maybe it seems too weird. The more practical relationship is that each teacher can have more than one student, and each student can also have more than one teacher. It is a Many-To-Many relationship.&lt;/p&gt;

&lt;p&gt;The EntityFrameworkCore is still not supporting the Many-To-Many relationship without an entity class that represents the join table.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Many-to-many relationships without an entity class to represent the join table are not yet supported. However, you can represent a many-to-many relationship by including an entity class for the join table and mapping two separate one-to-many relationships. &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/relationships?tabs=fluent-api%2Cfluent-api-simple-key%2Csimple-key#other-relationship-patterns&quot;&gt;look more&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So we need to define an entity class that represents the join table role, then configure twice the One-To-Many relationship.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//make the studentid and teacherid both are the primary key of the table&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//configure relationship between the Student entity and StudentTeacher entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//configure relationship between the Teacher entity and StudentTeacher entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StudentTeacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;//for mapping StudentTeacher and student relationship&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//for mapping StudentTeacher and teacher relationship&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;one-to-one&quot;&gt;One-To-One&lt;/h2&gt;
&lt;p&gt;Let us think about this relationship between classroom and monitor. Usually, there can only be one monitor in a classroom, and a monitor can only belong to one classroom. So It is a One-To-One relationship.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the database is going to generate a &lt;strong&gt;unique foreign key index&lt;/strong&gt; on &lt;strong&gt;Monitor&lt;/strong&gt; class which guarantees the One-To-One relationship.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Fluent API</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/15/Fluent-API/"/>
   <updated>2020-04-15T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/15/Fluent-API</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;navi-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;navi-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;In Entity Framework Core, you can override the &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext.ModelBuilder&lt;/code&gt; method of &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt; to use the Fluent API functionality.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=_server;Database=_database;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;int&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;IsRequired&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasMaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nvarchar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lastmodifytime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAddOrUpdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Fluent API provides methods for configuring variable aspects:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Model Configuration&lt;/li&gt;
  &lt;li&gt;Entity Configuration&lt;/li&gt;
  &lt;li&gt;Property Configuration&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;model-configuration&quot;&gt;Model Configuration&lt;/h1&gt;
&lt;p&gt;You can configure on the &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelBuilder&lt;/code&gt; instance such as the default scheme, functions, ignore given entities.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelBuilder&lt;/code&gt; instance includes a lot of methods that used to break the default convention.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ignore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultSchema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDbFunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;myCustomFunction&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//other configurations&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;entity-configuration&quot;&gt;Entity Configuration&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;entity configuration&lt;/strong&gt; configure entity to table and relationship mapping such as the Primary key, Foreign Key, Index, Table etc…&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;property-configuration&quot;&gt;Property Configuration&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;Property Configuration&lt;/strong&gt; configure property to column mapping such as column name, column type, default value, Foreign key, concurrency check, etc…&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasColumnType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;datetime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasColumnName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;ValueGeneratedOnAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can do almost any configurations in Fluent API. The First-Code default convention provides enough mechanisms for relationship configuration. So you don’t have to configure it. But if you desire to perform all configuration in Fluent API for easy maintaining purposes.&lt;/p&gt;

&lt;p&gt;We are going to illustrate the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-Many&lt;/code&gt; relationship, the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-One&lt;/code&gt; relationship and the &lt;code class=&quot;highlighter-rouge&quot;&gt;Many-To-Many&lt;/code&gt; relationship.&lt;/p&gt;

&lt;h2 id=&quot;one-to-many&quot;&gt;One-To-Many&lt;/h2&gt;

&lt;p&gt;Let’s look the &lt;code class=&quot;highlighter-rouge&quot;&gt;One-To-Many&lt;/code&gt; relationship first!&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//a student can have lots of teachers&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;OnDelete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DeleteBehavior&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetNull&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;many-to-many&quot;&gt;Many-To-Many&lt;/h2&gt;

&lt;p&gt;If a teacher can only have a student, maybe it seems too weird. The more practical relationship is that each teacher can have more than one student, and each student can also have more than one teacher. It is a Many-To-Many relationship.&lt;/p&gt;

&lt;p&gt;The EntityFrameworkCore is still not supporting the Many-To-Many relationship without an entity class that represents the join table.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Many-to-many relationships without an entity class to represent the join table are not yet supported. However, you can represent a many-to-many relationship by including an entity class for the join table and mapping two separate one-to-many relationships. &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/relationships?tabs=fluent-api%2Cfluent-api-simple-key%2Csimple-key#other-relationship-patterns&quot;&gt;look more&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So we need to define an entity class that represents the join table role, then configure twice the One-To-Many relationship.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//make the studentid and teacherid both are the primary key of the table&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//configure relationship between the Student entity and StudentTeacher entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//configure relationship between the Teacher entity and StudentTeacher entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithMany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StudentTeacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentTeachers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StudentTeacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;//for mapping StudentTeacher and student relationship&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//for mapping StudentTeacher and teacher relationship&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacherid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;one-to-one&quot;&gt;One-To-One&lt;/h2&gt;
&lt;p&gt;Let us think about this relationship between classroom and monitor. Usually, there can only be one monitor in a classroom, and a monitor can only belong to one classroom. So It is a One-To-One relationship.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WithOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HasForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;moni&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the database is going to generate a &lt;strong&gt;unique foreign key index&lt;/strong&gt; on &lt;strong&gt;Monitor&lt;/strong&gt; class which guarantees the One-To-One relationship.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Fluent API Tutorial</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/14/Fluent-API-Introduction/"/>
   <updated>2020-04-14T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/14/Fluent-API-Introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Fluent API&lt;/strong&gt; is a complementary approach that data annotation can’t do.  the design pattern comes from &lt;strong&gt;&lt;em&gt;Fluent API&lt;/em&gt;&lt;/strong&gt;(a.k.a &lt;a href=&quot;https://en.wikipedia.org/wiki/Fluent_interface&quot;&gt;Fluent Interface&lt;/a&gt;). the actual implement mechanism comes from &lt;a href=&quot;https://en.wikipedia.org/wiki/Method_chaining&quot;&gt;Method Chaining&lt;/a&gt;.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Fluent API is another way to configure domain classes over the Code First Convention and Data Annotation.&lt;/li&gt;
  &lt;li&gt;Fluent API is more flexible and provides developers more functionalities than Data Annotation.&lt;/li&gt;
  &lt;li&gt;The priority of the Entity Framework processing is &lt;strong&gt;&lt;em&gt;Fluent API &amp;gt; Data Annotation &amp;gt; Default Convention&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/15/Fluent-API/&quot; class=&quot;item-link&quot;&gt;Fluent API&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/15/Fluent-API/&quot; class=&quot;item-link&quot;&gt;Fluent API&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Fluent API Tutorial</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/14/Fluent-API-Introduction/"/>
   <updated>2020-04-14T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/14/Fluent-API-Introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Fluent API&lt;/strong&gt; is a complementary approach that data annotation can’t do.  the design pattern comes from &lt;strong&gt;&lt;em&gt;Fluent API&lt;/em&gt;&lt;/strong&gt;(a.k.a &lt;a href=&quot;https://en.wikipedia.org/wiki/Fluent_interface&quot;&gt;Fluent Interface&lt;/a&gt;). the actual implement mechanism comes from &lt;a href=&quot;https://en.wikipedia.org/wiki/Method_chaining&quot;&gt;Method Chaining&lt;/a&gt;.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Fluent API is another way to configure domain classes over the Code First Convention and Data Annotation.&lt;/li&gt;
  &lt;li&gt;Fluent API is more flexible and provides developers more functionalities than Data Annotation.&lt;/li&gt;
  &lt;li&gt;The priority of the Entity Framework processing is &lt;strong&gt;&lt;em&gt;Fluent API &amp;gt; Data Annotation &amp;gt; Default Convention&lt;/em&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/15/Fluent-API/&quot; class=&quot;item-link&quot;&gt;Fluent API&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/15/Fluent-API/&quot; class=&quot;item-link&quot;&gt;Fluent API&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - ConcurrencyCheck Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/"/>
   <updated>2020-04-10T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Database concurrency refers to situations in which multiple users take part in trying to modify the same data. Let us deep in this scenario in two users are trying to change the order state simultaneously. Two users booked the same order, which should never happen. How do we avoid it? One of its solutions is to apply concurrency checks.&lt;/p&gt;

&lt;p&gt;Entity Framework 6 and Entity Framework Core both supports &lt;strong&gt;optimistic concurrency control&lt;/strong&gt;, which can solve the above problem. When applied the &lt;strong&gt;ConcurrencyCheck&lt;/strong&gt; to a property, the corresponding column in the database table will use the &lt;strong&gt;&lt;em&gt;where&lt;/em&gt;&lt;/strong&gt; clause complete the &lt;strong&gt;optimistic concurrency check&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;We have known that the &lt;strong&gt;Timestamp&lt;/strong&gt; is the mechanism that applied the &lt;strong&gt;optimistic concurrency check&lt;/strong&gt;. more details about &lt;strong&gt;Timestamp&lt;/strong&gt; check &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;let’s look at the below example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConcurrencyCheck&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, the &lt;strong&gt;ConcurrencyCheck&lt;/strong&gt; is applied to the &lt;strong&gt;name&lt;/strong&gt; property of the &lt;strong&gt;Student&lt;/strong&gt; entity class. So the EF will include the &lt;strong&gt;name&lt;/strong&gt; column in the &lt;strong&gt;UPDATE&lt;/strong&gt; statement to check for optimistic concurrency.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//add Student class&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the above example will execute the fellowing &lt;strong&gt;UPDATE&lt;/strong&gt; statement on &lt;code class=&quot;highlighter-rouge&quot;&gt;SaveChanges()&lt;/code&gt;, where it includes the &lt;strong&gt;name&lt;/strong&gt; in the &lt;strong&gt;where&lt;/strong&gt; clause.&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
UPDATE [student] SET [name] = @p0
WHERE [Id] = @p1 AND [name] = @p2;
SELECT @@ROWCOUNT;
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p1 int,@p0 nvarchar(4000),@p2 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe bryant'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - ConcurrencyCheck Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/"/>
   <updated>2020-04-10T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Database concurrency refers to situations in which multiple users take part in trying to modify the same data. Let us deep in this scenario in two users are trying to change the order state simultaneously. Two users booked the same order, which should never happen. How do we avoid it? One of its solutions is to apply concurrency checks.&lt;/p&gt;

&lt;p&gt;Entity Framework 6 and Entity Framework Core both supports &lt;strong&gt;optimistic concurrency control&lt;/strong&gt;, which can solve the above problem. When applied the &lt;strong&gt;ConcurrencyCheck&lt;/strong&gt; to a property, the corresponding column in the database table will use the &lt;strong&gt;&lt;em&gt;where&lt;/em&gt;&lt;/strong&gt; clause complete the &lt;strong&gt;optimistic concurrency check&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;We have known that the &lt;strong&gt;Timestamp&lt;/strong&gt; is the mechanism that applied the &lt;strong&gt;optimistic concurrency check&lt;/strong&gt;. more details about &lt;strong&gt;Timestamp&lt;/strong&gt; check &lt;a href=&quot;https://voltwu.github.io/blog/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;let’s look at the below example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ConcurrencyCheck&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, the &lt;strong&gt;ConcurrencyCheck&lt;/strong&gt; is applied to the &lt;strong&gt;name&lt;/strong&gt; property of the &lt;strong&gt;Student&lt;/strong&gt; entity class. So the EF will include the &lt;strong&gt;name&lt;/strong&gt; column in the &lt;strong&gt;UPDATE&lt;/strong&gt; statement to check for optimistic concurrency.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//add Student class&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the above example will execute the fellowing &lt;strong&gt;UPDATE&lt;/strong&gt; statement on &lt;code class=&quot;highlighter-rouge&quot;&gt;SaveChanges()&lt;/code&gt;, where it includes the &lt;strong&gt;name&lt;/strong&gt; in the &lt;strong&gt;where&lt;/strong&gt; clause.&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
UPDATE [student] SET [name] = @p0
WHERE [Id] = @p1 AND [name] = @p2;
SELECT @@ROWCOUNT;
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p1 int,@p0 nvarchar(4000),@p2 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe bryant'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - DatabaseGenerated Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/"/>
   <updated>2020-04-09T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;According to the Code First convention, a primary key column is going to be applied &lt;strong&gt;IDENTITY&lt;/strong&gt; constraint and AutoIncrement that the default seed and step are both numeric &lt;strong&gt;1&lt;/strong&gt; by default.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;DatabaseGeneratedAttribute&lt;/strong&gt; specifies how the database generates values for a property. The &lt;strong&gt;DatabaseGeneratedAttribute&lt;/strong&gt; has a constructor that accepts a &lt;strong&gt;DatabaseGeneratedOption&lt;/strong&gt; instance, which is an Enum type that contains three available fields.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DatabaseGeneratedOption.None&lt;/li&gt;
  &lt;li&gt;DatabaseGeneratedOption.Identity&lt;/li&gt;
  &lt;li&gt;DatabaseGeneratedOption.Computed&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;databasegeneratedoptionnone&quot;&gt;DatabaseGeneratedOption.None&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;None&lt;/strong&gt; represents the database doesn’t generate value automatically. As per the default convention, Entity Framework will map a property that is an integer type and named as &lt;code class=&quot;highlighter-rouge&quot;&gt;Id&lt;/code&gt; into a primary key. This mechanism means the underlying database will generate a new value for this column each time an insert operation occurred.&lt;/p&gt;

&lt;p&gt;In the below example, we applied the &lt;strong&gt;DatabaseGeneratedOption.None&lt;/strong&gt; to breaks the default convention.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Database screenshot as below
&lt;img src=&quot;/public/img/2020-04-09-Data-Annotation-Attribute-DatabaseGenerated-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Id&lt;/strong&gt; column doesn’t specify as an identity. Now, the &lt;strong&gt;Id&lt;/strong&gt; value needs to be specified explicitly.&lt;/p&gt;

&lt;h1 id=&quot;databasegeneratedoptionidentity&quot;&gt;DatabaseGeneratedOption.Identity&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Identity&lt;/strong&gt; represents that the database generates a value when an insert statement occurs. This property would not be affected by the &lt;strong&gt;UPDATE&lt;/strong&gt; statement.&lt;/p&gt;

&lt;p&gt;Please note that the way the value generated by the database is depending on the provider. It can be &lt;code class=&quot;highlighter-rouge&quot;&gt;Identity&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;rowversion&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;GUID&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[DatabaseGenerated(DatabaseGeneratedOption.Identity)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;databasegeneratedoptioncomputed&quot;&gt;DatabaseGeneratedOption.Computed&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Computed&lt;/strong&gt; represents that the database generates a value when an &lt;strong&gt;INSERT&lt;/strong&gt; statement or an &lt;strong&gt;UPDATE&lt;/strong&gt; statement occurs. This property would be affected by both the &lt;strong&gt;UPDATE&lt;/strong&gt; statement and the &lt;strong&gt;INSERT&lt;/strong&gt; statement.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[DatabaseGenerated(DatabaseGeneratedOption.Computed)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;p&gt;According to &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations&quot;&gt;the Official document&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values. See &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations#value-generated-on-add&quot;&gt;Value generated on add section&lt;/a&gt; or &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations#value-generated-on-add-or-update&quot;&gt;Value generated on add or update section&lt;/a&gt; for more details.
&lt;/blockquote&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=_server;Database=_database;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasComputedColumnSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Computed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because the Entity Framework doesn’t set up the actual mechanism to generate values. so it needs to be specified explicitly with &lt;strong&gt;fluent API&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasComputedColumnSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;operate code example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;last_modify_time:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;-------------------------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;last_modify_time:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the output:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name:curry
addtime:2020/4/9 22:58:51
last_modify_time:2020/4/9 22:58:51
-------------------------
name:curry1
addtime:2020/4/9 22:58:51
last_modify_time:2020/4/9 22:58:52
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - DatabaseGenerated Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/"/>
   <updated>2020-04-09T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;According to the Code First convention, a primary key column is going to be applied &lt;strong&gt;IDENTITY&lt;/strong&gt; constraint and AutoIncrement that the default seed and step are both numeric &lt;strong&gt;1&lt;/strong&gt; by default.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;DatabaseGeneratedAttribute&lt;/strong&gt; specifies how the database generates values for a property. The &lt;strong&gt;DatabaseGeneratedAttribute&lt;/strong&gt; has a constructor that accepts a &lt;strong&gt;DatabaseGeneratedOption&lt;/strong&gt; instance, which is an Enum type that contains three available fields.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DatabaseGeneratedOption.None&lt;/li&gt;
  &lt;li&gt;DatabaseGeneratedOption.Identity&lt;/li&gt;
  &lt;li&gt;DatabaseGeneratedOption.Computed&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;databasegeneratedoptionnone&quot;&gt;DatabaseGeneratedOption.None&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;None&lt;/strong&gt; represents the database doesn’t generate value automatically. As per the default convention, Entity Framework will map a property that is an integer type and named as &lt;code class=&quot;highlighter-rouge&quot;&gt;Id&lt;/code&gt; into a primary key. This mechanism means the underlying database will generate a new value for this column each time an insert operation occurred.&lt;/p&gt;

&lt;p&gt;In the below example, we applied the &lt;strong&gt;DatabaseGeneratedOption.None&lt;/strong&gt; to breaks the default convention.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Database screenshot as below
&lt;img src=&quot;/public/img/2020-04-09-Data-Annotation-Attribute-DatabaseGenerated-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Id&lt;/strong&gt; column doesn’t specify as an identity. Now, the &lt;strong&gt;Id&lt;/strong&gt; value needs to be specified explicitly.&lt;/p&gt;

&lt;h1 id=&quot;databasegeneratedoptionidentity&quot;&gt;DatabaseGeneratedOption.Identity&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Identity&lt;/strong&gt; represents that the database generates a value when an insert statement occurs. This property would not be affected by the &lt;strong&gt;UPDATE&lt;/strong&gt; statement.&lt;/p&gt;

&lt;p&gt;Please note that the way the value generated by the database is depending on the provider. It can be &lt;code class=&quot;highlighter-rouge&quot;&gt;Identity&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;rowversion&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;GUID&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[DatabaseGenerated(DatabaseGeneratedOption.Identity)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;databasegeneratedoptioncomputed&quot;&gt;DatabaseGeneratedOption.Computed&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Computed&lt;/strong&gt; represents that the database generates a value when an &lt;strong&gt;INSERT&lt;/strong&gt; statement or an &lt;strong&gt;UPDATE&lt;/strong&gt; statement occurs. This property would be affected by both the &lt;strong&gt;UPDATE&lt;/strong&gt; statement and the &lt;strong&gt;INSERT&lt;/strong&gt; statement.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[DatabaseGenerated(DatabaseGeneratedOption.Computed)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;p&gt;According to &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations&quot;&gt;the Official document&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values. See &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations#value-generated-on-add&quot;&gt;Value generated on add section&lt;/a&gt; or &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/generated-properties?tabs=data-annotations#value-generated-on-add-or-update&quot;&gt;Value generated on add or update section&lt;/a&gt; for more details.
&lt;/blockquote&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=_server;Database=_database;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnModelCreating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModelBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasComputedColumnSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Identity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DatabaseGenerated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DatabaseGeneratedOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Computed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because the Entity Framework doesn’t set up the actual mechanism to generate values. so it needs to be specified explicitly with &lt;strong&gt;fluent API&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasDefaultValueSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;modelBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;HasComputedColumnSql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;getdate()&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;operate code example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;last_modify_time:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;-------------------------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;addtime:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;last_modify_time:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_modify_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the output:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name:curry
addtime:2020/4/9 22:58:51
last_modify_time:2020/4/9 22:58:51
-------------------------
name:curry1
addtime:2020/4/9 22:58:51
last_modify_time:2020/4/9 22:58:52
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - Timestamp Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/"/>
   <updated>2020-04-09T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Timestamp&lt;/strong&gt; provides a mechanism that provides an increasing value. Do not cheat by its semantic. It doesn’t preserve any date or time. The &lt;strong&gt;Timestamp&lt;/strong&gt; used as a synonym of &lt;strong&gt;rowversion&lt;/strong&gt;.  A &lt;strong&gt;Timestamp&lt;/strong&gt;/&lt;strong&gt;rowversion&lt;/strong&gt; is a property for which a new value will be generated automatically by the database every time a row is inserted or updated. The precise details of the implement are depending on the database provider.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Timestamp&lt;/strong&gt;/&lt;strong&gt;rowversion&lt;/strong&gt; is also treated as a concurrency token, ensuring that you get an exception if a row you are updating has changed since you queried it.&lt;/p&gt;

&lt;p&gt;For SQL server, a &lt;strong&gt;&lt;em&gt;byte[]&lt;/em&gt;&lt;/strong&gt; is usually used, which will be set up a &lt;strong&gt;rowversion&lt;/strong&gt; column in the database.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;sql server database screenshot.
&lt;img src=&quot;/public/img/2020-04-08-Data-Annotation-Attribute-Timestamp-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;token&lt;/strong&gt;’s column data type is &lt;strong&gt;timestamp&lt;/strong&gt;, which is the same thing with &lt;strong&gt;rowversion&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Now we are going to add some data for illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//insert&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;//query &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//modify&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;raw SQLs are below:&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;--insert data&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
INSERT INTO [student] ([name])
VALUES (@p0);
SELECT [id], [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p0 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
INSERT INTO [student] ([name])
VALUES (@p0);
SELECT [id], [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p0 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'curry'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--query&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TOP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--update with token check&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
UPDATE [student] SET [name] = @p0
WHERE [id] = @p1 AND [token] = @p2;
SELECT [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = @p1;

'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p1 int,@p0 nvarchar(4000),@p2 varbinary(8)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe bryant'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x00000000000007D1&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As we can see from the raw SQLs. Each &lt;strong&gt;update&lt;/strong&gt; or &lt;strong&gt;insert&lt;/strong&gt; command has a &lt;strong&gt;select&lt;/strong&gt; command on the end because EntityFramework needs to update its state.&lt;/p&gt;

&lt;p&gt;The EntityFrameworkCore also will automatically apply the &lt;strong&gt;&lt;em&gt;token&lt;/em&gt;&lt;/strong&gt; check when the &lt;strong&gt;update&lt;/strong&gt; occurred on tables that have a &lt;strong&gt;timestamp&lt;/strong&gt; column applied. Just as the above illustration.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - Timestamp Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/"/>
   <updated>2020-04-09T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Timestamp&lt;/strong&gt; provides a mechanism that provides an increasing value. Do not cheat by its semantic. It doesn’t preserve any date or time. The &lt;strong&gt;Timestamp&lt;/strong&gt; used as a synonym of &lt;strong&gt;rowversion&lt;/strong&gt;.  A &lt;strong&gt;Timestamp&lt;/strong&gt;/&lt;strong&gt;rowversion&lt;/strong&gt; is a property for which a new value will be generated automatically by the database every time a row is inserted or updated. The precise details of the implement are depending on the database provider.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Timestamp&lt;/strong&gt;/&lt;strong&gt;rowversion&lt;/strong&gt; is also treated as a concurrency token, ensuring that you get an exception if a row you are updating has changed since you queried it.&lt;/p&gt;

&lt;p&gt;For SQL server, a &lt;strong&gt;&lt;em&gt;byte[]&lt;/em&gt;&lt;/strong&gt; is usually used, which will be set up a &lt;strong&gt;rowversion&lt;/strong&gt; column in the database.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;sql server database screenshot.
&lt;img src=&quot;/public/img/2020-04-08-Data-Annotation-Attribute-Timestamp-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;token&lt;/strong&gt;’s column data type is &lt;strong&gt;timestamp&lt;/strong&gt;, which is the same thing with &lt;strong&gt;rowversion&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Now we are going to add some data for illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//insert&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;curry&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;//query &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//modify&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kobe bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;raw SQLs are below:&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;--insert data&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
INSERT INTO [student] ([name])
VALUES (@p0);
SELECT [id], [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p0 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
INSERT INTO [student] ([name])
VALUES (@p0);
SELECT [id], [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();
'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p0 nvarchar(4000)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'curry'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--query&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TOP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--update with token check&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp_executesql&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'SET NOCOUNT ON;
UPDATE [student] SET [name] = @p0
WHERE [id] = @p1 AND [token] = @p2;
SELECT [token]
FROM [student]
WHERE @@ROWCOUNT = 1 AND [id] = @p1;

'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'@p1 int,@p0 nvarchar(4000),@p2 varbinary(8)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'kobe bryant'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x00000000000007D1&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As we can see from the raw SQLs. Each &lt;strong&gt;update&lt;/strong&gt; or &lt;strong&gt;insert&lt;/strong&gt; command has a &lt;strong&gt;select&lt;/strong&gt; command on the end because EntityFramework needs to update its state.&lt;/p&gt;

&lt;p&gt;The EntityFrameworkCore also will automatically apply the &lt;strong&gt;&lt;em&gt;token&lt;/em&gt;&lt;/strong&gt; check when the &lt;strong&gt;update&lt;/strong&gt; occurred on tables that have a &lt;strong&gt;timestamp&lt;/strong&gt; column applied. Just as the above illustration.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - InverseProperty Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/"/>
   <updated>2020-04-07T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Inverse&lt;/code&gt; property attribute is used to denote the inverse navigation property of a relationship when the same type takes part in multipart relationships.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;InverseProperty&lt;/code&gt; attribute is used when two entities have more than one relationship.&lt;/li&gt;
  &lt;li&gt;For Example, in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class, you may want to track the the online class as well as the offline class.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_offlineline_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_online_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offline&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;online&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code will make Entity Framework Core confused. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class has two navigation reference properties. The Code First convention mechanism doesn’t know to use which one to establish a relationship with one of the navigation properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom&lt;/code&gt; class.&lt;/p&gt;

&lt;p&gt;An expected error will be thrown out when trying to execute the command &lt;code class=&quot;highlighter-rouge&quot;&gt;Add-Migration&lt;/code&gt; by force.&lt;/p&gt;

&lt;blockquote&gt;
&lt;div style=&quot;color:red&quot;&gt;Unable to determine the relationship represented by navigation property 'Classroom.all_offlineline_students' of type 'List&amp;#60;Student&amp;#62;'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.&lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;To achieve this purpose, we can apply an &lt;code class=&quot;highlighter-rouge&quot;&gt;InverseProperty&lt;/code&gt; above on the collection properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom&lt;/code&gt; class to specify their corresponding inverse properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;offline&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_offlineline_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;online&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_online_students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offline&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;online&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-08-Data-Annotation-Attribute-Inverse-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - InverseProperty Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/"/>
   <updated>2020-04-07T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Inverse&lt;/code&gt; property attribute is used to denote the inverse navigation property of a relationship when the same type takes part in multipart relationships.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;InverseProperty&lt;/code&gt; attribute is used when two entities have more than one relationship.&lt;/li&gt;
  &lt;li&gt;For Example, in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class, you may want to track the the online class as well as the offline class.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_offlineline_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_online_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offline&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;online&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code will make Entity Framework Core confused. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class has two navigation reference properties. The Code First convention mechanism doesn’t know to use which one to establish a relationship with one of the navigation properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom&lt;/code&gt; class.&lt;/p&gt;

&lt;p&gt;An expected error will be thrown out when trying to execute the command &lt;code class=&quot;highlighter-rouge&quot;&gt;Add-Migration&lt;/code&gt; by force.&lt;/p&gt;

&lt;blockquote&gt;
&lt;div style=&quot;color:red&quot;&gt;Unable to determine the relationship represented by navigation property 'Classroom.all_offlineline_students' of type 'List&amp;#60;Student&amp;#62;'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.&lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;To achieve this purpose, we can apply an &lt;code class=&quot;highlighter-rouge&quot;&gt;InverseProperty&lt;/code&gt; above on the collection properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom&lt;/code&gt; class to specify their corresponding inverse properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; class.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;offline&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_offlineline_students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;InverseProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;online&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all_online_students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offline&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;online&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-08-Data-Annotation-Attribute-Inverse-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - NotMapped Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/"/>
   <updated>2020-04-07T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;As per the Code First convention, the Entity Framework will map each property which has setter and getter method to a column by default. the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute can override this default convention. Entity Framework will exclude the property which applied the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute.&lt;/p&gt;

&lt;p&gt;Let’s look at the below illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NotMapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Entity Framework doesn’t map the &lt;code class=&quot;highlighter-rouge&quot;&gt;age&lt;/code&gt; property.
&lt;img src=&quot;/blog/blog/public/img/2020-04-07-Data-Annotation-Attribute-Notmapped-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; can also be permitted to apply on a Entity name.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[NotMapped]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pubic&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we placed the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute above the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; Entity. the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; will not map to a table.
&lt;img src=&quot;/blog/blog/public/img/2020-04-07-Data-Annotation-Attribute-Notmapped-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - NotMapped Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/"/>
   <updated>2020-04-07T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;As per the Code First convention, the Entity Framework will map each property which has setter and getter method to a column by default. the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute can override this default convention. Entity Framework will exclude the property which applied the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute.&lt;/p&gt;

&lt;p&gt;Let’s look at the below illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NotMapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Entity Framework doesn’t map the &lt;code class=&quot;highlighter-rouge&quot;&gt;age&lt;/code&gt; property.
&lt;img src=&quot;/blog/blog/public/img/2020-04-07-Data-Annotation-Attribute-Notmapped-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; can also be permitted to apply on a Entity name.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[NotMapped]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pubic&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we placed the &lt;code class=&quot;highlighter-rouge&quot;&gt;NotMapped&lt;/code&gt; attribute above the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; Entity. the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt; will not map to a table.
&lt;img src=&quot;/blog/blog/public/img/2020-04-07-Data-Annotation-Attribute-Notmapped-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotations Attributes Overview</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/"/>
   <updated>2020-04-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Entity Framework Core and Entity Framework both provide attributes for help programmers conveniently specify database-related information.&lt;/p&gt;

&lt;p&gt;Entities have their conventions between entities and database tables. However, you can change it with extra data annotations attributes.&lt;/p&gt;

&lt;p&gt;you can independently point out the name of the database, the name of the field, the name of the constraint, etc…  instead of using the default conventions.&lt;/p&gt;

&lt;p&gt;These annotations are included in the &lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations&lt;/code&gt; namespace and the &lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations.Schema&lt;/code&gt; namespace. both are not framework depending namespaces. In other words, it is valid in EF 6 as well as valid in EF Core.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: 
&lt;code class=&quot;highlighter-rouge&quot;&gt;Annotations&lt;/code&gt; only give you a subset of configuration options. and &lt;code class=&quot;highlighter-rouge&quot;&gt;Fluent API&lt;/code&gt; provides full configuration options.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I am going to list out partial common attributes for reference purposes.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations&lt;/code&gt;&lt;/strong&gt; namespace&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Attribute&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Key&lt;/td&gt;
      &lt;td&gt;Denotes one or more properties that uniquely identify an entity&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Required&lt;/td&gt;
      &lt;td&gt;Specifies that a data field value is required&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MaxLength&lt;/td&gt;
      &lt;td&gt;Specifies the maximum length of array or string data allowed in a property&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MinLength&lt;/td&gt;
      &lt;td&gt;Specifies the minimum length of array or string data allowed in a property&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;StringLength&lt;/td&gt;
      &lt;td&gt;Specifies the minimum and maximum length of characters that allowed in a data field&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations.Schema&lt;/code&gt;&lt;/strong&gt; namespace&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Attribute&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Table&lt;/td&gt;
      &lt;td&gt;Can be applied to an entity class to configure the corresponding table name and schema in the database&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Column&lt;/td&gt;
      &lt;td&gt;Specifies the database column that a property is mapped to&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ForeignKey&lt;/td&gt;
      &lt;td&gt;Denotes a property used as a foreign key in a relationship&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;NotMapped&lt;/td&gt;
      &lt;td&gt;Denotes a property or a class should be excluded from the database mapping&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;InverseProperty&lt;/td&gt;
      &lt;td&gt;Can be applied to a property to specify the inverse of a navigation property that represents the other end of the same relationship.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Below is an example for illustrating.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;class name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[Table(&quot;student_table&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StringLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maximumLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-03-29-Data-Annotations-Attributes-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The database’s fields have shown the conversion clearly. If we don’t use annotations, then Entity Framework Core will use the default convention to achieve conversions.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt; attribute in this example hasn’t specified the &lt;strong&gt;schema&lt;/strong&gt; yet.  to complete this only needs to assign a value to the &lt;strong&gt;schema&lt;/strong&gt; property in &lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt; attribute.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Table(&quot;student_table&quot;,Schema=&quot;dbo&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I assigned the &lt;strong&gt;dbo&lt;/strong&gt; to the &lt;strong&gt;schema&lt;/strong&gt;. However, the default &lt;strong&gt;schema&lt;/strong&gt; would also be &lt;strong&gt;dbo&lt;/strong&gt;, if you don’t specify it.&lt;/p&gt;

&lt;p&gt;As you can see from the illustration, these basic attributes are easy to use.&lt;/p&gt;

&lt;p&gt;In the next episodes, I am going to dig into other attributes.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotations Attributes Overview</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/"/>
   <updated>2020-04-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
      
        &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Entity Framework Core and Entity Framework both provide attributes for help programmers conveniently specify database-related information.&lt;/p&gt;

&lt;p&gt;Entities have their conventions between entities and database tables. However, you can change it with extra data annotations attributes.&lt;/p&gt;

&lt;p&gt;you can independently point out the name of the database, the name of the field, the name of the constraint, etc…  instead of using the default conventions.&lt;/p&gt;

&lt;p&gt;These annotations are included in the &lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations&lt;/code&gt; namespace and the &lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations.Schema&lt;/code&gt; namespace. both are not framework depending namespaces. In other words, it is valid in EF 6 as well as valid in EF Core.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: 
&lt;code class=&quot;highlighter-rouge&quot;&gt;Annotations&lt;/code&gt; only give you a subset of configuration options. and &lt;code class=&quot;highlighter-rouge&quot;&gt;Fluent API&lt;/code&gt; provides full configuration options.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I am going to list out partial common attributes for reference purposes.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations&lt;/code&gt;&lt;/strong&gt; namespace&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Attribute&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Key&lt;/td&gt;
      &lt;td&gt;Denotes one or more properties that uniquely identify an entity&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Required&lt;/td&gt;
      &lt;td&gt;Specifies that a data field value is required&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MaxLength&lt;/td&gt;
      &lt;td&gt;Specifies the maximum length of array or string data allowed in a property&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MinLength&lt;/td&gt;
      &lt;td&gt;Specifies the minimum length of array or string data allowed in a property&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;StringLength&lt;/td&gt;
      &lt;td&gt;Specifies the minimum and maximum length of characters that allowed in a data field&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;System.ComponentModel.DataAnnotations.Schema&lt;/code&gt;&lt;/strong&gt; namespace&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Attribute&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Table&lt;/td&gt;
      &lt;td&gt;Can be applied to an entity class to configure the corresponding table name and schema in the database&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Column&lt;/td&gt;
      &lt;td&gt;Specifies the database column that a property is mapped to&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ForeignKey&lt;/td&gt;
      &lt;td&gt;Denotes a property used as a foreign key in a relationship&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;NotMapped&lt;/td&gt;
      &lt;td&gt;Denotes a property or a class should be excluded from the database mapping&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;InverseProperty&lt;/td&gt;
      &lt;td&gt;Can be applied to a property to specify the inverse of a navigation property that represents the other end of the same relationship.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Below is an example for illustrating.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;class name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;[Table(&quot;student_table&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StringLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maximumLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;student_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;studentname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2020-03-29-Data-Annotations-Attributes-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The database’s fields have shown the conversion clearly. If we don’t use annotations, then Entity Framework Core will use the default convention to achieve conversions.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt; attribute in this example hasn’t specified the &lt;strong&gt;schema&lt;/strong&gt; yet.  to complete this only needs to assign a value to the &lt;strong&gt;schema&lt;/strong&gt; property in &lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt; attribute.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;[Table(&quot;student_table&quot;,Schema=&quot;dbo&quot;)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I assigned the &lt;strong&gt;dbo&lt;/strong&gt; to the &lt;strong&gt;schema&lt;/strong&gt;. However, the default &lt;strong&gt;schema&lt;/strong&gt; would also be &lt;strong&gt;dbo&lt;/strong&gt;, if you don’t specify it.&lt;/p&gt;

&lt;p&gt;As you can see from the illustration, these basic attributes are easy to use.&lt;/p&gt;

&lt;p&gt;In the next episodes, I am going to dig into other attributes.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - ForeignKey Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/"/>
   <updated>2020-04-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;foreign-key-default-conventions&quot;&gt;foreign key default conventions&lt;/h1&gt;

&lt;p&gt;First,Let’s look into the default conventions in &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/relationships?tabs=fluent-api%2Cfluent-api-simple-key%2Csimple-key#conventions&quot;&gt;MSDN&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The most common pattern for relationships is to have navigation properties defined on both ends of the relationship and a foreign key property defined in the dependent entity class.&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;
      &lt;p&gt;If a pair of navigation properties is found between two types, then they will be configured as inverse navigation properties of the same relationship.&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;If the dependent entity contains a property with a name matching one of these patterns then it will be configured as the foreign key:&lt;/p&gt;

      &lt;ul&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;Id&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;principal entity name&amp;gt;Id&lt;/strong&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;As per the default convention, when we are going to define a relationship, we should define navigation properties on both ends of the relationship and a foriegn key property in the dependent entity class.&lt;/p&gt;

&lt;p&gt;Suppose we had the following entities.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example is going to configure a column which named &lt;code class=&quot;highlighter-rouge&quot;&gt;myclassroomid&lt;/code&gt; which also is the &lt;strong&gt;foreign key property&lt;/strong&gt; in the dependent entity &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt;. This scenario matching the rule:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;Id&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The navigation property name is &lt;code class=&quot;highlighter-rouge&quot;&gt;myclassroom&lt;/code&gt;, It’s not mentioned explicitly but the matching is case insensitive, so &lt;code class=&quot;highlighter-rouge&quot;&gt;Id&lt;/code&gt; also matches &lt;code class=&quot;highlighter-rouge&quot;&gt;ID&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt; etc.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;foreignkey-attribute&quot;&gt;[ForeignKey] attribute&lt;/h1&gt;

&lt;p&gt;The  &lt;code class=&quot;highlighter-rouge&quot;&gt;ForeignKey&lt;/code&gt; property can override the default convention for a foreign key property. it allows us to specify the foreign key’s name casually.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ForeignKey&lt;/code&gt; attribute can be applied in three ways.&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-foreign-key-property-in-dependent-entity&quot;&gt;[ForeignKey] on foreign key property in dependent entity&lt;/h2&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; can be applied on &lt;strong&gt;a foreign key property&lt;/strong&gt; in the dependent entity.but it doesn’t have any effects, so it’s not wise to apply &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; property on &lt;strong&gt;a foreign key property&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;let’s look at the below illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mycustomclassroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As we can see from the screenshot. it changed nothing, This is because that the &lt;strong&gt;foreign key property&lt;/strong&gt;(&lt;code class=&quot;highlighter-rouge&quot;&gt;public int myclassroomid { set; get; }&lt;/code&gt;) has defined the rule explicitly, so it will ignore the &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; attribute. it’s unnecessary to define a &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; attribtue on &lt;strong&gt;a foreign key property&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-navigation-property-in-dependent-entity&quot;&gt;[ForeignKey] on navigation property in dependent entity&lt;/h2&gt;
&lt;p&gt;it’s recommended to define &lt;strong&gt;a foreign key property&lt;/strong&gt; explicitly on the dependent entity, but it’s not required.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;If no &lt;strong&gt;foreign key property&lt;/strong&gt; is found, a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property will be introduced with the name &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt; or &lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt; if no navigation is present on the dependent entity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;First, let’s dig into the situation which maps the rule &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myownclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, we don’t define a &lt;strong&gt;foreign key property&lt;/strong&gt;. Entity Framework Core will automatically introduce a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property which named &lt;code class=&quot;highlighter-rouge&quot;&gt;myownclassroomid&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The matching rule is &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;navigation property : Student.myownclassroom
principal key : Classroom.id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Here, we can also use the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Foreignkey]&lt;/code&gt; property to override the default convention. put it above on the navigation property &lt;code class=&quot;highlighter-rouge&quot;&gt;myownclassroom&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;custom_myownclassroomfk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myownclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above codes will generate a foreign key column which named &lt;code class=&quot;highlighter-rouge&quot;&gt;custom_myownclassroomfk&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-navigation-property-in-principle-entity&quot;&gt;[ForeignKey] on navigation property in principle entity&lt;/h2&gt;
&lt;p&gt;The third situation is that it doesn’t define any &lt;strong&gt;foreign key properties&lt;/strong&gt; and navigation properties on the dependent entity.
Only define collection properties in the principle entity(no inverse navigation, and no foreign key property) . example like below:&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we don’t define navigation properties and foreign key properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt;. a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property will be automatically introduced in this scenario, the matching rule is the &lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;and the shadow foreign key column name would be the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroomid&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;principal entity : Classroom
principal key property : Classroom.id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; can also be used on the collection reference property &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom.students&lt;/code&gt;, example like below:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;my_custom_classroom_fk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The foreign key property column will be changed to the &lt;code class=&quot;highlighter-rouge&quot;&gt;my_custom_classroom_fk&lt;/code&gt;. 
&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;p&gt;we have learned the most details about the &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; annotation attribute, I personally have two recommendations.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Aways use explicit mapping for relationships&lt;/li&gt;
  &lt;li&gt;Try to avoid &lt;strong&gt;FK&lt;/strong&gt; , use &lt;strong&gt;shadow key&lt;/strong&gt; or &lt;strong&gt;fluent API map()&lt;/strong&gt; instead.&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotation - ForeignKey Attribute</title>
   <link href="http://localhost:4000/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/"/>
   <updated>2020-04-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
        
            &lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;navi-link&quot;&gt;annotations&lt;/a&gt;
        
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        
    
  
    
        
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;foreign-key-default-conventions&quot;&gt;foreign key default conventions&lt;/h1&gt;

&lt;p&gt;First,Let’s look into the default conventions in &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/modeling/relationships?tabs=fluent-api%2Cfluent-api-simple-key%2Csimple-key#conventions&quot;&gt;MSDN&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The most common pattern for relationships is to have navigation properties defined on both ends of the relationship and a foreign key property defined in the dependent entity class.&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;
      &lt;p&gt;If a pair of navigation properties is found between two types, then they will be configured as inverse navigation properties of the same relationship.&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;If the dependent entity contains a property with a name matching one of these patterns then it will be configured as the foreign key:&lt;/p&gt;

      &lt;ul&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;Id&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/li&gt;
        &lt;li&gt;&lt;strong&gt;&amp;lt;principal entity name&amp;gt;Id&lt;/strong&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;As per the default convention, when we are going to define a relationship, we should define navigation properties on both ends of the relationship and a foriegn key property in the dependent entity class.&lt;/p&gt;

&lt;p&gt;Suppose we had the following entities.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroomid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above example is going to configure a column which named &lt;code class=&quot;highlighter-rouge&quot;&gt;myclassroomid&lt;/code&gt; which also is the &lt;strong&gt;foreign key property&lt;/strong&gt; in the dependent entity &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt;. This scenario matching the rule:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;&amp;lt;navigation property name&amp;gt;Id&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The navigation property name is &lt;code class=&quot;highlighter-rouge&quot;&gt;myclassroom&lt;/code&gt;, It’s not mentioned explicitly but the matching is case insensitive, so &lt;code class=&quot;highlighter-rouge&quot;&gt;Id&lt;/code&gt; also matches &lt;code class=&quot;highlighter-rouge&quot;&gt;ID&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt; etc.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;foreignkey-attribute&quot;&gt;[ForeignKey] attribute&lt;/h1&gt;

&lt;p&gt;The  &lt;code class=&quot;highlighter-rouge&quot;&gt;ForeignKey&lt;/code&gt; property can override the default convention for a foreign key property. it allows us to specify the foreign key’s name casually.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ForeignKey&lt;/code&gt; attribute can be applied in three ways.&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-foreign-key-property-in-dependent-entity&quot;&gt;[ForeignKey] on foreign key property in dependent entity&lt;/h2&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; can be applied on &lt;strong&gt;a foreign key property&lt;/strong&gt; in the dependent entity.but it doesn’t have any effects, so it’s not wise to apply &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; property on &lt;strong&gt;a foreign key property&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;let’s look at the below illustration.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mycustomclassroomid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroomid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As we can see from the screenshot. it changed nothing, This is because that the &lt;strong&gt;foreign key property&lt;/strong&gt;(&lt;code class=&quot;highlighter-rouge&quot;&gt;public int myclassroomid { set; get; }&lt;/code&gt;) has defined the rule explicitly, so it will ignore the &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; attribute. it’s unnecessary to define a &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; attribtue on &lt;strong&gt;a foreign key property&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-navigation-property-in-dependent-entity&quot;&gt;[ForeignKey] on navigation property in dependent entity&lt;/h2&gt;
&lt;p&gt;it’s recommended to define &lt;strong&gt;a foreign key property&lt;/strong&gt; explicitly on the dependent entity, but it’s not required.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;If no &lt;strong&gt;foreign key property&lt;/strong&gt; is found, a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property will be introduced with the name &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt; or &lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt; if no navigation is present on the dependent entity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;First, let’s dig into the situation which maps the rule &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myownclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, we don’t define a &lt;strong&gt;foreign key property&lt;/strong&gt;. Entity Framework Core will automatically introduce a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property which named &lt;code class=&quot;highlighter-rouge&quot;&gt;myownclassroomid&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The matching rule is &lt;strong&gt;&amp;lt;navigation property name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;navigation property : Student.myownclassroom
principal key : Classroom.id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Here, we can also use the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Foreignkey]&lt;/code&gt; property to override the default convention. put it above on the navigation property &lt;code class=&quot;highlighter-rouge&quot;&gt;myownclassroom&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;custom_myownclassroomfk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Classroom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myownclassroom&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above codes will generate a foreign key column which named &lt;code class=&quot;highlighter-rouge&quot;&gt;custom_myownclassroomfk&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;foreignkey-on-navigation-property-in-principle-entity&quot;&gt;[ForeignKey] on navigation property in principle entity&lt;/h2&gt;
&lt;p&gt;The third situation is that it doesn’t define any &lt;strong&gt;foreign key properties&lt;/strong&gt; and navigation properties on the dependent entity.
Only define collection properties in the principle entity(no inverse navigation, and no foreign key property) . example like below:&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we don’t define navigation properties and foreign key properties in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Student&lt;/code&gt;. a &lt;strong&gt;shadow foreign key&lt;/strong&gt; property will be automatically introduced in this scenario, the matching rule is the &lt;strong&gt;&amp;lt;principal entity name&amp;gt;&amp;lt;principal key property name&amp;gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;and the shadow foreign key column name would be the &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroomid&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;principal entity : Classroom
principal key property : Classroom.id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-e.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; can also be used on the collection reference property &lt;code class=&quot;highlighter-rouge&quot;&gt;Classroom.students&lt;/code&gt;, example like below:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Classroom&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ForeignKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;my_custom_classroom_fk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Student&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;students&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Student&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The foreign key property column will be changed to the &lt;code class=&quot;highlighter-rouge&quot;&gt;my_custom_classroom_fk&lt;/code&gt;. 
&lt;img src=&quot;/blog/blog/public/img/2020-04-01-Data-Annotation-Attribute-Foreignkey-f.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;summary&quot;&gt;Summary&lt;/h1&gt;
&lt;p&gt;we have learned the most details about the &lt;code class=&quot;highlighter-rouge&quot;&gt;[ForeignKey]&lt;/code&gt; annotation attribute, I personally have two recommendations.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Aways use explicit mapping for relationships&lt;/li&gt;
  &lt;li&gt;Try to avoid &lt;strong&gt;FK&lt;/strong&gt; , use &lt;strong&gt;shadow key&lt;/strong&gt; or &lt;strong&gt;fluent API map()&lt;/strong&gt; instead.&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>Data Annotations Attributes</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/29/Data-Annotations-Attributes/"/>
   <updated>2020-03-29T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/29/Data-Annotations-Attributes</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
    
  
    
  
    
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Configuration enables you to override EF Core’s default behaviour. Configuration can be applied in two ways, using the &lt;strong&gt;Fluent API&lt;/strong&gt;, and through &lt;strong&gt;DataAnnotation attributes&lt;/strong&gt;.  we are going to dig into &lt;strong&gt;Data Annotations&lt;/strong&gt; in the next few articles.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes Overview&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes Overview&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ForeignKey Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ForeignKey Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/&quot; class=&quot;item-link&quot;&gt;Data Annotation - NotMapped Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/&quot; class=&quot;item-link&quot;&gt;Data Annotation - NotMapped Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/&quot; class=&quot;item-link&quot;&gt;Data Annotation - InverseProperty Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/&quot; class=&quot;item-link&quot;&gt;Data Annotation - InverseProperty Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot; class=&quot;item-link&quot;&gt;Data Annotation - Timestamp Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot; class=&quot;item-link&quot;&gt;Data Annotation - Timestamp Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/&quot; class=&quot;item-link&quot;&gt;Data Annotation - DatabaseGenerated Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/&quot; class=&quot;item-link&quot;&gt;Data Annotation - DatabaseGenerated Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ConcurrencyCheck Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ConcurrencyCheck Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Data Annotations Attributes</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/29/Data-Annotations-Attributes/"/>
   <updated>2020-03-29T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/29/Data-Annotations-Attributes</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
    
  
    
  
    
        &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Configuration enables you to override EF Core’s default behaviour. Configuration can be applied in two ways, using the &lt;strong&gt;Fluent API&lt;/strong&gt;, and through &lt;strong&gt;DataAnnotation attributes&lt;/strong&gt;.  we are going to dig into &lt;strong&gt;Data Annotations&lt;/strong&gt; in the next few articles.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes Overview&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotations-Attributes-Introduction/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes Overview&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ForeignKey Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/01/Data-Annotation-Attribute-Foreignkey/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ForeignKey Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/&quot; class=&quot;item-link&quot;&gt;Data Annotation - NotMapped Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Notmapped/&quot; class=&quot;item-link&quot;&gt;Data Annotation - NotMapped Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/&quot; class=&quot;item-link&quot;&gt;Data Annotation - InverseProperty Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/07/Data-Annotation-Attribute-Inverse/&quot; class=&quot;item-link&quot;&gt;Data Annotation - InverseProperty Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot; class=&quot;item-link&quot;&gt;Data Annotation - Timestamp Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-Timestamp/&quot; class=&quot;item-link&quot;&gt;Data Annotation - Timestamp Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/&quot; class=&quot;item-link&quot;&gt;Data Annotation - DatabaseGenerated Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/09/Data-Annotation-Attribute-DatabaseGenerated/&quot; class=&quot;item-link&quot;&gt;Data Annotation - DatabaseGenerated Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ConcurrencyCheck Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/10/Data-Annotation-Attribute-Concurrency/&quot; class=&quot;item-link&quot;&gt;Data Annotation - ConcurrencyCheck Attribute&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/"/>
   <updated>2020-03-21T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;we have known how to use Eager Loading, Explicit Loading and Lazy Loading in the previous three posts. I am going to dig into what’s the advantages and disadvantages of those methods.&lt;/p&gt;

&lt;h1 id=&quot;eager-loading&quot;&gt;Eager Loading&lt;/h1&gt;

&lt;p&gt;Eager Loading means that the related data will load from the database as the initial query.  in other words, Eager Loading can save your time from avoid executing additional SQL queries.&lt;/p&gt;

&lt;p&gt;both Entity Framework 6 and Entity Framework Core support eager loading of entities. if you are operating some lightweight data or fast-queries, then the eager loading would be suited for you.&lt;/p&gt;

&lt;p&gt;Most of the scenarios can fit this Eager Loading strategy.&lt;/p&gt;

&lt;h1 id=&quot;lazy-loading&quot;&gt;Lazy Loading&lt;/h1&gt;

&lt;p&gt;the Lazy Loading is the opposite of the Eager Loading, the Lazy Loading means the related entities are loaded transparently when the navigation property is accessed. in other words, in the underlying of Entity Framework, the Lazy Loading would run separate SQL queries.&lt;/p&gt;

&lt;p&gt;In the blowing scenario, the Lazy Loading would be a no sense option.  you have many books, each book has navigation properties like author, reviewer, editor. you are iterating books to access these navigation properties. Lazy Loading is going to degrade the performance because books are small lightweight data. for example, if you have 5 thousand books, each iteration will access 3 navigation properties, then you are going to execute 15 thousand separate SQL queries. it would be a disaster!&lt;/p&gt;

&lt;p&gt;Actually. The Lazy Loading was added on .NET Core 2.1, it’s not a wise choice for most scenarios. but if you have a member that could be costly to load, and this member is infrequently visited, for scenarios like this, it would be a good choice to use Lazy Loading.&lt;/p&gt;

&lt;h1 id=&quot;explicit-loading&quot;&gt;Explicit Loading&lt;/h1&gt;

&lt;p&gt;Explicit loading is valid in EF 6 and EF Core both.  Explicit loading is similar to lazy loading, except that: you explicitly retrieve the related data in code; it doesn’t happen automatically when you access a navigation property.  in other words, Related entities are only loaded when you say “Load!”,&lt;/p&gt;

&lt;p&gt;So, if you are figuring how to avoid relation entities instantly load in Lazy Loading, you can disable Lazy Loading as an option, or you can use Explicit Loading.&lt;/p&gt;

&lt;p&gt;The Explicit Loading is typically more efficient when you need the related data for all retrieved rows of the primary table. Explicit Loading would be a good practice to reduce further SQL queries.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/"/>
   <updated>2020-03-21T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;we have known how to use Eager Loading, Explicit Loading and Lazy Loading in the previous three posts. I am going to dig into what’s the advantages and disadvantages of those methods.&lt;/p&gt;

&lt;h1 id=&quot;eager-loading&quot;&gt;Eager Loading&lt;/h1&gt;

&lt;p&gt;Eager Loading means that the related data will load from the database as the initial query.  in other words, Eager Loading can save your time from avoid executing additional SQL queries.&lt;/p&gt;

&lt;p&gt;both Entity Framework 6 and Entity Framework Core support eager loading of entities. if you are operating some lightweight data or fast-queries, then the eager loading would be suited for you.&lt;/p&gt;

&lt;p&gt;Most of the scenarios can fit this Eager Loading strategy.&lt;/p&gt;

&lt;h1 id=&quot;lazy-loading&quot;&gt;Lazy Loading&lt;/h1&gt;

&lt;p&gt;the Lazy Loading is the opposite of the Eager Loading, the Lazy Loading means the related entities are loaded transparently when the navigation property is accessed. in other words, in the underlying of Entity Framework, the Lazy Loading would run separate SQL queries.&lt;/p&gt;

&lt;p&gt;In the blowing scenario, the Lazy Loading would be a no sense option.  you have many books, each book has navigation properties like author, reviewer, editor. you are iterating books to access these navigation properties. Lazy Loading is going to degrade the performance because books are small lightweight data. for example, if you have 5 thousand books, each iteration will access 3 navigation properties, then you are going to execute 15 thousand separate SQL queries. it would be a disaster!&lt;/p&gt;

&lt;p&gt;Actually. The Lazy Loading was added on .NET Core 2.1, it’s not a wise choice for most scenarios. but if you have a member that could be costly to load, and this member is infrequently visited, for scenarios like this, it would be a good choice to use Lazy Loading.&lt;/p&gt;

&lt;h1 id=&quot;explicit-loading&quot;&gt;Explicit Loading&lt;/h1&gt;

&lt;p&gt;Explicit loading is valid in EF 6 and EF Core both.  Explicit loading is similar to lazy loading, except that: you explicitly retrieve the related data in code; it doesn’t happen automatically when you access a navigation property.  in other words, Related entities are only loaded when you say “Load!”,&lt;/p&gt;

&lt;p&gt;So, if you are figuring how to avoid relation entities instantly load in Lazy Loading, you can disable Lazy Loading as an option, or you can use Explicit Loading.&lt;/p&gt;

&lt;p&gt;The Explicit Loading is typically more efficient when you need the related data for all retrieved rows of the primary table. Explicit Loading would be a good practice to reduce further SQL queries.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Lazy Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/"/>
   <updated>2020-03-19T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/19/EF-Core-Lazy-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Lazy Loading&lt;/strong&gt; means that the related data is transparently loaded from the database when the navigation property is accessed.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/e889e3cfebe34bf823b0a69e942a629491611fde&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;how-to-implement-lazy-loading&quot;&gt;How to implement lazy loading&lt;/h1&gt;
&lt;p&gt;There have several ways to implement lazy loading. the simplest way is to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; package.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;First&lt;/strong&gt;, need to install &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; on &lt;em&gt;Nuget Package Manager&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-console highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;PM&amp;gt;&lt;/span&gt; Install-Package Microsoft.EntityFrameworkCore.Proxies
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Second&lt;/strong&gt;, enable lazy loading with a call to &lt;code class=&quot;highlighter-rouge&quot;&gt;UseLazyLoadingProxies&lt;/code&gt; in your &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;UseLazyLoadingProxies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Third&lt;/strong&gt;, make sure all entities are public, can be inherited from, the navigation property must be virtual, contractors are forbidden that all are private.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Fourth&lt;/strong&gt;, the conceptual of lazy loading is that the related entities will be transparently loaded from the database, so it is a separate SQL query operation. don’t release your &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt; instance, unless you make sure you don’t need it anymore.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//the lake has a Players navigation property&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//player is not loaded yet&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//Access the Player navigation property&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//Player is loaded during the access&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//but the Addresses is still not loaded , because we haven't accessed it yet.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//The Addresses navigation property is loaded, because  we have accessed it.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note:&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;UseLazyLoadingProxies&lt;/code&gt; requires all entity types to be public, unsealed, have virtual navigation properties, and have a public or protected constructor&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;we have known that use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; can complete the lazy loading easily.&lt;/p&gt;

&lt;p&gt;But, if we do not want to use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; package or any other packages. Does there exist a way to complete this? The answer is yes absolutely. The &lt;code class=&quot;highlighter-rouge&quot;&gt;proxies&lt;/code&gt; package works by injecting the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; service into an entity. so we can define our &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; service in our entities by ourself.&lt;/p&gt;

&lt;p&gt;Writing ourselves &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; is still depending on the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Abstractions&lt;/code&gt; package.  However, if you don’t want to depend on any other packages, it’s possible to avoid any depending packages by using a delegate. Here I won’t go into it.&lt;/p&gt;

&lt;h1 id=&quot;visual-studio-debugger-itsel-access-the-navigation-property&quot;&gt;Visual Studio Debugger itsel access the navigation property&lt;/h1&gt;
&lt;p&gt;if you are using Visual Studio, and trying to debug the program, you may found out the related entities have been loaded automatically. This is because the &lt;strong&gt;Visual Studio Debugger&lt;/strong&gt; will try to access the navigation property, so it will trigger the automatic loading mechanism.&lt;/p&gt;

&lt;p&gt;So, Even though the code is not run to the navigation access place, but you still can find the related entities have loaded from the debug window.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Lazy Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/"/>
   <updated>2020-03-19T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/19/EF-Core-Lazy-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Lazy Loading&lt;/strong&gt; means that the related data is transparently loaded from the database when the navigation property is accessed.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/e889e3cfebe34bf823b0a69e942a629491611fde&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;how-to-implement-lazy-loading&quot;&gt;How to implement lazy loading&lt;/h1&gt;
&lt;p&gt;There have several ways to implement lazy loading. the simplest way is to use &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; package.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;First&lt;/strong&gt;, need to install &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; on &lt;em&gt;Nuget Package Manager&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-console highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;PM&amp;gt;&lt;/span&gt; Install-Package Microsoft.EntityFrameworkCore.Proxies
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Second&lt;/strong&gt;, enable lazy loading with a call to &lt;code class=&quot;highlighter-rouge&quot;&gt;UseLazyLoadingProxies&lt;/code&gt; in your &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;UseLazyLoadingProxies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=SchoolDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Third&lt;/strong&gt;, make sure all entities are public, can be inherited from, the navigation property must be virtual, contractors are forbidden that all are private.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Fourth&lt;/strong&gt;, the conceptual of lazy loading is that the related entities will be transparently loaded from the database, so it is a separate SQL query operation. don’t release your &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt; instance, unless you make sure you don’t need it anymore.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//the lake has a Players navigation property&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//player is not loaded yet&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//Access the Player navigation property&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//Player is loaded during the access&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//but the Addresses is still not loaded , because we haven't accessed it yet.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//The Addresses navigation property is loaded, because  we have accessed it.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note:&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;UseLazyLoadingProxies&lt;/code&gt; requires all entity types to be public, unsealed, have virtual navigation properties, and have a public or protected constructor&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;we have known that use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; can complete the lazy loading easily.&lt;/p&gt;

&lt;p&gt;But, if we do not want to use the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Proxies&lt;/code&gt; package or any other packages. Does there exist a way to complete this? The answer is yes absolutely. The &lt;code class=&quot;highlighter-rouge&quot;&gt;proxies&lt;/code&gt; package works by injecting the &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; service into an entity. so we can define our &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; service in our entities by ourself.&lt;/p&gt;

&lt;p&gt;Writing ourselves &lt;code class=&quot;highlighter-rouge&quot;&gt;ILazyLoading&lt;/code&gt; is still depending on the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Abstractions&lt;/code&gt; package.  However, if you don’t want to depend on any other packages, it’s possible to avoid any depending packages by using a delegate. Here I won’t go into it.&lt;/p&gt;

&lt;h1 id=&quot;visual-studio-debugger-itsel-access-the-navigation-property&quot;&gt;Visual Studio Debugger itsel access the navigation property&lt;/h1&gt;
&lt;p&gt;if you are using Visual Studio, and trying to debug the program, you may found out the related entities have been loaded automatically. This is because the &lt;strong&gt;Visual Studio Debugger&lt;/strong&gt; will try to access the navigation property, so it will trigger the automatic loading mechanism.&lt;/p&gt;

&lt;p&gt;So, Even though the code is not run to the navigation access place, but you still can find the related entities have loaded from the debug window.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Explicit Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/"/>
   <updated>2020-03-06T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/06/EF-Core-Explicit-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Explicit Loading&lt;/strong&gt; means that related entities are explicitly loaded from the database at a later time.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/921b247932ec61bf7a10d4392413e4f377652c97&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;lake&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefaultAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//The lake.Players is a collection navigation property, which should use the Collection method.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LoadAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//load collection navigation property Address for each player &lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LoadAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, the  &lt;code class=&quot;highlighter-rouge&quot;&gt;await context.Entry(lake_team).Collection(lake=&amp;gt;lake.Players).LoadAsync()&lt;/code&gt; loads the  &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; entities, the  &lt;code class=&quot;highlighter-rouge&quot;&gt;Collection&lt;/code&gt; method provides access to tracking and loading information for a collection navigation property that associates this entity to a collection of another entites. The &lt;code class=&quot;highlighter-rouge&quot;&gt;LoadAsync&lt;/code&gt; method executes the SQL query and fill up the specified reference property or collection property in the memory, all of these complete asynchronously.&lt;/p&gt;

&lt;p&gt;As we have known. The  &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Addresses&lt;/code&gt; are all collection property. one Team has many players, and one player has many homes. their structures defined as below:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The opposite of the collection property is the reference property. The collection property is the to-many relationship, but the reference property is the to-one relationship.&lt;/p&gt;

&lt;p&gt;for example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//class School{&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//   public string SchoolName{set;get;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//   public string loc{set;get;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;School&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt; only belongs to one school, so the &lt;code class=&quot;highlighter-rouge&quot;&gt;school&lt;/code&gt; is a reference property.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Reference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;school&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;query&quot;&gt;Query()&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Collection()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;Referece()&lt;/code&gt; methods return a &lt;code class=&quot;highlighter-rouge&quot;&gt;CollectionEntry&lt;/code&gt; object or a &lt;code class=&quot;highlighter-rouge&quot;&gt;ReferenceEntry&lt;/code&gt; object, both objects expose change tracking information. and they are not &lt;code class=&quot;highlighter-rouge&quot;&gt;IQueryable&lt;/code&gt; instances, So we can’t continue to write further LINQ queries to filter out related data after these methods.&lt;/p&gt;

&lt;p&gt;How we can do it? luckily, we have &lt;code class=&quot;highlighter-rouge&quot;&gt;Query()&lt;/code&gt; method which can offer us to write further queries.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe Bean Bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Explicit Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/"/>
   <updated>2020-03-06T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/06/EF-Core-Explicit-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;&lt;strong&gt;Explicit Loading&lt;/strong&gt; means that related entities are explicitly loaded from the database at a later time.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/921b247932ec61bf7a10d4392413e4f377652c97&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;lake&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;FirstOrDefaultAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//The lake.Players is a collection navigation property, which should use the Collection method.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LoadAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//load collection navigation property Address for each player &lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;LoadAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the above example, the  &lt;code class=&quot;highlighter-rouge&quot;&gt;await context.Entry(lake_team).Collection(lake=&amp;gt;lake.Players).LoadAsync()&lt;/code&gt; loads the  &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; entities, the  &lt;code class=&quot;highlighter-rouge&quot;&gt;Collection&lt;/code&gt; method provides access to tracking and loading information for a collection navigation property that associates this entity to a collection of another entites. The &lt;code class=&quot;highlighter-rouge&quot;&gt;LoadAsync&lt;/code&gt; method executes the SQL query and fill up the specified reference property or collection property in the memory, all of these complete asynchronously.&lt;/p&gt;

&lt;p&gt;As we have known. The  &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Addresses&lt;/code&gt; are all collection property. one Team has many players, and one player has many homes. their structures defined as below:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HomeAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addresses&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The opposite of the collection property is the reference property. The collection property is the to-many relationship, but the reference property is the to-one relationship.&lt;/p&gt;

&lt;p&gt;for example:&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//class School{&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//   public string SchoolName{set;get;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//   public string loc{set;get;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;School&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt; only belongs to one school, so the &lt;code class=&quot;highlighter-rouge&quot;&gt;school&lt;/code&gt; is a reference property.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Reference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;school&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;query&quot;&gt;Query()&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;Collection()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;Referece()&lt;/code&gt; methods return a &lt;code class=&quot;highlighter-rouge&quot;&gt;CollectionEntry&lt;/code&gt; object or a &lt;code class=&quot;highlighter-rouge&quot;&gt;ReferenceEntry&lt;/code&gt; object, both objects expose change tracking information. and they are not &lt;code class=&quot;highlighter-rouge&quot;&gt;IQueryable&lt;/code&gt; instances, So we can’t continue to write further LINQ queries to filter out related data after these methods.&lt;/p&gt;

&lt;p&gt;How we can do it? luckily, we have &lt;code class=&quot;highlighter-rouge&quot;&gt;Query()&lt;/code&gt; method which can offer us to write further queries.&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake_team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe Bean Bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Eager Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/03/EF-Core-Eager-Loading/"/>
   <updated>2020-03-03T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/03/EF-Core-Eager-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;I supposed that you had known &lt;strong&gt;Eager Loading&lt;/strong&gt; means that related entities are loaded as part of the initial query.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/b2d33ad3f6f19e06b20afeb68218798c7f2f9f08&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;use &lt;code class=&quot;highlighter-rouge&quot;&gt;Include&lt;/code&gt; method or &lt;code class=&quot;highlighter-rouge&quot;&gt;ThenInclude&lt;/code&gt; method to complete an eager loading. the &lt;code class=&quot;highlighter-rouge&quot;&gt;Include&lt;/code&gt; method can specify what navigation property you want to include.  the &lt;code class=&quot;highlighter-rouge&quot;&gt;ThenInclude&lt;/code&gt; can allow you to continue including further levels of related entities.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadTeamsAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ThenInclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;ToListAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Caution&lt;/strong&gt;:&lt;/p&gt;

  &lt;p&gt;Since version 3.0.0(.net core 3.0.0), each Include will cause an additional JOIN to be added to SQL queries produced by relational providers, whereas previous versions generated additional SQL queries. This can significantly change the performance of your queries, for better or worse. In particular, LINQ queries with an exceedingly high number of Include operators may need to be broken down into multiple separate LINQ queries in order to avoid the cartesian explosion problem.&lt;/p&gt;
&lt;/blockquote&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Eager Loading</title>
   <link href="http://localhost:4000/csharp-ef/2020/03/03/EF-Core-Eager-Loading/"/>
   <updated>2020-03-03T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/03/03/EF-Core-Eager-Loading</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;navi-link&quot;&gt;query&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;I supposed that you had known &lt;strong&gt;Eager Loading&lt;/strong&gt; means that related entities are loaded as part of the initial query.&lt;/p&gt;

&lt;p&gt;This project can be found in &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/b2d33ad3f6f19e06b20afeb68218798c7f2f9f08&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;use &lt;code class=&quot;highlighter-rouge&quot;&gt;Include&lt;/code&gt; method or &lt;code class=&quot;highlighter-rouge&quot;&gt;ThenInclude&lt;/code&gt; method to complete an eager loading. the &lt;code class=&quot;highlighter-rouge&quot;&gt;Include&lt;/code&gt; method can specify what navigation property you want to include.  the &lt;code class=&quot;highlighter-rouge&quot;&gt;ThenInclude&lt;/code&gt; can allow you to continue including further levels of related entities.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadTeamsAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;ThenInclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addresses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;ToListAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Caution&lt;/strong&gt;:&lt;/p&gt;

  &lt;p&gt;Since version 3.0.0(.net core 3.0.0), each Include will cause an additional JOIN to be added to SQL queries produced by relational providers, whereas previous versions generated additional SQL queries. This can significantly change the performance of your queries, for better or worse. In particular, LINQ queries with an exceedingly high number of Include operators may need to be broken down into multiple separate LINQ queries in order to avoid the cartesian explosion problem.&lt;/p&gt;
&lt;/blockquote&gt;

</content>
 </entry>
 
 <entry>
   <title>Entity Framework Tutorial</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/"/>
   <updated>2020-02-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial</id>
   <content type="html">&lt;blockquote&gt;
  &lt;p&gt;Entity Framework is an object-relational mapper (O/RM) that enables .NET developers to work with a database using .NET objects. It eliminates the need for most of the data-access code that developers usually need to write.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/&quot; class=&quot;item-link&quot;&gt;Tutorial: Explore EF Core Console Application&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/&quot; class=&quot;item-link&quot;&gt;Tutorial: Explore EF Core Console Application&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;item-link&quot;&gt;EF Core Load Related Entities&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;item-link&quot;&gt;EF Core Load Related Entities&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;item-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;item-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/Raw-Sql-Operation/&quot; class=&quot;item-link&quot;&gt;Execute Raw SQL&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/Raw-Sql-Operation/&quot; class=&quot;item-link&quot;&gt;Execute Raw SQL&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/From-Existing-Database/&quot; class=&quot;item-link&quot;&gt;From Existing Database&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/From-Existing-Database/&quot; class=&quot;item-link&quot;&gt;From Existing Database&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>Entity Framework Tutorial</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/"/>
   <updated>2020-02-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial</id>
   <content type="html">&lt;blockquote&gt;
  &lt;p&gt;Entity Framework is an object-relational mapper (O/RM) that enables .NET developers to work with a database using .NET objects. It eliminates the need for most of the data-access code that developers usually need to write.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/&quot; class=&quot;item-link&quot;&gt;Tutorial: Explore EF Core Console Application&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/&quot; class=&quot;item-link&quot;&gt;Tutorial: Explore EF Core Console Application&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;item-link&quot;&gt;EF Core Load Related Entities&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/&quot; class=&quot;item-link&quot;&gt;EF Core Load Related Entities&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/29/Data-Annotations-Attributes/&quot; class=&quot;item-link&quot;&gt;Data Annotations Attributes&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;item-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/14/Fluent-API-Introduction/&quot; class=&quot;item-link&quot;&gt;Fluent API Tutorial&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/Raw-Sql-Operation/&quot; class=&quot;item-link&quot;&gt;Execute Raw SQL&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/Raw-Sql-Operation/&quot; class=&quot;item-link&quot;&gt;Execute Raw SQL&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/From-Existing-Database/&quot; class=&quot;item-link&quot;&gt;From Existing Database&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/04/24/From-Existing-Database/&quot; class=&quot;item-link&quot;&gt;From Existing Database&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;
</content>
 </entry>
 
 <entry>
   <title>EF Core Load Related Entities</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/"/>
   <updated>2020-02-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Entity Framework Core allows you to use navigation properties in your model to load related entities. There are three common ORM patterns used to load related entities. They are Eager Loader, Explicit Loading, Lazying Loading. Those loading methods have different performance. I am going to dig into it in this article.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Eager Loading&lt;/strong&gt; means that related entities are loaded from the database as part of the initial query.
&lt;strong&gt;Explicit Loading&lt;/strong&gt; means that related entities are explicitly loaded from the database at a later time.
&lt;strong&gt;Lazy Loading&lt;/strong&gt; means that related entities are transparently loaded from the database when the navigation property is accessed.  Lazy Loading was introduced in EF Core 2.1 as a new feature.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/03/EF-Core-Eager-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Eager Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/03/EF-Core-Eager-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Eager Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Explicit Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Explicit Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>EF Core Load Related Entities</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities/"/>
   <updated>2020-02-28T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/28/EF-Core-Load-Related-Entities</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;p&gt;Entity Framework Core allows you to use navigation properties in your model to load related entities. There are three common ORM patterns used to load related entities. They are Eager Loader, Explicit Loading, Lazying Loading. Those loading methods have different performance. I am going to dig into it in this article.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Eager Loading&lt;/strong&gt; means that related entities are loaded from the database as part of the initial query.
&lt;strong&gt;Explicit Loading&lt;/strong&gt; means that related entities are explicitly loaded from the database at a later time.
&lt;strong&gt;Lazy Loading&lt;/strong&gt; means that related entities are transparently loaded from the database when the navigation property is accessed.  Lazy Loading was introduced in EF Core 2.1 as a new feature.&lt;/p&gt;

&lt;!--items--&gt;
&lt;div&gt;
&lt;span style=&quot;color: green;&quot;&gt;In this article:&lt;/span&gt;
&lt;ul&gt;
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/03/EF-Core-Eager-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Eager Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/03/EF-Core-Eager-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Eager Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Explicit Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/06/EF-Core-Explicit-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Explicit Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/19/EF-Core-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;EF Core Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
      
                &lt;li&gt;&lt;a href=&quot;/csharp-ef/2020/03/21/Analysis-of-advantage-and-disadvantage-of-Eager-Explicit-Lazy-Loading/&quot; class=&quot;item-link&quot;&gt;Analysis of advantage and disadvantage of Eager Loading, Explicit Loading, Lazy Loading&lt;/a&gt;&lt;/li&gt;
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--items--&gt;

</content>
 </entry>
 
 <entry>
   <title>Tutorial: Explore EF Core Console Application</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/"/>
   <updated>2020-02-25T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;whats-the-difference-between-ef6-and-ef-core&quot;&gt;What’s the difference between EF6 and EF Core?&lt;/h1&gt;
&lt;p&gt;Both EF6(Entity Framework 6) and EF Core(Entity Framework Core) are object-relational mappers. EF Core is a more modern, lightweight and extensible version of Entity Framework that has very similar capabilities and benefits to EF6. EF Core is a complete rewrite and contains many new features that not include in EF6.  &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/efcore-and-ef6/index&quot;&gt;Here&lt;/a&gt; examined the many differences.&lt;/p&gt;

&lt;h1 id=&quot;install-entity-framework-core&quot;&gt;Install Entity Framework Core&lt;/h1&gt;
&lt;p&gt;Here you will learn how to use EF Core with .NET Core Console Application step by step. To demonstrate this, we will create a .NET Core Console Application using Visual Studio 2017 (or greater).&lt;/p&gt;

&lt;p&gt;it’s very convenient to create a .NET Core Console Application. I had already created a .NET Core Console Application.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Open &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;NuGet Package Manager&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;Manage Nuget Package For Solution&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Search for &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.SqlServer&lt;/code&gt;, then install it.&lt;/p&gt;

&lt;p&gt;The EF Core supports many database engines. see &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/providers/index?tabs=vs&quot;&gt;Database Provider&lt;/a&gt; for details. I am using SQL Server as my database, So I installed the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.SqlServer&lt;/code&gt; package. And I also need to install the &lt;em&gt;Entity Framework Core Tools&lt;/em&gt; for the NuGet Package Console in Visual Studio. Search for &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Tools&lt;/code&gt; in &lt;em&gt;NuGet Package For Solution&lt;/em&gt; dialogue and install it.&lt;/p&gt;

&lt;h1 id=&quot;create-the-model&quot;&gt;Create The Model&lt;/h1&gt;
&lt;p&gt;Entity Framework Core needs to have a model(Entity Data Model) to communicate with the underlying database.&lt;/p&gt;

&lt;p&gt;The EF model has three parts: conceptual model, storage model and mappings between the conceptual and storage model. EF Core builds the conceptual model based on your domain classes(entity classes), configurations, annotations.  EF Core builds the storage model and mappings based on the provider you use.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;EFCoreProject.Model&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//context class SchoolContext&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=EFCoreDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//entity class Team&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is too long&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//entity class Player&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is too long&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see in the snippet. I created two entity classes (domain classes): &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Key]&lt;/code&gt; annotation represents to denote this property uniquely identifies this entity. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Required]&lt;/code&gt; annotation represents this field is required. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[MaxLength]&lt;/code&gt; annotation specifies the maximum length of array or string data. these annotations come from 
&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.dataannotations?redirectedfrom=MSDN&amp;amp;view=netframework-4.8&quot;&gt;System.ComponentModel.DataAnnotations&lt;/a&gt; namespace.&lt;/p&gt;

&lt;p&gt;we also created a &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; class, which is driving from &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt;. &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; has two &lt;code class=&quot;highlighter-rouge&quot;&gt;DbSet&amp;lt;TEntity&amp;gt;&lt;/code&gt; properties, for &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; type, which will be mapped to &lt;code class=&quot;highlighter-rouge&quot;&gt;teams&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;players&lt;/code&gt; tables in the underlying database. the &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; also overrides the &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method. the &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method used to specify which database to use.&lt;/p&gt;

&lt;h1 id=&quot;adding-a-migration&quot;&gt;Adding A Migration&lt;/h1&gt;
&lt;p&gt;EF Core includes different methods to update or create migrations. we can execute migration command on &lt;em&gt;NuGet Package Manage Console&lt;/em&gt; or &lt;em&gt;CLI(command-line interface)&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;my environment is Visual Studio, open &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;NuGet Package Manager&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;Package Manager Console&lt;/code&gt;. enter the following command:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; add-migration CreateSchoolDB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Migrations&lt;/code&gt; folder in the project and create the &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelSnapshot&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;if want to undo this action, use command &lt;code class=&quot;highlighter-rouge&quot;&gt;Remove-Migration&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;After creating a migration, we still need to sync the effects to the database with an &lt;code class=&quot;highlighter-rouge&quot;&gt;update-migration&lt;/code&gt; command, as below.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; update-database
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Each time when we made changes to the entity class, we also need to sync the effect to the database using &lt;code class=&quot;highlighter-rouge&quot;&gt;add-migration&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;update-database&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;crud-create-read-update-delete&quot;&gt;CRUD (Create, Read, Update, Delete)&lt;/h1&gt;
&lt;p&gt;Now we can use the context class to save, retrieve, modify and remove data, as shown below:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Insert data:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team_lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;lake&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;O`Neal&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Nash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team_warrior&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;warrior&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Curry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Thompson&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Green&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team_lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team_warrior&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Update data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                
         &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe Bean Bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Delete data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Green&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Query data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//with an eager loading by using Microsoft.EntityFrameworkCore.Include,it's not wise.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//but we only use it to demonstrate this demo.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;team name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;players name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;You had learned how to run a basic EF Core program.I had put those code in Github &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/b1e4c8a75245f4bd569b8c0b7cca586523db96f4&quot;&gt;C# EF Core Console Application&lt;/a&gt;. In the next chapter, I will get deeper. Because of the Coronavirus, I have much more time to write articles.^^ Have a good day! See you in the next chapter.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Tutorial: Explore EF Core Console Application</title>
   <link href="http://localhost:4000/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application/"/>
   <updated>2020-02-25T10:01:01+08:00</updated>
   <id>http://localhost:4000/csharp-ef/2020/02/25/Tutorial-Explore-EF-Core-Console-Application</id>
   <content type="html">&lt;!--navigation bar--&gt;
&lt;div class=&quot;navi-link-container&quot;&gt;
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
      
          &lt;a href=&quot;/csharp-ef/2020/02/28/Entitiy-Framework-Tutorial/&quot; class=&quot;navi-link&quot;&gt;EF&lt;/a&gt;
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
&lt;a class=&quot;navi-link&quot;&gt;&lt;/a&gt;&lt;/div&gt;
&lt;!--navigation bar--&gt;

&lt;h1 id=&quot;whats-the-difference-between-ef6-and-ef-core&quot;&gt;What’s the difference between EF6 and EF Core?&lt;/h1&gt;
&lt;p&gt;Both EF6(Entity Framework 6) and EF Core(Entity Framework Core) are object-relational mappers. EF Core is a more modern, lightweight and extensible version of Entity Framework that has very similar capabilities and benefits to EF6. EF Core is a complete rewrite and contains many new features that not include in EF6.  &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/efcore-and-ef6/index&quot;&gt;Here&lt;/a&gt; examined the many differences.&lt;/p&gt;

&lt;h1 id=&quot;install-entity-framework-core&quot;&gt;Install Entity Framework Core&lt;/h1&gt;
&lt;p&gt;Here you will learn how to use EF Core with .NET Core Console Application step by step. To demonstrate this, we will create a .NET Core Console Application using Visual Studio 2017 (or greater).&lt;/p&gt;

&lt;p&gt;it’s very convenient to create a .NET Core Console Application. I had already created a .NET Core Console Application.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Open &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;NuGet Package Manager&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;Manage Nuget Package For Solution&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Search for &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.SqlServer&lt;/code&gt;, then install it.&lt;/p&gt;

&lt;p&gt;The EF Core supports many database engines. see &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/providers/index?tabs=vs&quot;&gt;Database Provider&lt;/a&gt; for details. I am using SQL Server as my database, So I installed the &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.SqlServer&lt;/code&gt; package. And I also need to install the &lt;em&gt;Entity Framework Core Tools&lt;/em&gt; for the NuGet Package Console in Visual Studio. Search for &lt;code class=&quot;highlighter-rouge&quot;&gt;Microsoft.EntityFrameworkCore.Tools&lt;/code&gt; in &lt;em&gt;NuGet Package For Solution&lt;/em&gt; dialogue and install it.&lt;/p&gt;

&lt;h1 id=&quot;create-the-model&quot;&gt;Create The Model&lt;/h1&gt;
&lt;p&gt;Entity Framework Core needs to have a model(Entity Data Model) to communicate with the underlying database.&lt;/p&gt;

&lt;p&gt;The EF model has three parts: conceptual model, storage model and mappings between the conceptual and storage model. EF Core builds the conceptual model based on your domain classes(entity classes), configurations, annotations.  EF Core builds the storage model and mappings based on the provider you use.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;EFCoreProject.Model&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//context class SchoolContext&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SchoolContext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbContext&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DbSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OnConfiguring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DbContextOptionsBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;optionsBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;UseSqlServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Server=.;Database=EFCoreDb;Trusted_Connection=True;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//entity class Team&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is too long&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//entity class Player&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Player&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;MaxLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ErrorMessage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;name is too long&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see in the snippet. I created two entity classes (domain classes): &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Key]&lt;/code&gt; annotation represents to denote this property uniquely identifies this entity. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[Required]&lt;/code&gt; annotation represents this field is required. the &lt;code class=&quot;highlighter-rouge&quot;&gt;[MaxLength]&lt;/code&gt; annotation specifies the maximum length of array or string data. these annotations come from 
&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.dataannotations?redirectedfrom=MSDN&amp;amp;view=netframework-4.8&quot;&gt;System.ComponentModel.DataAnnotations&lt;/a&gt; namespace.&lt;/p&gt;

&lt;p&gt;we also created a &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; class, which is driving from &lt;code class=&quot;highlighter-rouge&quot;&gt;DbContext&lt;/code&gt;. &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; has two &lt;code class=&quot;highlighter-rouge&quot;&gt;DbSet&amp;lt;TEntity&amp;gt;&lt;/code&gt; properties, for &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Player&lt;/code&gt; type, which will be mapped to &lt;code class=&quot;highlighter-rouge&quot;&gt;teams&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;players&lt;/code&gt; tables in the underlying database. the &lt;code class=&quot;highlighter-rouge&quot;&gt;SchoolContext&lt;/code&gt; also overrides the &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method. the &lt;code class=&quot;highlighter-rouge&quot;&gt;OnConfiguring&lt;/code&gt; method used to specify which database to use.&lt;/p&gt;

&lt;h1 id=&quot;adding-a-migration&quot;&gt;Adding A Migration&lt;/h1&gt;
&lt;p&gt;EF Core includes different methods to update or create migrations. we can execute migration command on &lt;em&gt;NuGet Package Manage Console&lt;/em&gt; or &lt;em&gt;CLI(command-line interface)&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;my environment is Visual Studio, open &lt;code class=&quot;highlighter-rouge&quot;&gt;Tools&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;NuGet Package Manager&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;Package Manager Console&lt;/code&gt;. enter the following command:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; add-migration CreateSchoolDB
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will create a &lt;code class=&quot;highlighter-rouge&quot;&gt;Migrations&lt;/code&gt; folder in the project and create the &lt;code class=&quot;highlighter-rouge&quot;&gt;ModelSnapshot&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/blog/public/img/2020-02-25-Tutorial-Explore-EF-Core-Console-Application-c.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;if want to undo this action, use command &lt;code class=&quot;highlighter-rouge&quot;&gt;Remove-Migration&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;After creating a migration, we still need to sync the effects to the database with an &lt;code class=&quot;highlighter-rouge&quot;&gt;update-migration&lt;/code&gt; command, as below.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PM&amp;gt; update-database
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Each time when we made changes to the entity class, we also need to sync the effect to the database using &lt;code class=&quot;highlighter-rouge&quot;&gt;add-migration&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;update-database&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;crud-create-read-update-delete&quot;&gt;CRUD (Create, Read, Update, Delete)&lt;/h1&gt;
&lt;p&gt;Now we can use the context class to save, retrieve, modify and remove data, as shown below:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Insert data:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team_lake&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;lake&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;O`Neal&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Nash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team_warrior&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;warrior&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;players&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Curry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Thompson&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Green&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team_lake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team_warrior&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Update data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;                
         &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Kobe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Kobe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Kobe Bean Bryant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Delete data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Green&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;FirstOrDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SaveChanges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Query data:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;SchoolContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//with an eager loading by using Microsoft.EntityFrameworkCore.Include,it's not wise.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//but we only use it to demonstrate this demo.&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;ToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;team name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;players&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;players name:{0}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;player&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;You had learned how to run a basic EF Core program.I had put those code in Github &lt;a href=&quot;https://github.com/voltwu/C-Sharp-Console-Application-EF-Core-Example/tree/b1e4c8a75245f4bd569b8c0b7cca586523db96f4&quot;&gt;C# EF Core Console Application&lt;/a&gt;. In the next chapter, I will get deeper. Because of the Coronavirus, I have much more time to write articles.^^ Have a good day! See you in the next chapter.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Verification Code Recognition With Tesseract OCR</title>
   <link href="http://localhost:4000/2019/12/08/Verification-Code-Recognition-With-Tesseract-OCR/"/>
   <updated>2019-12-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/12/08/Verification-Code-Recognition-With-Tesseract-OCR</id>
   <content type="html">&lt;p&gt;Optical character recognition or optical character reader(OCR) is very popular today. OCR is the electrical or mechanical conversion of images of typed, handwritten or printed text into machine_encoded text. And OCR is the field of pattern recognition, artificial intelligence, and computer vision.&lt;/p&gt;

&lt;p&gt;Tesseract is an optical character recognition engine, it’s free software. and the development has been sponsored by google by 2006. more information can be found in &lt;a href=&quot;https://github.com/tesseract-ocr/tesseract&quot;&gt;tesseract ocr&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The general idea of verification code recognition is:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;picture noise reduction&lt;/li&gt;
  &lt;li&gt;recognize image verification code&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I prepared a very simple verification code image&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-a.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;picture-noise-reduction&quot;&gt;Picture Noise Reduction&lt;/h1&gt;
&lt;h2 id=&quot;import-the-image-package-and-open-the-image&quot;&gt;Import The Image Package And Open The Image&lt;/h2&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;im&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'56538.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;conver-the-image-into-grayscale-image&quot;&gt;Conver The Image Into Grayscale Image&lt;/h2&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;im&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'L'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;open-the-image-in-ps-watch-for-the-pixel-gradation&quot;&gt;Open The Image In PS, Watch For The Pixel Gradation&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Watch for the pixel gradation value between digits and background. As you can see from the example image. The pixel gradation percentage is getting bigger from the surrounding environment to digits. It’s the white, then the light gray, then the gray, then the dark gray, then the dark.&lt;/p&gt;

&lt;p&gt;We have to choose a pixel gradation value as a threshold that will be used in the next step.  I decide to choose 35% as the target pixel gradation percentage. because it almost can difference the text and the surrounding environment. so the target threshold is: 35% * 255 = 89.25&lt;/p&gt;

&lt;h2 id=&quot;dithering-the-image-with-custom-threshold&quot;&gt;Dithering The Image With Custom Threshold&lt;/h2&gt;
&lt;p&gt;Because this Image is simple, so we directly use binarization. set the gradation value greater than the threshold to 1, set the gradation value smaller than the threshold to 0.&lt;/p&gt;

&lt;p&gt;generate a lookup table and map it to the image with &lt;code class=&quot;highlighter-rouge&quot;&gt;point()&lt;/code&gt; function&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;89.25&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the output picture:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-c.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;pull-the-text-out-of-image&quot;&gt;Pull The Text Out Of Image&lt;/h1&gt;
&lt;p&gt;There are a lot of OCR engines. Here I use the Tesseract Ocr Engine that development by google.&lt;/p&gt;

&lt;p&gt;save the image with noise deducted&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'out_img.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;command-prompt&quot;&gt;Command Prompt&lt;/h2&gt;
&lt;p&gt;tesseract can be installed in many ways via binary package or build from source. &lt;a href=&quot;https://github.com/tesseract-ocr/tesseract&quot;&gt;Tesseract Ocr Github address&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;my operation system is windows 10. I download the &lt;code class=&quot;highlighter-rouge&quot;&gt;tesseract-Ocr-win64-setup-v5.0.0&lt;/code&gt; version.&lt;/p&gt;

&lt;p&gt;After installed, open the Command Prompt. input&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tesseract.exe out_img.jpg stdout --psm 7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the use &lt;code class=&quot;highlighter-rouge&quot;&gt;--psm&lt;/code&gt; specify the page segmentation mode. &lt;code class=&quot;highlighter-rouge&quot;&gt;7&lt;/code&gt; represent treat the image as a single text line.
Here is the recognition result&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;the output is perfect, It can recognition perfectly. There is a little strange symbol in the last line. It’s an error substitution symbol. we can ignore it.&lt;/p&gt;

&lt;h2 id=&quot;pytesseract&quot;&gt;Pytesseract&lt;/h2&gt;
&lt;p&gt;Python-tesseract is a python wrapper for Google’s tesseract-OCR. Tesseract is a third party library package. the installation and other usages see &lt;a href=&quot;https://pypi.org/project/pytesseract/&quot;&gt;pytesseract&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;check the version&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pytesseract&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_tesseract_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20191030&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After checked the version. can find more helpful information if you don’t clear on something. or input &lt;code class=&quot;highlighter-rouge&quot;&gt;tesseract --help&lt;/code&gt; after installing the same version executable.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pytesseract&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# If you don't have tesseract executable in your PATH, include the following&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tesseract_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;r'your tesseract executable location&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; custom_oem_psm_config = r'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oem&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;psm&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; image = Image.open('&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;')&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; pytesseract.image_to_string(image, config=custom_oem_psm_config)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;56538&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As we write before, the &lt;code class=&quot;highlighter-rouge&quot;&gt;--psm 7&lt;/code&gt; represent treat the image as a single text line. the &lt;code class=&quot;highlighter-rouge&quot;&gt;--oem&lt;/code&gt; specify the OCR Engine mode(such as Legacy or LSTM), the &lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt; is the default value, based on what mode is available.&lt;/p&gt;

&lt;p&gt;The Verification Code recognize successfully.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Verification Code Recognition With Tesseract OCR</title>
   <link href="http://localhost:4000/2019/12/08/Verification-Code-Recognition-With-Tesseract-OCR/"/>
   <updated>2019-12-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/12/08/Verification-Code-Recognition-With-Tesseract-OCR</id>
   <content type="html">&lt;p&gt;Optical character recognition or optical character reader(OCR) is very popular today. OCR is the electrical or mechanical conversion of images of typed, handwritten or printed text into machine_encoded text. And OCR is the field of pattern recognition, artificial intelligence, and computer vision.&lt;/p&gt;

&lt;p&gt;Tesseract is an optical character recognition engine, it’s free software. and the development has been sponsored by google by 2006. more information can be found in &lt;a href=&quot;https://github.com/tesseract-ocr/tesseract&quot;&gt;tesseract ocr&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The general idea of verification code recognition is:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;picture noise reduction&lt;/li&gt;
  &lt;li&gt;recognize image verification code&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I prepared a very simple verification code image&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-a.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;picture-noise-reduction&quot;&gt;Picture Noise Reduction&lt;/h1&gt;
&lt;h2 id=&quot;import-the-image-package-and-open-the-image&quot;&gt;Import The Image Package And Open The Image&lt;/h2&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;im&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'56538.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;conver-the-image-into-grayscale-image&quot;&gt;Conver The Image Into Grayscale Image&lt;/h2&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;im&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'L'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;open-the-image-in-ps-watch-for-the-pixel-gradation&quot;&gt;Open The Image In PS, Watch For The Pixel Gradation&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-b.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Watch for the pixel gradation value between digits and background. As you can see from the example image. The pixel gradation percentage is getting bigger from the surrounding environment to digits. It’s the white, then the light gray, then the gray, then the dark gray, then the dark.&lt;/p&gt;

&lt;p&gt;We have to choose a pixel gradation value as a threshold that will be used in the next step.  I decide to choose 35% as the target pixel gradation percentage. because it almost can difference the text and the surrounding environment. so the target threshold is: 35% * 255 = 89.25&lt;/p&gt;

&lt;h2 id=&quot;dithering-the-image-with-custom-threshold&quot;&gt;Dithering The Image With Custom Threshold&lt;/h2&gt;
&lt;p&gt;Because this Image is simple, so we directly use binarization. set the gradation value greater than the threshold to 1, set the gradation value smaller than the threshold to 0.&lt;/p&gt;

&lt;p&gt;generate a lookup table and map it to the image with &lt;code class=&quot;highlighter-rouge&quot;&gt;point()&lt;/code&gt; function&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;89.25&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gray_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lut&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the output picture:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-c.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;pull-the-text-out-of-image&quot;&gt;Pull The Text Out Of Image&lt;/h1&gt;
&lt;p&gt;There are a lot of OCR engines. Here I use the Tesseract Ocr Engine that development by google.&lt;/p&gt;

&lt;p&gt;save the image with noise deducted&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'out_img.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;command-prompt&quot;&gt;Command Prompt&lt;/h2&gt;
&lt;p&gt;tesseract can be installed in many ways via binary package or build from source. &lt;a href=&quot;https://github.com/tesseract-ocr/tesseract&quot;&gt;Tesseract Ocr Github address&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;my operation system is windows 10. I download the &lt;code class=&quot;highlighter-rouge&quot;&gt;tesseract-Ocr-win64-setup-v5.0.0&lt;/code&gt; version.&lt;/p&gt;

&lt;p&gt;After installed, open the Command Prompt. input&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tesseract.exe out_img.jpg stdout --psm 7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the use &lt;code class=&quot;highlighter-rouge&quot;&gt;--psm&lt;/code&gt; specify the page segmentation mode. &lt;code class=&quot;highlighter-rouge&quot;&gt;7&lt;/code&gt; represent treat the image as a single text line.
Here is the recognition result&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-12-08-Verification-Code-Recognition-With-Tesseract-OCR-d.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;the output is perfect, It can recognition perfectly. There is a little strange symbol in the last line. It’s an error substitution symbol. we can ignore it.&lt;/p&gt;

&lt;h2 id=&quot;pytesseract&quot;&gt;Pytesseract&lt;/h2&gt;
&lt;p&gt;Python-tesseract is a python wrapper for Google’s tesseract-OCR. Tesseract is a third party library package. the installation and other usages see &lt;a href=&quot;https://pypi.org/project/pytesseract/&quot;&gt;pytesseract&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;check the version&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pytesseract&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_tesseract_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20191030&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After checked the version. can find more helpful information if you don’t clear on something. or input &lt;code class=&quot;highlighter-rouge&quot;&gt;tesseract --help&lt;/code&gt; after installing the same version executable.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pytesseract&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# If you don't have tesseract executable in your PATH, include the following&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tesseract_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;r'your tesseract executable location&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; custom_oem_psm_config = r'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oem&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;psm&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; image = Image.open('&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out_img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jpg&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;')&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; pytesseract.image_to_string(image, config=custom_oem_psm_config)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;56538&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As we write before, the &lt;code class=&quot;highlighter-rouge&quot;&gt;--psm 7&lt;/code&gt; represent treat the image as a single text line. the &lt;code class=&quot;highlighter-rouge&quot;&gt;--oem&lt;/code&gt; specify the OCR Engine mode(such as Legacy or LSTM), the &lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt; is the default value, based on what mode is available.&lt;/p&gt;

&lt;p&gt;The Verification Code recognize successfully.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Running A CGI Web Server With http.server Module</title>
   <link href="http://localhost:4000/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module/"/>
   <updated>2019-10-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module</id>
   <content type="html">&lt;p&gt;In this article, I will use &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; that python’s build-in server module to demonstrate how to use cgi and explain what is cig. my environment is python3. Have a pleasant reading.&lt;/p&gt;
&lt;h1 id=&quot;what-is-cgi&quot;&gt;What is CGI&lt;/h1&gt;
&lt;p&gt;Common Gateway Interface(CGI) is a set of standard protocols to define how data exchanges between webserver and custom scripts.&lt;/p&gt;

&lt;p&gt;Let us think about this scenario:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;When a hyperlink requesting arrived at webserver. the server will parse the URL and demands(for example: a filename).&lt;/li&gt;
  &lt;li&gt;The server will look through the corresponding file and return the file content to the requesting client.&lt;/li&gt;
  &lt;li&gt;The requesting client display contents that webserver returned.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The above steps are the process for a static web page. However, the server can be configured to that the requested file in a specified directory does not be sent back, instead it’s executed as a program. and whatever the output of the program will be sent back to the browser client. this functionality is called Common Gateway Interface. Common Gateway Interface has laid a foundation for dynamical web pages.&lt;/p&gt;

&lt;p&gt;Common Gateway Interface Architecture Diagram&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-10-08-Running-A-CGI-Web-Server-With-http-server-Module-cgi-diagram.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;httpserver&quot;&gt;http.server&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module defines classes for implementing HTTP servers(web servers).&lt;/p&gt;

&lt;p&gt;According to official documents in python3.7, the &lt;code class=&quot;highlighter-rouge&quot;&gt;server_address&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;http_handler_class&lt;/code&gt; should be provided when starting up a webserver with &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module.&lt;/p&gt;

&lt;p&gt;Below is a simple example:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;http.server&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;socketserver&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BaseHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;server_address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;httpd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;serve_forever&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socketserver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TCPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SimpleHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Put the above contents into &lt;em&gt;index.py&lt;/em&gt; file. in the same directory of &lt;em&gt;index.py&lt;/em&gt; in command prompt, input the &lt;code class=&quot;highlighter-rouge&quot;&gt;python index.py&lt;/code&gt; and running. Then the webserver is starting up and serving files relative to the current directory.&lt;/p&gt;

&lt;p&gt;However, except starting from code, the server can also start from the command prompt. use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-m&lt;/code&gt; switch of the interpreter with a &lt;em&gt;port number&lt;/em&gt; argument.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The webserver serves files relative to the current directory.&lt;/p&gt;

&lt;p&gt;All of the above snippets are not relative to the Common Gateway Interface. By default, a lot of web servers do not boot the CGI functionality. the programmer must configure manually it to start. the python has provided the  &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server.CGIHTTPRequestHandler&lt;/code&gt;  class to handle only the CGI functionality.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#use the above run method&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGIHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And the &lt;code class=&quot;highlighter-rouge&quot;&gt;CGIHTTPRequestHandler&lt;/code&gt; can be enabled in the command line with &lt;code class=&quot;highlighter-rouge&quot;&gt;--cgi&lt;/code&gt; option.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;cgi-example&quot;&gt;CGI Example&lt;/h1&gt;
&lt;p&gt;In this chapter, we will demonstrate a simple example that will print “hello world”.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;First: create a CGI directory&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;create a directory &lt;em&gt;cgi-bin&lt;/em&gt; in &lt;em&gt;basepath&lt;/em&gt;. The directory name can be only &lt;em&gt;cgi-bin&lt;/em&gt; or &lt;em&gt;htbin&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Second: create a python script&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/python&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Import modules for CGI handling &lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cgi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cgitb&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;# Create instance of FieldStorage &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FieldStorage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;# Get data from fields&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'first_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'last_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-type:text/html&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;html&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;head&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;title&amp;gt;Hello&amp;lt;/title&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/head&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;body&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;h2&amp;gt;Hello World, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&amp;lt;/h2&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/body&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;put the above script into the &lt;em&gt;hello.py&lt;/em&gt; file in directory &lt;em&gt;basepath/cgi-bin&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Third: start-server&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;start the server in command prompt in directory &lt;em&gt;basepath&lt;/em&gt; with below commanding:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then access &lt;a href=&quot;http://localhost:8000/cgi-bin/hello.py?first_name=jame&amp;amp;last_name=curry&quot; title=&quot;link&quot;&gt;http://localhost:8000/cgi-bin/hello.py?first_name=jame&amp;amp;last_name=curry&lt;/a&gt; in the browser client.
&lt;img src=&quot;/public/img/2019-10-08-Running-A-CGI-Web-Server-With-http-server-Module-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;CGI is the Common Gateway Interface that defines the standard exchange format between webserver and custom scripts.&lt;/p&gt;

&lt;p&gt;With &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module, the programmer can build a web server quickly. a lot of web server does not boot up CGI functionality by default. In python, use the &lt;code class=&quot;highlighter-rouge&quot;&gt;CGIHTTPRequestHandler&lt;/code&gt; class to handle cig request or &lt;code class=&quot;highlighter-rouge&quot;&gt;-m&lt;/code&gt; switch of the interpreter in the command line. read more about http.server at &lt;a href=&quot;https://docs.python.org/3/library/http.server.html&quot;&gt;http.server library&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Okay, everything is settled up. Today is the first working day after the  7-day national holiday. Have a nice day at work!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Running A CGI Web Server With http.server Module</title>
   <link href="http://localhost:4000/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module/"/>
   <updated>2019-10-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/10/08/Running-A-CGI-Web-Server-With-http-server-Module</id>
   <content type="html">&lt;p&gt;In this article, I will use &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; that python’s build-in server module to demonstrate how to use cgi and explain what is cig. my environment is python3. Have a pleasant reading.&lt;/p&gt;
&lt;h1 id=&quot;what-is-cgi&quot;&gt;What is CGI&lt;/h1&gt;
&lt;p&gt;Common Gateway Interface(CGI) is a set of standard protocols to define how data exchanges between webserver and custom scripts.&lt;/p&gt;

&lt;p&gt;Let us think about this scenario:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;When a hyperlink requesting arrived at webserver. the server will parse the URL and demands(for example: a filename).&lt;/li&gt;
  &lt;li&gt;The server will look through the corresponding file and return the file content to the requesting client.&lt;/li&gt;
  &lt;li&gt;The requesting client display contents that webserver returned.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The above steps are the process for a static web page. However, the server can be configured to that the requested file in a specified directory does not be sent back, instead it’s executed as a program. and whatever the output of the program will be sent back to the browser client. this functionality is called Common Gateway Interface. Common Gateway Interface has laid a foundation for dynamical web pages.&lt;/p&gt;

&lt;p&gt;Common Gateway Interface Architecture Diagram&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/2019-10-08-Running-A-CGI-Web-Server-With-http-server-Module-cgi-diagram.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;httpserver&quot;&gt;http.server&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module defines classes for implementing HTTP servers(web servers).&lt;/p&gt;

&lt;p&gt;According to official documents in python3.7, the &lt;code class=&quot;highlighter-rouge&quot;&gt;server_address&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;http_handler_class&lt;/code&gt; should be provided when starting up a webserver with &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module.&lt;/p&gt;

&lt;p&gt;Below is a simple example:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;http.server&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;socketserver&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BaseHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;server_address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;httpd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;serve_forever&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;socketserver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TCPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SimpleHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Put the above contents into &lt;em&gt;index.py&lt;/em&gt; file. in the same directory of &lt;em&gt;index.py&lt;/em&gt; in command prompt, input the &lt;code class=&quot;highlighter-rouge&quot;&gt;python index.py&lt;/code&gt; and running. Then the webserver is starting up and serving files relative to the current directory.&lt;/p&gt;

&lt;p&gt;However, except starting from code, the server can also start from the command prompt. use the &lt;code class=&quot;highlighter-rouge&quot;&gt;-m&lt;/code&gt; switch of the interpreter with a &lt;em&gt;port number&lt;/em&gt; argument.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The webserver serves files relative to the current directory.&lt;/p&gt;

&lt;p&gt;All of the above snippets are not relative to the Common Gateway Interface. By default, a lot of web servers do not boot the CGI functionality. the programmer must configure manually it to start. the python has provided the  &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server.CGIHTTPRequestHandler&lt;/code&gt;  class to handle only the CGI functionality.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#use the above run method&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGIHTTPRequestHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And the &lt;code class=&quot;highlighter-rouge&quot;&gt;CGIHTTPRequestHandler&lt;/code&gt; can be enabled in the command line with &lt;code class=&quot;highlighter-rouge&quot;&gt;--cgi&lt;/code&gt; option.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;cgi-example&quot;&gt;CGI Example&lt;/h1&gt;
&lt;p&gt;In this chapter, we will demonstrate a simple example that will print “hello world”.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;First: create a CGI directory&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;create a directory &lt;em&gt;cgi-bin&lt;/em&gt; in &lt;em&gt;basepath&lt;/em&gt;. The directory name can be only &lt;em&gt;cgi-bin&lt;/em&gt; or &lt;em&gt;htbin&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Second: create a python script&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/python&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Import modules for CGI handling &lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cgi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cgitb&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;# Create instance of FieldStorage &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FieldStorage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;# Get data from fields&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'first_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'last_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-type:text/html&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\r\n\r\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;html&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;head&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;title&amp;gt;Hello&amp;lt;/title&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/head&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;body&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;h2&amp;gt;Hello World, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&amp;lt;/h2&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/body&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;put the above script into the &lt;em&gt;hello.py&lt;/em&gt; file in directory &lt;em&gt;basepath/cgi-bin&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Third: start-server&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;start the server in command prompt in directory &lt;em&gt;basepath&lt;/em&gt; with below commanding:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cgi&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then access &lt;a href=&quot;http://localhost:8000/cgi-bin/hello.py?first_name=jame&amp;amp;last_name=curry&quot; title=&quot;link&quot;&gt;http://localhost:8000/cgi-bin/hello.py?first_name=jame&amp;amp;last_name=curry&lt;/a&gt; in the browser client.
&lt;img src=&quot;/public/img/2019-10-08-Running-A-CGI-Web-Server-With-http-server-Module-a.png&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;CGI is the Common Gateway Interface that defines the standard exchange format between webserver and custom scripts.&lt;/p&gt;

&lt;p&gt;With &lt;code class=&quot;highlighter-rouge&quot;&gt;http.server&lt;/code&gt; module, the programmer can build a web server quickly. a lot of web server does not boot up CGI functionality by default. In python, use the &lt;code class=&quot;highlighter-rouge&quot;&gt;CGIHTTPRequestHandler&lt;/code&gt; class to handle cig request or &lt;code class=&quot;highlighter-rouge&quot;&gt;-m&lt;/code&gt; switch of the interpreter in the command line. read more about http.server at &lt;a href=&quot;https://docs.python.org/3/library/http.server.html&quot;&gt;http.server library&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Okay, everything is settled up. Today is the first working day after the  7-day national holiday. Have a nice day at work!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Everything You Need To Know Fetching Internet Resource With Python</title>
   <link href="http://localhost:4000/2019/09/08/Everything-You-Need-To-Know-Fetching-Internet-Resource-With-Python/"/>
   <updated>2019-09-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/09/08/Everything-You-Need-To-Know-Fetching-Internet-Resource-With-Python</id>
   <content type="html">&lt;p&gt;Just like many other languages, Python also has built-in support for internet resource access, far more than. you can fetch internet resource easily with python.&lt;/p&gt;

&lt;p&gt;python mainly version divides into python2.x and python3.x until now. the python2.7 and python3.7 is the most stable version. python3 has been assembled the URL modules from python2, so there are some little differences in URL fetching operation between python2 and python3.&lt;/p&gt;

&lt;p&gt;Don’t worry about complications, take patience. I will do my best to make that as clear as possible.&lt;/p&gt;

&lt;h1 id=&quot;urllib-and-urllib2-in-python2&quot;&gt;urllib and urllib2 in python2&lt;/h1&gt;
&lt;p&gt;python2 has two modules for fetching internet source. one of them is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt;,the another is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;urllib-module&quot;&gt;urllib module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; provides a high-level interface for fetching data across the World Wide Web. One of the most common methods is &lt;code class=&quot;highlighter-rouge&quot;&gt;urlopen&lt;/code&gt; that will return a file-like object that supports the following methods: &lt;code class=&quot;highlighter-rouge&quot;&gt;read()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;readline()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;readlines()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;fileno()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;close()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;info()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;getcode()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geturl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;google&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;07&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2019&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GMT&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Cache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Control&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ISO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8859&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllib2-module&quot;&gt;urllib2 module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; is also python2’s module, as &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; has many restrictions, check &lt;a href=&quot;https://docs.python.org/2.7/library/urllib.html#urllib-restrictions&quot;&gt;urllib restrictions&lt;/a&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; module defines functions and classes which help in opening URLs(mostly HTTP) in a complex world - basic and digest authentications, redirections, cookies and more.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; use an &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; instance to manage handlers that can be either instance of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; or subclass of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt;. the default &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; will contain the following classes(except chains explicitly them or extends from them by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.build_opener([handler, ...])&lt;/code&gt;). them are  &lt;code class=&quot;highlighter-rouge&quot;&gt;ProxyHandler&lt;/code&gt; (if proxy settings are detected), &lt;code class=&quot;highlighter-rouge&quot;&gt;UnknownHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPDefaultErrorHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPRedirectHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;FTPHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;FileHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPErrorProcessor&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The bellow is a simple HTTP request case with &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urlopen&lt;/code&gt; accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;url&lt;/code&gt; parameter which can be either a string or a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object. when we pass a string into, it will create a default &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object. bellow I pass a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object instead.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;GET&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object has a lot of public interfaces. programmer can add request headers by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.add_header(key, val)&lt;/code&gt; , set proxy info by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.set_proxy(host, type)&lt;/code&gt;, get current method of request by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.get_method()&lt;/code&gt;. &lt;a href=&quot;https://docs.python.org/2.7/library/urllib2.html#urllib2.Request&quot;&gt;urllib2 official document&lt;/a&gt; demonstrate it clearly.&lt;/p&gt;

&lt;h1 id=&quot;urllib-in-python3&quot;&gt;urllib in python3&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; module in python2 has been split into parts and renamed in python3 to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;. Also note that the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt;  function in python3 is equivalent to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.urlopen()&lt;/code&gt; , and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.urlopen()&lt;/code&gt; has been removed.&lt;/p&gt;

&lt;p&gt;Also, the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; module in python2 has been split into parts and renamed in python3 to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The python3 has been assembled from &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. and the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; in python3 is no longer a module, it’s a package instead. the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; is a package which collects several modules for working with URLs:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt; for opening and reading URLs&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt; containing the exceptions raised by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt; for parsing URLs&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.robotparser&lt;/code&gt; for parsing robots.txt files&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;urllibrequest-module&quot;&gt;urllib.request module&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt; module assembled the opening and reading parts of the module of the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. it’s a lot of futures are same with &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. it also uses &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; to manage &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt;s which can a &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; or a subclass of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; which deals with corresponding tasks.
The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt; can accept a URL string or a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; instance.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//D.....&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt; always returns a file-like object that has methods,such as &lt;code class=&quot;highlighter-rouge&quot;&gt;getcode()&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;geturl()&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;info()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.Request&lt;/code&gt; class is an abstraction of URL requests. the prototype is:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin_req_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unverifiable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;em&gt;url&lt;/em&gt; should be a string containing a valid Uniform Resource Locators. the &lt;em&gt;method&lt;/em&gt; can be POST, GET, PUT, etc…&lt;/p&gt;

&lt;p&gt;For an HTTP POST request method, &lt;em&gt;data&lt;/em&gt; should be a buffer in the standard &lt;em&gt;application/x-www-form-urlencoded&lt;/em&gt; format. The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse.urlencode()&lt;/code&gt; function can take a mapping or sequence of 2-tuples and return that format string.&lt;/p&gt;

&lt;p&gt;the &lt;em&gt;headers&lt;/em&gt; should be a directory, it is the request header when fetching internet source. the programmer also can be allowed to add cookies into.&lt;/p&gt;

&lt;p&gt;the Request object has a method called &lt;code class=&quot;highlighter-rouge&quot;&gt;set_proxy(host,type)&lt;/code&gt;, which prepare the request by connecting to a proxy server. Programmers can use it like:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.httpbin.org/ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#req.set_proxy('ip:port','scheme')&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#example:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_proxy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'183.128.223.120:8118'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if you are in win7 environment, then make sure your &lt;em&gt;automatically detect settings&lt;/em&gt; at &lt;em&gt;LAN setting&lt;/em&gt; dialog  have been clicked on.
&lt;img src=&quot;/public/img/2019-09-0-Everythings-You-Need-To-Know-Fetching-Internet-Resource-With-Python-a.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;however, if you don’t want to change your computer environment, then maybe you can register a new &lt;code class=&quot;highlighter-rouge&quot;&gt;ProxyHandler&lt;/code&gt; to the default &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt;, and disable the default proxy settings.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# disable proxy by passing an empty&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProxyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({})&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#alertnatively you could set a proxy for http with&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#proxy_handler = urllib.request.ProxyHandler({'http': 'http://ip:port/'})&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#example&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProxyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://183.128.223.120:8118/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;opener&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build_opener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.httpbin.org/ip'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# open the website with the opener&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the next is a simple &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; example&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'GET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;lt;!doctype html&amp;gt;&amp;lt;html itemsco...&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f.close()&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urlliberror-module&quot;&gt;urllib.error module&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt; module defines exception classes for exceptions raised by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.error&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://locahost:8080'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLError&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllibparse-module&quot;&gt;urllib.parse module&lt;/h2&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt; defines a standard interface to break Uniform Resource Locator up to components, to combine the components to a  URL string, to convert a “Relative URL” to absolute URL given a “base URL”, to mapping a dictionary or sequence of 2-tuples to a valid POST data format.&lt;/p&gt;

&lt;p&gt;one of the most common methods used is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse.urlencode&lt;/code&gt;, which will return a percent-encoded ASCII text string, which used in POST request. the result string is serials of &lt;code class=&quot;highlighter-rouge&quot;&gt;key=value&lt;/code&gt; pairs separated by &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt; notation, which follows the standard format of &lt;em&gt;application/x-www-form-urlencoded&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;next is a simple POST case.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.error&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.parse&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#contruct Request with url and method&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://locahost'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#the data that needs to send&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gorge&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;carrer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;truck driver&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#the encoded str, it format is key1=value1&amp;amp;key2=value2&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlencode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#convert to bytes&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bparam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#request&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bparam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLError&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllibrobotparser-module&quot;&gt;urllib.robotparser module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.robotparser&lt;/code&gt;, which used to manage Uniform Resource Locator of WWW Robots (also called wanderers or spiders) visits. this is outside of the scope of this document.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;congratulations, you have been learned the part of internet fetching resource. I hope I wrote it clear.&lt;/p&gt;

&lt;p&gt;let me recap. In python2, which have two modules use for fetching internet resource, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; is the enhanced edition of the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt;,  the mechanism of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; use an &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; to manage serial of &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;python3 assembled the future of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2 into &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt;. Be careful that the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen&lt;/code&gt; corresponding of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.urlopen()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Alright! we have arrived at the bottom of this document. I hope you absorb this well. The Mid-Autumn festive is coming, Have a good Mid-Autumn Festive. bye buds!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Everything You Need To Know Fetching Internet Resource With Python</title>
   <link href="http://localhost:4000/2019/09/08/Everything-You-Need-To-Know-Fetching-Internet-Resource-With-Python/"/>
   <updated>2019-09-08T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/09/08/Everything-You-Need-To-Know-Fetching-Internet-Resource-With-Python</id>
   <content type="html">&lt;p&gt;Just like many other languages, Python also has built-in support for internet resource access, far more than. you can fetch internet resource easily with python.&lt;/p&gt;

&lt;p&gt;python mainly version divides into python2.x and python3.x until now. the python2.7 and python3.7 is the most stable version. python3 has been assembled the URL modules from python2, so there are some little differences in URL fetching operation between python2 and python3.&lt;/p&gt;

&lt;p&gt;Don’t worry about complications, take patience. I will do my best to make that as clear as possible.&lt;/p&gt;

&lt;h1 id=&quot;urllib-and-urllib2-in-python2&quot;&gt;urllib and urllib2 in python2&lt;/h1&gt;
&lt;p&gt;python2 has two modules for fetching internet source. one of them is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt;,the another is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;urllib-module&quot;&gt;urllib module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; provides a high-level interface for fetching data across the World Wide Web. One of the most common methods is &lt;code class=&quot;highlighter-rouge&quot;&gt;urlopen&lt;/code&gt; that will return a file-like object that supports the following methods: &lt;code class=&quot;highlighter-rouge&quot;&gt;read()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;readline()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;readlines()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;fileno()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;close()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;info()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;getcode()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geturl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;google&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;07&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2019&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GMT&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Cache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Control&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ISO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8859&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllib2-module&quot;&gt;urllib2 module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; is also python2’s module, as &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; has many restrictions, check &lt;a href=&quot;https://docs.python.org/2.7/library/urllib.html#urllib-restrictions&quot;&gt;urllib restrictions&lt;/a&gt;. The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; module defines functions and classes which help in opening URLs(mostly HTTP) in a complex world - basic and digest authentications, redirections, cookies and more.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; use an &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; instance to manage handlers that can be either instance of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; or subclass of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt;. the default &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; will contain the following classes(except chains explicitly them or extends from them by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.build_opener([handler, ...])&lt;/code&gt;). them are  &lt;code class=&quot;highlighter-rouge&quot;&gt;ProxyHandler&lt;/code&gt; (if proxy settings are detected), &lt;code class=&quot;highlighter-rouge&quot;&gt;UnknownHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPDefaultErrorHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPRedirectHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;FTPHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;FileHandler&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTPErrorProcessor&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The bellow is a simple HTTP request case with &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urlopen&lt;/code&gt; accepts a &lt;code class=&quot;highlighter-rouge&quot;&gt;url&lt;/code&gt; parameter which can be either a string or a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object. when we pass a string into, it will create a default &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object. bellow I pass a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object instead.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;GET&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doctype&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemscope&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; object has a lot of public interfaces. programmer can add request headers by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.add_header(key, val)&lt;/code&gt; , set proxy info by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.set_proxy(host, type)&lt;/code&gt;, get current method of request by &lt;code class=&quot;highlighter-rouge&quot;&gt;Request.get_method()&lt;/code&gt;. &lt;a href=&quot;https://docs.python.org/2.7/library/urllib2.html#urllib2.Request&quot;&gt;urllib2 official document&lt;/a&gt; demonstrate it clearly.&lt;/p&gt;

&lt;h1 id=&quot;urllib-in-python3&quot;&gt;urllib in python3&lt;/h1&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; module in python2 has been split into parts and renamed in python3 to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;. Also note that the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt;  function in python3 is equivalent to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.urlopen()&lt;/code&gt; , and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.urlopen()&lt;/code&gt; has been removed.&lt;/p&gt;

&lt;p&gt;Also, the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; module in python2 has been split into parts and renamed in python3 to &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The python3 has been assembled from &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. and the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; in python3 is no longer a module, it’s a package instead. the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; is a package which collects several modules for working with URLs:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt; for opening and reading URLs&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt; containing the exceptions raised by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt; for parsing URLs&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.robotparser&lt;/code&gt; for parsing robots.txt files&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;urllibrequest-module&quot;&gt;urllib.request module&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt; module assembled the opening and reading parts of the module of the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. it’s a lot of futures are same with &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2. it also uses &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; to manage &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt;s which can a &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; or a subclass of &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseHandler&lt;/code&gt; which deals with corresponding tasks.
The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt; can accept a URL string or a &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; instance.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//D.....&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen()&lt;/code&gt; always returns a file-like object that has methods,such as &lt;code class=&quot;highlighter-rouge&quot;&gt;getcode()&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;geturl()&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;info()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.Request&lt;/code&gt; class is an abstraction of URL requests. the prototype is:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin_req_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unverifiable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;em&gt;url&lt;/em&gt; should be a string containing a valid Uniform Resource Locators. the &lt;em&gt;method&lt;/em&gt; can be POST, GET, PUT, etc…&lt;/p&gt;

&lt;p&gt;For an HTTP POST request method, &lt;em&gt;data&lt;/em&gt; should be a buffer in the standard &lt;em&gt;application/x-www-form-urlencoded&lt;/em&gt; format. The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse.urlencode()&lt;/code&gt; function can take a mapping or sequence of 2-tuples and return that format string.&lt;/p&gt;

&lt;p&gt;the &lt;em&gt;headers&lt;/em&gt; should be a directory, it is the request header when fetching internet source. the programmer also can be allowed to add cookies into.&lt;/p&gt;

&lt;p&gt;the Request object has a method called &lt;code class=&quot;highlighter-rouge&quot;&gt;set_proxy(host,type)&lt;/code&gt;, which prepare the request by connecting to a proxy server. Programmers can use it like:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.httpbin.org/ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#req.set_proxy('ip:port','scheme')&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#example:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_proxy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'183.128.223.120:8118'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if you are in win7 environment, then make sure your &lt;em&gt;automatically detect settings&lt;/em&gt; at &lt;em&gt;LAN setting&lt;/em&gt; dialog  have been clicked on.
&lt;img src=&quot;/public/img/2019-09-0-Everythings-You-Need-To-Know-Fetching-Internet-Resource-With-Python-a.jpg&quot; alt=&quot;Alt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;however, if you don’t want to change your computer environment, then maybe you can register a new &lt;code class=&quot;highlighter-rouge&quot;&gt;ProxyHandler&lt;/code&gt; to the default &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt;, and disable the default proxy settings.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# disable proxy by passing an empty&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProxyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({})&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#alertnatively you could set a proxy for http with&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#proxy_handler = urllib.request.ProxyHandler({'http': 'http://ip:port/'})&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#example&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProxyHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://183.128.223.120:8118/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;opener&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build_opener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proxy_handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.httpbin.org/ip'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# open the website with the opener&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the next is a simple &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; example&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.google.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'GET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&amp;lt;!doctype html&amp;gt;&amp;lt;html itemsco...&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f.close()&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urlliberror-module&quot;&gt;urllib.error module&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt; module defines exception classes for exceptions raised by &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.error&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://locahost:8080'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLError&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllibparse-module&quot;&gt;urllib.parse module&lt;/h2&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt; defines a standard interface to break Uniform Resource Locator up to components, to combine the components to a  URL string, to convert a “Relative URL” to absolute URL given a “base URL”, to mapping a dictionary or sequence of 2-tuples to a valid POST data format.&lt;/p&gt;

&lt;p&gt;one of the most common methods used is &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse.urlencode&lt;/code&gt;, which will return a percent-encoded ASCII text string, which used in POST request. the result string is serials of &lt;code class=&quot;highlighter-rouge&quot;&gt;key=value&lt;/code&gt; pairs separated by &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt; notation, which follows the standard format of &lt;em&gt;application/x-www-form-urlencoded&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;next is a simple POST case.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.request&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.error&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.parse&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#contruct Request with url and method&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://locahost'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;''&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#the data that needs to send&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gorge&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;carrer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;truck driver&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#the encoded str, it format is key1=value1&amp;amp;key2=value2&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlencode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#convert to bytes&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bparam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#request&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bparam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;URLError&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;urllibrobotparser-module&quot;&gt;urllib.robotparser module&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.robotparser&lt;/code&gt;, which used to manage Uniform Resource Locator of WWW Robots (also called wanderers or spiders) visits. this is outside of the scope of this document.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;congratulations, you have been learned the part of internet fetching resource. I hope I wrote it clear.&lt;/p&gt;

&lt;p&gt;let me recap. In python2, which have two modules use for fetching internet resource, they are &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt;. the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; is the enhanced edition of the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt;,  the mechanism of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; use an &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenerDirector&lt;/code&gt; to manage serial of &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;python3 assembled the future of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2&lt;/code&gt; of python2 into &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.error&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.parse&lt;/code&gt;. Be careful that the &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib.request.urlopen&lt;/code&gt; corresponding of &lt;code class=&quot;highlighter-rouge&quot;&gt;urllib2.urlopen()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Alright! we have arrived at the bottom of this document. I hope you absorb this well. The Mid-Autumn festive is coming, Have a good Mid-Autumn Festive. bye buds!&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Python JSON Example</title>
   <link href="http://localhost:4000/2019/09/01/Python-JSON-Example/"/>
   <updated>2019-09-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/09/01/Python-JSON-Example</id>
   <content type="html">&lt;p&gt;JSON (JavaScript Object Notation) is a lightweight data-interchange format. Python builds very powerful build-in functionality support JSON. This article will discuss the encoding and decoding of JSON in Python. make sure you have already known JSON syntax before starting if you aren’t, please check it first.&lt;/p&gt;

&lt;h1 id=&quot;python-support-json-natively&quot;&gt;Python support JSON Natively!&lt;/h1&gt;
&lt;p&gt;Python has a build-in package json for encoding and decoding JSON data. just throw the below little guy up to your file in the first line.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;decoding-json&quot;&gt;Decoding JSON&lt;/h1&gt;
&lt;p&gt;json library package provides two methods for deserializing from a string(json format) to a Python Object.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#Decode the json string&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileobj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#Decode while JSON file read&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;load()&lt;/code&gt; accepted a file_object parameter, deserializing from a file contents. however &lt;code class=&quot;highlighter-rouge&quot;&gt;loads()&lt;/code&gt; accepted string parameter, deserializing from a string.&lt;/p&gt;

&lt;p&gt;if the string data or the file contents being deserialized is not a valid JSON document, then a &lt;code class=&quot;highlighter-rouge&quot;&gt;JSONDecodeError&lt;/code&gt; will be raised.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# some JSON:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;'{ &quot;school&quot;:&quot;oxford&quot;,&quot;type&quot;:&quot;university&quot;,&quot;location&quot;:&quot;England&quot;}'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# parse x:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# the result y is a Python dictionary:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;school&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; is a &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; in &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Output: oxford is a university in England&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;encoding-json&quot;&gt;Encoding JSON&lt;/h1&gt;
&lt;p&gt;json package also provides two methods for serializing Python Object as a JSON formatted string. they are:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#encoding to JSON objects&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#encoded string writing on file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;dump()&lt;/code&gt; method will write the encoded string into a file. &lt;code class=&quot;highlighter-rouge&quot;&gt;dumps()&lt;/code&gt; method produces only a JSON form string.&lt;/p&gt;

&lt;p&gt;They both accept a &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter that should be a function that gets called for objects that can’t otherwise be serialized. it should return a JSON encoded version of the object or raise &lt;code class=&quot;highlighter-rouge&quot;&gt;TypeError&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;TypeError&lt;/code&gt; will be raised, if not specified the &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter while meeting unable to handled types.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# a Python object (dict):&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Jay gatsby&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;male&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;career&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;thief&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gambler&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bootlegger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;beloved&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;daisy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;friends&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nick carraway&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;great&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;yes&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# convert into JSON:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# the result y is a JSON string:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Output: {&quot;name&quot;: &quot;Jay gatsby&quot;, &quot;gender&quot;: &quot;male&quot;, &quot;career&quot;: [&quot;thief&quot;, &quot;gambler&quot;, &quot;bootlegger&quot;], &quot;beloved&quot;: &quot;daisy&quot;, &quot;friends&quot;: &quot;nick carraway&quot;, &quot;great&quot;: &quot;yes&quot;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you have already know how to deserializing and serializing till here. in the next chapter, we will discuss the variable conversion table between JSON and Python.&lt;/p&gt;
&lt;h1 id=&quot;conversion-table&quot;&gt;Conversion table&lt;/h1&gt;
&lt;h2 id=&quot;json-to-python&quot;&gt;JSON to Python&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;JSON&lt;/th&gt;
      &lt;th&gt;Python&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Object&lt;/td&gt;
      &lt;td&gt;dict&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Array&lt;/td&gt;
      &lt;td&gt;list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;String&lt;/td&gt;
      &lt;td&gt;unicode&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number – int&lt;/td&gt;
      &lt;td&gt;number - int, long&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number – real&lt;/td&gt;
      &lt;td&gt;float&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Null&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;you should make sure JSON string is valid JSON form when converting a JSON string into python. the website can help you &lt;a href=&quot;http://jsonviewer.stack.hu/&quot;&gt;jsonviwer&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;python-to-json&quot;&gt;Python to JSON&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Python&lt;/th&gt;
      &lt;th&gt;JSON&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;dict&lt;/td&gt;
      &lt;td&gt;Object&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;list&lt;/td&gt;
      &lt;td&gt;Array&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;unicode&lt;/td&gt;
      &lt;td&gt;String&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number - int, long&lt;/td&gt;
      &lt;td&gt;number – int&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;float&lt;/td&gt;
      &lt;td&gt;number – real&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;Null&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;when you convert Python into JSON form string, you should also guarantee that it’s a valid python datatype that can be converted into JSON form. you should specify &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter as a function that for custom conversion if you are not using above datatype sheet when converting.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Now everything is very clear. I will summarize steps once more.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;import &lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt; package&lt;/li&gt;
  &lt;li&gt;deserializing use &lt;code class=&quot;highlighter-rouge&quot;&gt;loads()&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;load()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;serializing  use &lt;code class=&quot;highlighter-rouge&quot;&gt;dumps()&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;dump()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;make all of the data that converting is valid&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;if you have some recommendations or thoughts, don’t stingy your words.
write it in the comment area we will discuss it together.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Python JSON Example</title>
   <link href="http://localhost:4000/2019/09/01/Python-JSON-Example/"/>
   <updated>2019-09-01T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/09/01/Python-JSON-Example</id>
   <content type="html">&lt;p&gt;JSON (JavaScript Object Notation) is a lightweight data-interchange format. Python builds very powerful build-in functionality support JSON. This article will discuss the encoding and decoding of JSON in Python. make sure you have already known JSON syntax before starting if you aren’t, please check it first.&lt;/p&gt;

&lt;h1 id=&quot;python-support-json-natively&quot;&gt;Python support JSON Natively!&lt;/h1&gt;
&lt;p&gt;Python has a build-in package json for encoding and decoding JSON data. just throw the below little guy up to your file in the first line.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;decoding-json&quot;&gt;Decoding JSON&lt;/h1&gt;
&lt;p&gt;json library package provides two methods for deserializing from a string(json format) to a Python Object.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#Decode the json string&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileobj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#Decode while JSON file read&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;load()&lt;/code&gt; accepted a file_object parameter, deserializing from a file contents. however &lt;code class=&quot;highlighter-rouge&quot;&gt;loads()&lt;/code&gt; accepted string parameter, deserializing from a string.&lt;/p&gt;

&lt;p&gt;if the string data or the file contents being deserialized is not a valid JSON document, then a &lt;code class=&quot;highlighter-rouge&quot;&gt;JSONDecodeError&lt;/code&gt; will be raised.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# some JSON:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;'{ &quot;school&quot;:&quot;oxford&quot;,&quot;type&quot;:&quot;university&quot;,&quot;location&quot;:&quot;England&quot;}'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# parse x:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# the result y is a Python dictionary:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;school&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; is a &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; in &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Output: oxford is a university in England&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;encoding-json&quot;&gt;Encoding JSON&lt;/h1&gt;
&lt;p&gt;json package also provides two methods for serializing Python Object as a JSON formatted string. they are:&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#encoding to JSON objects&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#encoded string writing on file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the &lt;code class=&quot;highlighter-rouge&quot;&gt;dump()&lt;/code&gt; method will write the encoded string into a file. &lt;code class=&quot;highlighter-rouge&quot;&gt;dumps()&lt;/code&gt; method produces only a JSON form string.&lt;/p&gt;

&lt;p&gt;They both accept a &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter that should be a function that gets called for objects that can’t otherwise be serialized. it should return a JSON encoded version of the object or raise &lt;code class=&quot;highlighter-rouge&quot;&gt;TypeError&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;TypeError&lt;/code&gt; will be raised, if not specified the &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter while meeting unable to handled types.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# a Python object (dict):&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Jay gatsby&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;male&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;career&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;thief&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gambler&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bootlegger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;beloved&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;daisy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;friends&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nick carraway&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;great&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;yes&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# convert into JSON:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# the result y is a JSON string:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Output: {&quot;name&quot;: &quot;Jay gatsby&quot;, &quot;gender&quot;: &quot;male&quot;, &quot;career&quot;: [&quot;thief&quot;, &quot;gambler&quot;, &quot;bootlegger&quot;], &quot;beloved&quot;: &quot;daisy&quot;, &quot;friends&quot;: &quot;nick carraway&quot;, &quot;great&quot;: &quot;yes&quot;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you have already know how to deserializing and serializing till here. in the next chapter, we will discuss the variable conversion table between JSON and Python.&lt;/p&gt;
&lt;h1 id=&quot;conversion-table&quot;&gt;Conversion table&lt;/h1&gt;
&lt;h2 id=&quot;json-to-python&quot;&gt;JSON to Python&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;JSON&lt;/th&gt;
      &lt;th&gt;Python&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Object&lt;/td&gt;
      &lt;td&gt;dict&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Array&lt;/td&gt;
      &lt;td&gt;list&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;String&lt;/td&gt;
      &lt;td&gt;unicode&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number – int&lt;/td&gt;
      &lt;td&gt;number - int, long&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number – real&lt;/td&gt;
      &lt;td&gt;float&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Null&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;you should make sure JSON string is valid JSON form when converting a JSON string into python. the website can help you &lt;a href=&quot;http://jsonviewer.stack.hu/&quot;&gt;jsonviwer&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;python-to-json&quot;&gt;Python to JSON&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Python&lt;/th&gt;
      &lt;th&gt;JSON&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;dict&lt;/td&gt;
      &lt;td&gt;Object&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;list&lt;/td&gt;
      &lt;td&gt;Array&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;unicode&lt;/td&gt;
      &lt;td&gt;String&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number - int, long&lt;/td&gt;
      &lt;td&gt;number – int&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;float&lt;/td&gt;
      &lt;td&gt;number – real&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;Null&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;when you convert Python into JSON form string, you should also guarantee that it’s a valid python datatype that can be converted into JSON form. you should specify &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; parameter as a function that for custom conversion if you are not using above datatype sheet when converting.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Now everything is very clear. I will summarize steps once more.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;import &lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt; package&lt;/li&gt;
  &lt;li&gt;deserializing use &lt;code class=&quot;highlighter-rouge&quot;&gt;loads()&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;load()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;serializing  use &lt;code class=&quot;highlighter-rouge&quot;&gt;dumps()&lt;/code&gt;/&lt;code class=&quot;highlighter-rouge&quot;&gt;dump()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;make all of the data that converting is valid&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;if you have some recommendations or thoughts, don’t stingy your words.
write it in the comment area we will discuss it together.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to use Jetty build simple Http Server</title>
   <link href="http://localhost:4000/2019/08/29/How-to-use-Jetty-build-simple-Http-Server/"/>
   <updated>2019-08-29T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/08/29/How-to-use-Jetty-build-simple-Http-Server</id>
   <content type="html">&lt;p&gt;Hello guys. I would like to explain how to use Jetty to build HTTP server in this blog. Welcome to leave comments if you have any troubles or thoughts about it.&lt;/p&gt;

&lt;h1 id=&quot;precondition&quot;&gt;Precondition&lt;/h1&gt;

&lt;p&gt;Readers should download Jetty before the starting. According to official documents, readers can download Jetty at &lt;a href=&quot;https://www.eclipse.org/jetty/download.html&quot;&gt;the download page&lt;/a&gt;, and access API document&lt;/p&gt;

&lt;h1 id=&quot;build-http-jetty-server&quot;&gt;Build HTTP Jetty server&lt;/h1&gt;
&lt;p&gt;The first step, create a server instance&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Server&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8081&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Create a basic jetty server object that will listen on port 8081. Note that if you set this to port 0 then a randomly available port will be assigned that you can either look in the logs for the port or programmatically obtain it for use in test cases.&lt;/p&gt;

&lt;p&gt;The second step, need to set Handler which should be wrapped.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the handler is an instance of an interface implementation class of &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface. A Handler instance is required by an &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Server&lt;/code&gt; to handle incoming HTTP requests.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Handlers&lt;/code&gt; are passed the servlet API request and response object but are not &lt;code class=&quot;highlighter-rouge&quot;&gt;Servlets&lt;/code&gt;. The servlet container is implemented by handlers for context, security, session, and servlet that modify the request object before passing it to the next stage of handling.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface has lots of derived class, this chapter will demonstrate &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; usage.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;handler&lt;/code&gt; has a relevance with &lt;code class=&quot;highlighter-rouge&quot;&gt;Servlet&lt;/code&gt; Instance by function &lt;code class=&quot;highlighter-rouge&quot;&gt;handler.addServlet()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  	&lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SESSIONS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NO_SECURITY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContextPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hello&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;ServletHolder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myserverletholder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServerletHolder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myserverlet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addServlet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myserverletholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pathSpec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;myservletholder&lt;/code&gt; is an instance of &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.servlet.ServletHolder&lt;/code&gt;. it’s a servlet instance and context holder. Holds the name, params and some state of a &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.Servlet&lt;/code&gt; instance. It implements the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletConfig&lt;/code&gt; interface. This class will organize the loading of servlets when needed or requested.&lt;/p&gt;

&lt;p&gt;Each &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletHolder&lt;/code&gt; instance normally interests a &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.Servlet&lt;/code&gt; interface. servlet is a small Java program that runs within a Web server. servlets receive and respond to requests from Web clients, usually across HTTP(HyperText Transfer Protocol). To implement this interface,  you can write an HTTP servlet that extends to &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.http.HttpServlet&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;myservlet&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpServlet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**
         * handle get request
         */&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doGet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//somecode&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**
         * handle post request
         */&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;c1&quot;&gt;//somecode&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The last step, need to start the server&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We have discussed the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; usage, actually &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface has lot of derived classes.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; is only one of the &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt;’s drived classes. And the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; is not suitable for handling more complicated scenarios, my GitHub had demonstrated &lt;a href=&quot;https://github.com/voltWu/Jetty-HTTP-example&quot;&gt;WebAppContext extends to org.eclipse.jetty.server.Handler&lt;/a&gt; demo.&lt;/p&gt;

&lt;h1 id=&quot;epilogue&quot;&gt;Epilogue&lt;/h1&gt;
&lt;p&gt;Above demonstrated how to create a simple HTTP server use Jetty, I hope this page will be helpful for you. if you have any troubles or thoughts, welcome to leave messages. Have a good day!&lt;/p&gt;

&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
&lt;script&gt;

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-github-com-voltwu-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
&lt;/script&gt;

&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;https://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;

</content>
 </entry>
 
 <entry>
   <title>How to use Jetty build simple Http Server</title>
   <link href="http://localhost:4000/2019/08/29/How-to-use-Jetty-build-simple-Http-Server/"/>
   <updated>2019-08-29T10:01:01+08:00</updated>
   <id>http://localhost:4000/2019/08/29/How-to-use-Jetty-build-simple-Http-Server</id>
   <content type="html">&lt;p&gt;Hello guys. I would like to explain how to use Jetty to build HTTP server in this blog. Welcome to leave comments if you have any troubles or thoughts about it.&lt;/p&gt;

&lt;h1 id=&quot;precondition&quot;&gt;Precondition&lt;/h1&gt;

&lt;p&gt;Readers should download Jetty before the starting. According to official documents, readers can download Jetty at &lt;a href=&quot;https://www.eclipse.org/jetty/download.html&quot;&gt;the download page&lt;/a&gt;, and access API document&lt;/p&gt;

&lt;h1 id=&quot;build-http-jetty-server&quot;&gt;Build HTTP Jetty server&lt;/h1&gt;
&lt;p&gt;The first step, create a server instance&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Server&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8081&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Create a basic jetty server object that will listen on port 8081. Note that if you set this to port 0 then a randomly available port will be assigned that you can either look in the logs for the port or programmatically obtain it for use in test cases.&lt;/p&gt;

&lt;p&gt;The second step, need to set Handler which should be wrapped.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the handler is an instance of an interface implementation class of &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface. A Handler instance is required by an &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Server&lt;/code&gt; to handle incoming HTTP requests.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Handlers&lt;/code&gt; are passed the servlet API request and response object but are not &lt;code class=&quot;highlighter-rouge&quot;&gt;Servlets&lt;/code&gt;. The servlet container is implemented by handlers for context, security, session, and servlet that modify the request object before passing it to the next stage of handling.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface has lots of derived class, this chapter will demonstrate &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; usage.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;handler&lt;/code&gt; has a relevance with &lt;code class=&quot;highlighter-rouge&quot;&gt;Servlet&lt;/code&gt; Instance by function &lt;code class=&quot;highlighter-rouge&quot;&gt;handler.addServlet()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  	&lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SESSIONS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ServletContextHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NO_SECURITY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContextPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hello&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;ServletHolder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myserverletholder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServerletHolder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myserverlet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addServlet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myserverletholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pathSpec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;myservletholder&lt;/code&gt; is an instance of &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.servlet.ServletHolder&lt;/code&gt;. it’s a servlet instance and context holder. Holds the name, params and some state of a &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.Servlet&lt;/code&gt; instance. It implements the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletConfig&lt;/code&gt; interface. This class will organize the loading of servlets when needed or requested.&lt;/p&gt;

&lt;p&gt;Each &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletHolder&lt;/code&gt; instance normally interests a &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.Servlet&lt;/code&gt; interface. servlet is a small Java program that runs within a Web server. servlets receive and respond to requests from Web clients, usually across HTTP(HyperText Transfer Protocol). To implement this interface,  you can write an HTTP servlet that extends to &lt;code class=&quot;highlighter-rouge&quot;&gt;javax.servlet.http.HttpServlet&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;myservlet&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpServlet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**
         * handle get request
         */&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doGet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//somecode&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**
         * handle post request
         */&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServletException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;c1&quot;&gt;//somecode&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The last step, need to start the server&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We have discussed the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; usage, actually &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt; interface has lot of derived classes.  The &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; is only one of the &lt;code class=&quot;highlighter-rouge&quot;&gt;org.eclipse.jetty.server.Handler&lt;/code&gt;’s drived classes. And the &lt;code class=&quot;highlighter-rouge&quot;&gt;ServletContextHandler&lt;/code&gt; is not suitable for handling more complicated scenarios, my GitHub had demonstrated &lt;a href=&quot;https://github.com/voltWu/Jetty-HTTP-example&quot;&gt;WebAppContext extends to org.eclipse.jetty.server.Handler&lt;/a&gt; demo.&lt;/p&gt;

&lt;h1 id=&quot;epilogue&quot;&gt;Epilogue&lt;/h1&gt;
&lt;p&gt;Above demonstrated how to create a simple HTTP server use Jetty, I hope this page will be helpful for you. if you have any troubles or thoughts, welcome to leave messages. Have a good day!&lt;/p&gt;

&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
&lt;script&gt;

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-github-com-voltwu-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
&lt;/script&gt;

&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;https://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;

</content>
 </entry>
 

</feed>
